{"version":3,"file":"521.4b43f5de.async.js","mappings":"iLAOMA,EAAQ,SAAHC,EAA4C,KAAtCC,EAAED,EAAFC,GAAIC,EAASF,EAATE,UAAcC,EAAKC,EAAAA,EAAAJ,EAAAK,CAAA,EACtC,SACEC,EAAAA,KAAA,MAAAC,EAAAA,EAAAA,EAAAA,EAAA,GACMJ,CAAK,MACTK,IAAG,GAAAC,OAAKC,EAAAA,EAAQ,oBAAAD,OAAmBR,CAAE,EACrCU,IAAI,GACJT,UAAWA,CAAU,EACtB,CAEL,EAEA,IAAeH,C,+DCVTa,EAAkB,SAAHZ,EAKP,KAJZa,EAAQb,EAARa,SACAC,EAAId,EAAJc,KAAIC,EAAAf,EACJgB,eAAAA,EAAcD,IAAA,OAAG,GAAKA,EAAAE,EAAAjB,EACtBkB,MAAAA,EAAKD,IAAA,OAAG,mBAAkBA,EAE1B,SACEX,EAAAA,KAAA,KACEa,OAAO,SACPC,QAAUJ,EAA6B,SAACK,EAAG,CAAF,OAAKA,EAAEL,eAAe,CAAC,EAArCM,OAC3BC,KAAMT,EACNU,IAAI,aACJC,MAAO,CAAEP,MAAAA,EAAOQ,UAAW,WAAY,EAAEb,SAExCA,CAAQ,CACR,CAEP,EAEA,IAAeD,C,mICxBTe,EAAY,SAACC,EAAsD,CACvE,IAAMC,EAAOD,EAAeE,KAAK,EAAEC,IAAI,SAACC,EAAQ,CAC9C,IAAMC,GAAOD,EAAIE,QAAQ,iBAAkB,IAAI,EAC/C,MAAO,CAAED,KAAAA,GAAME,MAAOP,EAAeI,CAAG,CAAE,CAC5C,CAAC,EACD,OAAOH,CACT,EAEIO,EAA+C,CAAC,EAEpD,GAAI,CACFA,EAAYT,EAAUU,EAAAA,KAAAA,CAA+C,CACvE,OAASC,EAAP,CACAC,QAAQC,KAAKF,CAAK,EAClBF,EAAY,CAAC,CACf,CAQA,IAAMK,EAAU,SAAHzC,EAAsD,KAAhDiC,EAAIjC,EAAJiC,KAAMS,EAAK1C,EAAL0C,MAAOC,GAAM3C,EAAN2C,OAAWC,EAASxC,EAAAA,EAAAJ,EAAAK,CAAA,EAC5CwC,GAAWT,EAAUU,KAAK,SAACC,GAAM,CAAF,OAAKA,GAAKd,OAASA,CAAI,GAC5D,SACE3B,EAAAA,KAAC0C,EAAAA,EAAIzC,EAAAA,EAAA,CACH0C,UAAW,oBACT3C,EAAAA,KAAA,OAAKE,IAAKqC,IAAQ,YAARA,GAAUV,MAAOxB,IAAI,GAAG+B,MAAOA,EAAOC,OAAQA,EAAO,CAAE,CAAC,CAClE,EACGC,CAAS,CACf,CAEL,EAEA,IAAeH,C,miBC7BFS,EAAqB,UAAM,CACtC,IAAMC,KAAWC,EAAAA,aAAY,EAEvBC,KAAkBC,EAAAA,aAAY,UAAM,CACxC,OAAOH,EAAc,CAAEI,KAAM,sBAAuB,CAAC,CACvD,EAAG,CAACJ,CAAQ,CAAC,EAEb,OAAOE,CACT,EAEaG,EAAsB,UAAM,CACvC,IAAMC,KAAwBC,EAAAA,aAC5B,SAACC,EAAY,CAAF,OAAKA,EAAMC,UAAUH,UAAU,CAC5C,EAEA,OAAOA,CACT,EAEaI,EAA2B,UAAM,CAC5C,IAAMV,KAAWC,EAAAA,aAAY,EAEvBU,KAAwBR,EAAAA,aAAW,eAAAtD,EAAA+D,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KACvC,SAAAC,EAAOC,EAAkB,CAAF,OAAAH,EAAAA,EAAA,EAAAI,KAAA,SAAAC,GAAE,CAAF,cAAAA,GAAAC,KAAAD,GAAAE,KAAE,CAAF,OACjBJ,GACFhB,EAAS,CACPI,KAAM,6BACNiB,QAAS,CAAEC,UAAWN,CAAS,CACjC,CAAC,EACF,wBAAAE,GAAAK,KAAA,IAAAR,CAAA,EACF,mBAAAS,EAAA,QAAA3E,EAAA4E,MAAA,KAAAC,SAAA,MACD,CAAC1B,CAAQ,CACX,EAEA,OAAOW,CACT,EAEagB,EAA4B,UAAM,CAC7C,IAAMC,KAAoCrB,EAAAA,aACxC,SAACC,EAAY,CAAF,OAAKA,EAAMC,UAAUmB,gBAAgB,CAClD,EAEA,OAAOA,CACT,EAEaC,EAAuB,UAAM,CACxC,IAAM7B,KAAWC,EAAAA,aAAY,EAEvB6B,KAAoB3B,EAAAA,aACxB,SAAC4B,EAAiD,KAAzBC,EAAaN,UAAAO,OAAA,GAAAP,UAAA,KAAAvD,OAAAuD,UAAA,GAAG,GACvC,OAAO1B,EAAc,CACnBI,KAAM,4BACNiB,QAAS,CACPW,cAAAA,EACAE,gBAAiBH,CACnB,CACF,CAAC,CACH,EACA,CAAC/B,CAAQ,CACX,EAEA,OAAO8B,CACT,EAEaK,EAAiB,UAAM,CAClC,IAAMnC,KAAWC,EAAAA,aAAY,EAEvBmC,KAAcjC,EAAAA,aAClB,SAACa,EAA2C,KAAzBgB,EAAaN,UAAAO,OAAA,GAAAP,UAAA,KAAAvD,OAAAuD,UAAA,GAAG,GACjC,GAAIV,EACF,OAAOhB,EAAc,CACnBI,KAAM,sBACNiB,QAAS,CAAEC,UAAWN,EAAUgB,cAAAA,CAAc,CAChD,CAAC,CAEL,EACA,CAAChC,CAAQ,CACX,EAEA,OAAOoC,CACT,EAEaC,EAAkB,UAAM,CACnC,IAAMrC,KAAWC,EAAAA,aAAY,EAEvBqC,KAAiBnC,EAAAA,aACrB,SAACoC,EAA6B,CAC5B,OAAOvC,EAAS,CACdI,KAAM,yBACNiB,QAAS,CACPmB,WAAYD,CACd,CACF,CAAC,CACH,EACA,CAACvC,CAAQ,CACX,EAEA,OAAOsC,CACT,EAEaG,EAAwB,UAAM,CACzC,IAAMzC,KAAWC,EAAAA,aAAY,EAEvByC,KAAqBvC,EAAAA,aACzB,SAACkB,EAAiB,CAChB,OAAOrB,EAAc,CACnBI,KAAM,4BACNiB,QAAAA,CACF,CAAC,CACH,EACA,CAACrB,CAAQ,CACX,EAEA,OAAO0C,CACT,EAEaC,GAAe,UAAM,CAChC,IAAM3C,KAAWC,EAAAA,aAAY,EAEvB2C,KAAYzC,EAAAA,aAChB,SAACkB,EAAqB,CACpB,OAAOrB,EAAc,CAAEI,KAAM,sBAAuBiB,QAAAA,CAAQ,CAAC,CAC/D,EACA,CAACrB,CAAQ,CACX,EAEA,OAAO4C,CACT,EAEaC,EAAwB,UAAM,CACzC,IAAM7C,KAAWC,EAAAA,aAAY,EAEvB6C,KAAqB3C,EAAAA,aACzB,SAAC4C,EAAgC/B,EAAqB,CACpD,OAAOhB,EAAc,CACnBI,KAAM,+BACNiB,QAAS,CACPC,UAAWN,EACXgC,iBAAkBD,CACpB,CACF,CAAC,CACH,EACA,CAAC/C,CAAQ,CACX,EAEA,OAAO8C,CACT,EAKaG,GAA0B,UAAM,CAC3C,IAAMjD,EAAWC,YAAY,EAEvBiD,EAAuB/C,YAC3B,SAACkB,EAAiB,CAChB,OAAOrB,EAAc,CACnBI,KAAM,iCACNiB,QAAAA,CACF,CAAC,CACH,EACA,CAACrB,CAAQ,CACX,EAEA,OAAOkD,CACT,EAIaC,GAAiB,SAACnC,EAAqB,CAClD,IAAMhB,KAAWC,EAAAA,aAAY,EAEvBmD,KAAcjD,EAAAA,aAAY,UAAM,CACpC,OAAOH,EAAc,CACnBI,KAAM,wBACNiB,QAAS,CAAEL,SAAAA,CAAS,CACtB,CAAC,CACH,EAAG,CAAChB,EAAUgB,CAAQ,CAAC,EAEvB,OAAOoC,CACT,EAEaC,GAAe,UAAM,CAChC,IAAMrD,KAAWC,EAAAA,aAAY,EAEvBqD,KAAYnD,EAAAA,aAChB,SAACa,EAAqB,CACpB,OAAOhB,EAAc,CACnBI,KAAM,sBACNiB,QAAS,CAAEL,SAAAA,CAAS,CACtB,CAAC,CACH,EACA,CAAChB,CAAQ,CACX,EAEA,OAAOsD,CACT,EAEaC,GAAqB,UAAM,CACtC,IAAMC,KAAsBjD,EAAAA,aAC1B,SAACC,EAAY,CAAF,OAAKA,EAAMC,UAAU+C,SAAS,CAC3C,EAEA,OAAOA,CACT,EAEaC,EAAiB,UAAM,CAClC,IAAMzD,KAAWC,EAAAA,aAAY,EAEvByD,KAAcvD,EAAAA,aAClB,SAACkB,EAAsE,CACrE,OAAOrB,EAAc,CACnBI,KAAM,wBACNiB,QAASA,CACX,CAAC,CACH,EACA,CAACrB,CAAQ,CACX,EAEA,OAAO0D,CACT,EAEaC,EAAgB,UAAM,CACjC,IAAM3D,KAAWC,EAAAA,aAAY,EAEvB2D,KAAazD,EAAAA,aACjB,SAACkB,EAAiB,CAChB,OAAOrB,EAAc,CACnBI,KAAM,qBACNiB,QAAAA,CACF,CAAC,CACH,EACA,CAACrB,CAAQ,CACX,EAEA,OAAO4D,CACT,EAEaC,EAAiB,UAAM,CAClC,IAAMC,KAAgBvD,EAAAA,aAAY,SAACC,EAAY,CAAF,OAAKA,EAAMC,UAAUqD,KAAK,GAEvE,OAAOA,CACT,EAMaC,EAA8B,UAAM,CAC/C,IAAM/D,KAAWC,EAAAA,aAAY,EAEvB+D,KAA2B7D,EAAAA,aAC/B,SAAC8D,EAAoB,CACnB,OAAOjE,EAAc,CACnBI,KAAM,uCACNiB,QAAS,CAAE4C,OAAAA,CAAO,CACpB,CAAC,CACH,EACA,CAACjE,CAAQ,CACX,EAEA,OAAOgE,CACT,EAEaE,EAA6B,UAAM,CAC9C,IAAMlE,KAAWC,EAAAA,aAAY,EAEvBkE,KAA0BhE,EAAAA,aAC9B,SAAC4B,EAA2B,CAC1B,OAAO/B,EAAc,CACnBI,KAAM,oCACNiB,QAASU,CACX,CAAC,CACH,EACA,CAAC/B,CAAQ,CACX,EAEA,OAAOmE,CACT,C,0ZCvRaC,EAAqB,UAAc,CAC9C,IAAAC,KAAuBC,EAAAA,iBAAgB,EAACC,EAAAC,EAAAA,EAAAH,EAAA,GAAjCI,EAAYF,EAAA,GACbG,EAAkBD,EAAaE,IAAI,IAAI,EAE7C,OAAOD,GAAmB,EAC5B,EAEaE,EAAwB,UAEhC,CACH,IAAM5E,KAAWC,EAAAA,aAAY,EACvByE,EAAkBN,EAAmB,EACrCS,KAAoBC,EAAAA,IAAqB,EAEzCxC,EAAiB,SAACyC,EAAoB,CAAF,OAAK,UAAM,CACnD,OAAO/E,EAAS,CACdI,KAAM,sBACNiB,QAAS,CACP2D,OAAQD,EACRE,MAAOP,CACT,CACF,CAAC,CACH,CAAC,EAEKQ,EAAe,SAACH,EAAwC,CAC5D,OAAOF,EAAkB,CAAEM,KAAM7C,EAAeyC,CAAU,CAAE,CAAC,CAC/D,EAEA,MAAO,CACLzC,eAAgB4C,CAClB,CACF,EAEaE,EAA0B,UAAM,CAC3C,IAAMpF,KAAWC,EAAAA,aAAY,EAC7BoF,KAAwBC,EAAAA,IAA4B,EAA5CC,EAAWF,EAAXE,YAEFC,KAAuBrF,EAAAA,aAC3B,SAACoF,EAAwB,CACvBvF,EAAS,CACPI,KAAM,oCACNiB,QAAS,CAAE4D,MAAOM,CAAY,CAChC,CAAC,CACH,EACA,CAACvF,CAAQ,CACX,EAEAyF,SAAAA,EAAAA,WAAU,UAAM,CACdD,EAAqBD,CAAW,CAClC,EAAG,CAACC,EAAsBD,CAAW,CAAC,EAE/BC,CACT,EAEaE,EAA2B,UAAM,CAC5C,IAAMC,EAAwBpF,YAC5B,SAACC,EAAY,CAAF,OAAKA,EAAMoF,eAAeD,SAAS,CAChD,EAEA,OAAOA,CACT,EAEaE,EAA8B,UAAM,KAAAC,EAAAC,EACzCnG,EAAO8F,EAAyB,EAEtC,MAAO,CACLM,iBAAeF,EAAElG,GAAI,YAAJA,EAAMqG,aAAS,MAAAH,IAAA,OAAAA,EAAI,GACpCI,cAAYH,EAAEnG,GAAI,YAAJA,EAAMuG,iBAAa,MAAAJ,IAAA,OAAAA,EAAI,EACvC,CACF,EAEaK,GAAsB,UAE9B,CACH,IAAMpG,KAAWC,EAAAA,aAAY,EACvB4E,KAAoBC,EAAAA,IAAqB,EAEzCuB,KAAclG,EAAAA,aAClB,SAACmG,EAAoBvB,EAAoB,CAAF,OAAK,UAAM,CAChD,OAAO/E,EAAS,CACdI,KAAM,sBACNiB,QAAS,CACPkF,UAAWD,EACXtB,OAAQD,CACV,CACF,CAAC,CACH,CAAC,EACD,CAAC/E,CAAQ,CACX,EAEMwG,KAAgBrG,EAAAA,aACpB,SAACmG,EAAoBvB,EAAwC,CAC3D,OAAOF,EAAkB,CAAEM,KAAMkB,EAAYC,EAAUvB,CAAU,CAAE,CAAC,CACtE,EACA,CAACsB,EAAaxB,CAAiB,CACjC,EAEA,MAAO,CACLwB,YAAaG,CACf,CACF,EAEaC,EAAqC,UAAM,CACtD,IAAMzG,KAAWC,EAAAA,aAAY,EACvByE,EAAkBN,EAAmB,EAErCsC,KAAkCvG,EAAAA,aAAY,UAAM,CACxDH,EAAS,CACPI,KAAM,sBACNiB,QAAS,CACP4D,MAAOP,CACT,CACF,CAAC,CACH,EAAG,CAAC1E,EAAU0E,CAAe,CAAC,KAE9Be,EAAAA,WAAU,UAAM,CACdiB,EAAgC,CAClC,EAAG,CAACA,CAA+B,CAAC,CACtC,EAEaC,GAAyB,UAAM,CAC1C,IAAMf,KAAiBrF,EAAAA,aAAY,SAACC,EAAO,CAAF,OAAKA,EAAMoF,cAAc,GAClEgB,EAAsBhB,EAAdiB,KAAAA,EAAID,IAAA,OAAG,CAAC,EAACA,EACjB,OAAOC,CACT,EAEaC,GAAwB,UAEhC,KADHC,EAAwCrF,UAAAO,OAAA,GAAAP,UAAA,KAAAvD,OAAAuD,UAAA,GAAG,GAErC1B,KAAWC,EAAAA,aAAY,EACvB+G,KAAUC,EAAAA,GAA8B,iBAAkB,CAAC,SAAS,CAAC,EAErErB,KAAiBrF,EAAAA,aAAY,SAACC,GAAO,CAAF,OAAKA,GAAMoF,cAAc,GAClEsB,EAAsBtB,EAAdiB,KAAAA,EAAIK,IAAA,OAAG,CAAC,EAACA,EACXxI,KAAqByI,EAAAA,SAAQ,UAAM,CACvC,OAAOJ,EACHF,EAAKO,OAAO,SAACC,GAAe,CAAF,OAAKA,GAAEC,UAAY,CAAC,GAC9CT,CACN,EAAG,CAACA,EAAME,CAA+B,CAAC,EAEpCQ,MAAYpH,EAAAA,aAAY,UAAM,CAClCH,EAAS,CACPI,KAAM,wBACR,CAAC,CACH,EAAG,CAACJ,CAAQ,CAAC,EAEbyF,SAAAA,EAAAA,WAAU,UAAM,CACd8B,GAAU,CACZ,EAAG,CAACA,EAAS,CAAC,EAEP,CAAE7I,KAAAA,EAAMsI,QAAAA,EAASO,UAAAA,EAAU,CACpC,EAEaC,GAA0B,UAAM,CAC3C,IAAMC,KAAyClH,EAAAA,aAC7C,SAACC,EAAY,CAAF,OAAKA,EAAMkH,QAAQD,cAAc,CAC9C,EAEA,OAAOA,CACT,EAEaE,GAAyB,SAACC,EAA2B,CAChE,IAAM5H,EAAWC,YAAY,EACvBwH,EAAiBD,GAAwB,EAEzCK,EAAsB1H,YAC1B,SAACyH,EAA0B,CACzB5H,EAAS,CACPI,KAAM,oCACNiB,QAAS,CAAEyG,QAASF,EAAOG,KAAK,GAAG,CAAE,CACvC,CAAC,CACH,EACA,CAAC/H,CAAQ,CACX,EAEAyF,iBAAU,UAAM,CACVmC,GACFC,EAAoBD,CAAM,CAE9B,EAAG,CAACA,EAAQC,CAAmB,CAAC,EAEzB,CAAEJ,eAAAA,EAAgBI,oBAAAA,CAAoB,CAC/C,EAIaG,EAAqB,UAAM,CACtC,IAAMhI,KAAWC,EAAAA,aAAY,EAEvBgI,KAA6B9H,EAAAA,aACjC,SAACkB,EAAiB,CAChBrB,EAAS,CACPI,KAAM,mBACNiB,QAAAA,CACF,CAAC,CACH,EACA,CAACrB,CAAQ,CACX,EAEA,OAAOiI,CACT,EAEaC,EAA4B,UAAM,CAC7C,IAAMC,KAA+B5H,EAAAA,aACnC,SAACC,EAAY,CAAF,OAAKA,EAAM4H,QAAQD,gBAAgB,CAChD,EACA,OAAOA,CACT,EAKaE,EAAwB,UAAM,CACzC,IAAMrI,KAAWC,EAAAA,aAAY,EACvByE,EAAkBN,EAAmB,EAErCkE,KAAYnI,EAAAA,aAChB,SAACoI,EAAgB,CACfvI,EAAS,CACPI,KAAM,iCACNiB,QAAOjE,EAAAA,EAAAA,EAAAA,EAAA,GACFmL,CAAM,MACTtD,MAAOP,CAAe,EAE1B,CAAC,CACH,EACA,CAAC1E,EAAU0E,CAAe,CAC5B,EAEA,OAAO4D,CACT,C,ugCCpLaE,EAAyB,UAAM,CAC1C,IAAMC,KAAyBlI,EAAAA,aAC7B,SAACC,EAAY,CAAF,OAAKA,EAAMC,UAAUgI,aAAa,CAC/C,EAEA,OAAOA,CACT,EAEaC,EAAwB,SACnC1H,EACA2H,EACY,CACZ,IAAMF,EAAyBD,EAAuB,EAChDpG,KAAcD,EAAAA,IAAe,EAEnCsD,SAAAA,EAAAA,WAAU,UAAM,CACVzE,GAAY2H,GACdvG,EAAYpB,CAAQ,CAExB,EAAG,CAACA,EAAUoB,EAAauG,CAAO,CAAC,EAE5BF,CACT,EAEaG,EAAsB,UAAM,CACvC,IAAM5I,EAAWC,YAAY,EAEvBwI,EAAyBlI,YAC7B,SAACC,EAAY,CAAF,OAAKA,EAAMC,UAAUgI,aAAa,CAC/C,EAEMI,EAAmB1I,YACvB,SAACa,EAAqB,CACpBhB,EAAS,CACPI,KAAM,6BACNiB,QAAS,CAAEvE,GAAIkE,CAAS,CAC1B,CAAC,CACH,EACA,CAAChB,CAAQ,CACX,EAEA,MAAO,CAAEyI,cAAAA,EAAeI,iBAAAA,CAAiB,CAC3C,EAEaC,EAAwB,UAAM,CACzC,IAAM9I,EAAWC,YAAY,EAEvB8I,EAAqB5I,YAAY,UAAM,CAC3CH,EAAS,CACPI,KAAM,6BACNiB,QAAS,CAAC,CACZ,CAAC,CACH,EAAG,CAACrB,CAAQ,CAAC,EAEb,MAAO,CAAE+I,mBAAAA,CAAmB,CAC9B,EAEaC,GAAkC,UAA+B,CAC5E,IAAMP,KAAyBlI,EAAAA,aAC7B,SAACC,EAAY,CAAF,OAAKA,EAAMC,UAAUgI,aAAa,CAC/C,EAEMQ,KAA2C9B,EAAAA,SAAQ,UAAM,KAAA+B,EAAAC,EACvDC,GAAUF,EAAGT,GAAa,OAAAU,EAAbV,EAAeY,iBAAa,MAAAF,IAAA,cAA5BA,EAA8BC,cAAU,MAAAF,IAAA,OAAAA,EAAI,CAAC,EAChE,OAAKT,EAAc3L,GAIZsM,EAAWxK,IAAI,SAACyI,EAAG,CAAF,MAAM,CAC5BxI,OAAKyK,EAAAA,GAAK,EACVC,SAAUlC,EAAExI,IACZ2K,SAAUnC,EAAEmC,QACd,CAAC,CAAC,EANO,CAAC,CAAE3K,OAAKyK,EAAAA,GAAK,EAAGC,SAAU,YAAaC,SAAU,EAAM,CAAC,CAOnE,EAAG,CAACf,CAAa,CAAC,EAElB,OAAOQ,CACT,EAEaQ,GAAkB,UAAM,CACnC,IAAM5E,KAAoBC,EAAAA,IAAqB,EAEzCxC,KAAiBD,EAAAA,IAAgB,EAEjCqH,EAAiB,SAACnH,EAA6B,CACnDsC,EAAkB,CAAEM,KAAM,kBAAM7C,EAAeC,CAAS,CAAC,CAAC,CAAC,CAC7D,EAEA,MAAO,CAAEmH,eAAAA,CAAe,CAC1B,EAEaC,GAAyB,UAAM,CAC1C,IAAAtF,KAAiCC,EAAAA,iBAAgB,EAACC,EAAAC,EAAAA,EAAAH,EAAA,GAA3CuF,EAAsBrF,EAAA,GAE7B,MAAO,CACLvD,SAAU4I,EAAuBjF,IAAIkF,EAAAA,GAAiBC,QAAQ,GAAK,GACnE/H,eACE6H,EAAuBjF,IAAIkF,EAAAA,GAAiBE,cAAc,GAAK,EACnE,CACF,EAEaC,GAA4B,UAAM,CAC7C,IAAMhK,EAAWC,YAAY,EAEvBgK,EAAyB9J,YAC7B,SAAC+J,EAA6C,CAC5ClK,EAAS,CACPI,KAAM,mCACNiB,QAAS6I,CACX,CAAC,CACH,EACA,CAAClK,CAAQ,CACX,EAEA,OAAOiK,CACT,EAEaE,GAAqB,UAAM,CACtC,IAAAC,KAAkD9F,EAAAA,iBAAgB,EAAC+F,EAAA7F,EAAAA,EAAA4F,EAAA,GAA5DR,EAAsBS,EAAA,GAAEC,EAAeD,EAAA,GAExCE,KAAsCpD,EAAAA,SAAQ,UAAM,CACxD,OAAO,IAAIqD,eACb,EAAG,CAAC,CAAC,EAECC,KAAoBtK,EAAAA,aACxB,SAACa,EAAqB,CACpBuJ,EAAmBG,IAAIb,EAAAA,GAAiBC,SAAU9I,CAAQ,EAK1DsJ,EAAgBC,CAAkB,CACpC,EACA,CAACA,EAAoBD,CAAe,CACtC,EAEA,MAAO,CAAEG,kBAAAA,CAAkB,CAC7B,EAEaE,GAA8B,UAAM,CAC/C,IAAMzK,KAAkBH,EAAAA,IAAmB,EACrCO,KAAaD,EAAAA,IAAoB,EAEvCuK,EAA8BT,GAAmB,EAAzCM,EAAiBG,EAAjBH,kBAEFlD,KAAYpH,EAAAA,aAAWS,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAAC,SAAAC,GAAA,KAAA8F,EAAA,OAAAhG,EAAAA,EAAA,EAAAI,KAAA,SAAAC,EAAA,eAAAA,EAAAC,KAAAD,EAAAE,KAAA,QAAAF,OAAAA,EAAAE,KAAA,EACTlB,EAAgB,EAAC,OAA9B2G,EAAI3F,EAAA2J,KACNhE,EAAKiE,UAAY,GAAKjE,EAAKA,KAAK5E,OAAS,GAC3CwI,EAAkB5D,EAAKA,KAAK,CAAC,EAAE/J,EAAE,EAClC,wBAAAoE,EAAAK,KAAA,IAAAR,CAAA,EACF,GAAE,CAACb,EAAiBuK,CAAiB,CAAC,EAEvChF,SAAAA,EAAAA,WAAU,UAAM,CACd8B,EAAU,CACZ,EAAG,CAACA,CAAS,CAAC,EAEPjH,CACT,EAEayK,GAAqB,UAAM,CACtC,IAAAC,KAAkCC,EAAAA,UAAiB,EAAE,EAACC,EAAA1G,EAAAA,EAAAwG,EAAA,GAA/CG,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAExBG,EAAkB,SAACvO,EAAe,CACtCsO,EAAatO,CAAE,CACjB,EAEMwO,EAAkB,UAAM,CAC5BF,EAAa,EAAE,CACjB,EAEA,MAAO,CACLD,UAAAA,EACAE,gBAAAA,EACAC,gBAAAA,CACF,CACF,EAEaC,GAAgB,UAAM,CACjC,IAAAC,KAA4BP,EAAAA,UAAkB,CAAC,CAAY,EAACQ,EAAAjH,EAAAA,EAAAgH,EAAA,GAArDE,EAAMD,EAAA,GAAE7I,EAAS6I,EAAA,GAClBrJ,KAAcD,EAAAA,IAAe,EAC7BwJ,KAAehJ,EAAAA,IAAa,EAC5BqE,KAAUC,EAAAA,GAA8B,YAAa,CAAC,WAAW,CAAC,EAExE2E,KAIIC,EAAAA,IAAiB,EAHVC,EAAiBF,EAA1BjD,QACWoD,EAAmBH,EAA9BI,UACWC,EAAmBL,EAA9BM,UAGIC,KAAiBhM,EAAAA,aAAW,eAAAiM,EAAAxL,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAChC,SAAAuL,EAAOX,EAAiB,CAAF,IAAAY,GAAA,OAAAzL,EAAAA,EAAA,EAAAI,KAAA,SAAAsL,EAAE,CAAF,cAAAA,EAAApL,KAAAoL,EAAAnL,KAAE,CAAF,OAAAmL,OAAAA,EAAAnL,KAAA,EACFuK,EAAaD,CAAM,EAAC,OAAhCY,GAAGC,EAAA1B,KAELyB,KAAQ,GACVP,EAAoB,EACrB,wBAAAQ,EAAAhL,KAAA,IAAA8K,CAAA,EACF,mBAAA7K,EAAA,QAAA4K,EAAA3K,MAAA,KAAAC,SAAA,MACD,CAACiK,EAAcI,CAAmB,CACpC,EAEMS,KAA4BrM,EAAAA,aAAW,eAAAsM,EAAA7L,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAC3C,SAAA4L,EAAO1L,EAAmB,CAAF,IAAAsL,GAAA,OAAAzL,EAAAA,EAAA,EAAAI,KAAA,SAAA0L,EAAE,CAAF,cAAAA,EAAAxL,KAAAwL,EAAAvL,KAAE,CAAF,WAClBJ,EAAU,CAAF2L,EAAAvL,KAAA,QAAAuL,OAAAA,EAAAvL,KAAA,EACQgB,EAAYpB,EAAU,EAAK,EAAC,OAAxCsL,GAAGK,EAAA9B,KACLyB,GAAIxB,UAAY,GAClBlI,EAAU0J,GAAIzF,IAAI,EACnB,OAEHoF,EAAoB,EAAE,wBAAAU,EAAApL,KAAA,IAAAmL,CAAA,EACvB,mBAAAE,EAAA,QAAAH,EAAAhL,MAAA,KAAAC,SAAA,MACD,CAACuK,EAAqB7J,CAAW,CACnC,EAEMyK,KAAc1M,EAAAA,aAAY,UAAM,CACpCyC,EAAU,CAAC,CAAY,CACzB,EAAG,CAAC,CAAC,EAEL,MAAO,CACLkK,qBAAsB9F,EACtB+F,cAAerB,EACfS,eAAAA,EACAL,kBAAAA,EACAC,oBAAAA,EACAE,oBAAqBO,EACrBK,YAAAA,CACF,CACF,EAIaG,EAAkC,UAAM,CACnD,IAAMpL,KAAmBD,EAAAA,IAA0B,EACnDsL,EAAqBtD,GAAuB,EAApC3I,EAAQiM,EAARjM,SACFL,KAAwBD,EAAAA,IAAyB,EAEvD+E,SAAAA,EAAAA,WAAU,UAAM,CACd9E,EAAsBK,CAAQ,CAChC,EAAG,CAACL,EAAuBK,CAAQ,CAAC,EAE7BY,CACT,EAEasL,EAAmC,UAAM,KAAAC,EAAAC,EACpDC,KAAwBpC,EAAAA,UAA+B,CAAC,CAAC,EAACqC,EAAA9I,EAAAA,EAAA6I,EAAA,GAAnD3O,EAAI4O,EAAA,GAAEC,EAAOD,EAAA,GAChB7M,KAA4BF,EAAAA,aAAY,SAACC,EAAY,CAAF,OAAKA,EAAMC,SAAS,GACnEmB,EAAoCnB,EAApCmB,iBAAkB6G,EAAkBhI,EAAlBgI,cAC1B+E,EAAqB7D,GAAuB,EAApC3I,EAAQwM,EAARxM,SACFyM,GAAQN,EAAG1E,GAAa,OAAA2E,EAAb3E,EAAeY,iBAAa,MAAA+D,IAAA,cAA5BA,EAA8BK,YAAQ,MAAAN,IAAA,OAAAA,EAAI,GAErDO,KAA2BvN,EAAAA,aAAY,UAAM,CACjDoN,EAAQ,SAACI,EAAQ,CACf,GAAI3M,EAAU,CACZ,IAAM4M,EAAW,CACf,CACE9Q,GAAI,GACJgC,KAAM,mBACNwC,UAAWN,EACX6M,QAAS,CACP,CACEC,QAASL,EACTM,KAAMC,EAAAA,EAAYC,SACpB,CAAC,CAEL,CAAC,EAAA3Q,OAAA4Q,EAAAA,EACEtM,CAAgB,GAErB,OAAOgM,EAGT,OAAOD,CACT,CAAC,CACH,EAAG,CAAC/L,EAAkBZ,EAAUyM,CAAQ,CAAC,EAEzChI,SAAAA,EAAAA,WAAU,UAAM,CACdiI,EAAyB,CAC3B,EAAG,CAACA,CAAwB,CAAC,EAEtB,CAAEhP,KAAAA,EAAMgP,yBAAAA,CAAyB,CAC1C,EAEaS,EAA2B,UAAM,CAC5C,IAAAC,KAAkD9J,EAAAA,iBAAgB,EAAC+J,EAAA7J,EAAAA,EAAA4J,EAAA,GAA5DxE,EAAsByE,EAAA,GAAE/D,EAAe+D,EAAA,GACxC9D,KAAsCpD,EAAAA,SAC1C,kBAAM,IAAIqD,gBAAgBZ,EAAuB0E,SAAS,CAAC,CAAC,EAC5D,CAAC1E,CAAsB,CACzB,EAEM2E,KAA0BpO,EAAAA,aAC9B,SAAC4B,EAA2B,CAC1BwI,EAAmBG,IAAIb,EAAAA,GAAiBE,eAAgBhI,CAAc,EACtEuI,EAAgBC,CAAkB,CACpC,EACA,CAACA,EAAoBD,CAAe,CACtC,EAEA,MAAO,CAAEiE,wBAAAA,CAAwB,CACnC,EAEaC,EAAqB,UAAM,CACtC,IAAAC,EAAqB9E,GAAuB,EAApC3I,EAAQyN,EAARzN,SACF0B,KAAqBD,EAAAA,IAAsB,EAE3CiM,KAAkBvO,EAAAA,aACtB,SAAC0N,EAAoB,CACnB,OAAOnL,EAAmB,CACxBpB,UAAWN,EACXlC,KAAM+O,EACNA,QAAS,CACP,CACEE,KAAMC,EAAAA,EAAYC,UAClBH,QAASD,CACX,CAAC,CAEL,CAAC,CACH,EACA,CAACnL,EAAoB1B,CAAQ,CAC/B,EAEA,MAAO,CAAE0N,gBAAAA,CAAgB,CAC3B,EAEaC,EAA+B,UAAM,CAChD,IAAAC,KACE3D,EAAAA,UAA8B,CAAC,CAAwB,EAAC4D,EAAArK,EAAAA,EAAAoK,EAAA,GADnD1E,EAAmB2E,EAAA,GAAE5E,EAAsB4E,EAAA,GAG5CC,KAAoCvO,EAAAA,aACxC,SAACC,EAAY,CAAF,OAAKA,EAAMC,UAAUyJ,mBAAmB,CACrD,EACMwB,EAASlD,EAAuB,EACtCuG,EAAqCpF,GAAuB,EAApD5H,EAAcgN,EAAdhN,eAAgBf,EAAQ+N,EAAR/N,SAElBgO,KAAwB7O,EAAAA,aAC5B,SAAC0N,EAAyC,KAAxBoB,EAAcvN,UAAAO,OAAA,GAAAP,UAAA,KAAAvD,OAAAuD,UAAA,GAAG,GACjCuI,EAAuB,SAAC0D,EAAQ,CAC9B,OAAAvQ,EAAAA,EAAAA,EAAAA,EAAA,GACKuQ,CAAG,MACNE,QAAS,CAAC,EAAHvQ,OAAA4Q,EAAAA,EACFP,EAAIE,OAAO,GACd,CACEE,KAAMC,EAAAA,EAAYkB,KAClBpB,QAASD,EACT/Q,MAAIwM,EAAAA,GAAK,CACX,EACA,CACEyE,KAAMC,EAAAA,EAAYC,UAClBH,QAASmB,EACTnS,MAAIwM,EAAAA,GAAK,EACT6F,UAAW,CAAC,CACd,CAAC,EACF,EAEL,CAAC,CACH,EACA,CAAC,CACH,EAEMC,KAAkBjP,EAAAA,aAAY,SAAC8O,EAAoB,CACvDhF,EAAuB,SAAC0D,EAAQ,KAAA0B,EACxBC,GAAaD,EAAG1B,EAAIE,WAAO,MAAAwB,IAAA,cAAXA,EAAaE,GAAG,EAAE,EAExC,OAAID,EACFlS,EAAAA,EAAAA,EAAAA,EAAA,GACKuQ,CAAG,MACNE,QAAS,CAAC,EAAHvQ,OAAA4Q,EAAAA,EACFP,EAAIE,QAAQ2B,MAAM,EAAG,EAAE,CAAC,GAAApS,EAAAA,EAAAA,EAAAA,EAAA,GAEtBkS,CAAa,MAChBxB,QAASmB,EAAOA,OAChBE,UAAWF,EAAOE,SAAS,IAE9B,GAGExB,CACT,CAAC,CACH,EAAG,CAAC,CAAC,EAEC8B,KAAsBtP,EAAAA,aAAY,UAAM,CAC5Cf,QAAQsQ,KAAK,qBAAqB,EAClCzF,EAAuB,SAAC0D,EAAQ,KAAAgC,EAAAC,EACxBC,GAAYF,GAAAC,EAAGjC,EAAIE,WAAO,MAAA+B,IAAA,cAAXA,EAAaJ,MAAM,EAAG,EAAE,KAAC,MAAAG,IAAA,OAAAA,EAAI,CAAC,EACnD,OAAAvS,EAAAA,EAAAA,EAAAA,EAAA,GACKuQ,CAAG,MACNE,QAASgC,CAAY,EAEzB,CAAC,CACH,EAAG,CAAC,CAAC,EAECC,KAAc3P,EAAAA,aAAY,UAAM,CACpC,GAAIa,IAAa,IAAMe,IAAmB,GAAI,KAAAgO,EACtCtC,GAAQsC,EAAGrE,EAAOrC,iBAAa,MAAA0G,IAAA,cAApBA,EAAsBtC,SAEjCuC,EAAc,CAClBjC,KAAMC,EAAAA,EAAYC,UAClBH,QAASL,EACT3Q,MAAIwM,EAAAA,GAAK,CACX,EAEAW,EAAuB,CACrBnN,GAAI,GACJwE,UAAWN,EACXmO,UAAW,CAAC,EACZtB,QAAS,CAACmC,CAAW,CACvB,CAAQ,EAEZ,EAAG,CAACjO,EAAgB2J,EAAQ1K,CAAQ,CAAC,EAErCyE,SAAAA,EAAAA,WAAU,UAAM,CACdqK,EAAY,CACd,EAAG,CAACA,CAAW,CAAC,KAEhBrK,EAAAA,WAAU,UAAM,CACV1D,GACFkI,EAAuB6E,CAAY,CAEvC,EAAG,CAACA,EAAc/M,CAAc,CAAC,EAE1B,CACLmI,oBAAAA,EACA8E,sBAAAA,EACAS,oBAAAA,EACAL,gBAAAA,CACF,CACF,EAEaa,GAAoB,SAAC/F,EAA6C,CAC7E,IAAMgG,KAAMC,EAAAA,QAAuB,IAAI,EAEjCC,KAAiBjQ,EAAAA,aAAY,UAAM,CAEvC,GADAf,QAAQsQ,KAAK,mBAAmB,EAC5BxF,EAAoBpN,GAAI,KAAAuT,GAC1BA,EAAAH,EAAII,WAAO,MAAAD,IAAA,QAAXA,EAAaE,eAAe,CAAEC,SAAU,SAAU,CAAC,EAEvD,EAAG,CAACtG,CAAmB,CAAC,EAExBzE,SAAAA,EAAAA,WAAU,UAAM,CACd2K,EAAe,CACjB,EAAG,CAACA,CAAc,CAAC,EAEZF,CACT,EAEaO,GAA8B,UAAM,CAC/C,IAAAC,EAA2B/G,GAAuB,EAA1C5H,EAAc2O,EAAd3O,eACFD,KAAoBD,EAAAA,IAAqB,EAC/C8O,EAKIhC,EAA6B,EAJ/BzE,EAAmByG,EAAnBzG,oBACA8E,EAAqB2B,EAArB3B,sBACAS,EAAmBkB,EAAnBlB,oBACAL,EAAeuB,EAAfvB,gBAEIc,EAAMD,GAAkB/F,CAAmB,EAE3C0G,KAA2BzQ,EAAAA,aAAY,UAAM,IAC7C0Q,EAAAA,IAAsB9O,CAAc,GACtCD,EAAkBC,CAAc,CAEpC,EAAG,CAACD,EAAmBC,CAAc,CAAC,EAEtC0D,SAAAA,EAAAA,WAAU,UAAM,CACdmL,EAAyB,CAC3B,EAAG,CAACA,CAAwB,CAAC,EAEtB,CACL1G,oBAAAA,EACA8E,sBAAAA,EACAkB,IAAAA,EACAT,oBAAAA,EACAL,gBAAAA,CACF,CACF,EAEa0B,GAA8B,UAAM,CAC/C,IAAAC,KAA0B9F,EAAAA,UAAS,EAAE,EAAC+F,EAAAxM,EAAAA,EAAAuM,EAAA,GAA/B/R,EAAKgS,EAAA,GAAEC,EAAQD,EAAA,GAEhBE,EAA0D,SAAChT,EAAM,CACrE,IAAMc,EAAQd,EAAEF,OAAOgB,MACjBmS,EAAYnS,EAAMoS,WAAW,MAAO;AAAA,CAAI,EAAEA,WAAW,MAAO,GAAI,EACtEH,EAASE,CAAS,CACpB,EAEA,MAAO,CACLD,kBAAAA,EACAlS,MAAAA,EACAiS,SAAAA,CACF,CACF,EAEaI,GAAiB,SAC5BvC,EACAE,EACAS,EACAL,EACG,CACH,IAAAkC,EAA4B9C,EAAmB,EAAvCE,EAAe4C,EAAf5C,gBACR6C,EAA2B5H,GAAuB,EAA1C5H,EAAcwP,EAAdxP,eACRyP,EAA+CV,GAA4B,EAAnEI,EAAiBM,EAAjBN,kBAAmBlS,EAAKwS,EAALxS,MAAOiS,EAAQO,EAARP,SAE5BnP,KAAoBD,EAAAA,IAAqB,EAE/C4P,EAAoCtD,EAAyB,EAArDI,EAAuBkD,EAAvBlD,wBACRmD,KAA+BC,GAAAA,IAAsB,EAA7CC,EAAIF,EAAJE,KAAM3C,GAAMyC,EAANzC,OAAQ4C,EAAIH,EAAJG,KAEhBC,KAAc3R,EAAAA,aAAW,eAAA4R,GAAAnR,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAC7B,SAAAkR,GAAOnE,GAAiB/Q,GAAa,CAAF,IAAAmV,GAAAC,GAAA,OAAArR,EAAAA,EAAA,EAAAI,KAAA,SAAAkR,GAAE,CAAF,cAAAA,GAAAhR,KAAAgR,GAAA/Q,KAAE,CAAF,OAAA+Q,OAAAA,GAAA/Q,KAAA,EACLwQ,EAAK,CAC/B1P,gBAAiBpF,IAAE,KAAFA,GAAMiF,EACvBqQ,SAAU,CAAC,EAAH9U,OAAA4Q,EAAAA,IACH+D,GAACnD,GAAY,YAAZA,EAAcjB,WAAO,MAAAoE,KAAA,OAAAA,GAAI,CAAC,GAAGrT,IAAI,SAACyI,GAAa,CAAF,OAAKgL,EAAAA,EAAKhL,GAAG,IAAI,CAAC,EAAC,GACpE,CACE0G,KAAMC,EAAAA,EAAYkB,KAClBpB,QAASD,EACX,CAAC,EAEL,CAAC,EAAC,OATIqE,GAAaC,GAAAtH,KAWfqH,GAAII,SAAW,IACbxV,IACFsC,QAAQsQ,KAAK,KAAK,EAElBnB,EAAwBzR,EAAE,GAE1BsC,QAAQsQ,KAAK,KAAK,GAIpBtQ,QAAQsQ,KAAK,KAAK,EAGlBuB,EAASpD,EAAO,EAChBzO,QAAQsQ,KAAK,wBAAwB,EACrCD,EAAoB,GAEtBrQ,QAAQsQ,KAAK,OAAO,EAAE,wBAAAyC,GAAA5Q,KAAA,IAAAyQ,EAAA,EACvB,mBAAAO,GAAAC,GAAA,QAAAT,GAAAtQ,MAAA,KAAAC,SAAA,MACD,CACEoN,GAAY,YAAZA,EAAcjB,QACd9L,EAEAwM,EACAkB,EACAwB,EACAW,CAAI,CAER,EAEMa,MAAoBtS,EAAAA,aAAW,eAAAuS,GAAA9R,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KACnC,SAAA6R,GAAO9E,GAAiB,CAAF,IAAAhH,GAAA/J,GAAA,OAAA+D,EAAAA,EAAA,EAAAI,KAAA,SAAA2R,GAAE,CAAF,cAAAA,GAAAzR,KAAAyR,GAAAxR,KAAE,CAAF,UAChBW,IAAmB,GAAE,CAAA6Q,GAAAxR,KAAA,QACvB0Q,EAAYjE,EAAO,EAAE+E,GAAAxR,KAAA,eAAAwR,OAAAA,GAAAxR,KAAA,EAEFsN,EAAgBb,EAAO,EAAC,OAArChH,GAAI+L,GAAA/H,KACNhE,GAAKiE,UAAY,IACbhO,GAAK+J,GAAKA,KAAK/J,GACrBgV,EAAYjE,GAAS/Q,EAAE,GACxB,wBAAA8V,GAAArR,KAAA,IAAAoR,EAAA,EAEJ,mBAAAE,GAAA,QAAAH,GAAAjR,MAAA,KAAAC,SAAA,MACD,CAACK,EAAgB2M,EAAiBoD,CAAW,CAC/C,KAEArM,EAAAA,WAAU,UAAM,CACVwJ,GAAOA,SACTG,EAAgBH,EAAM,EACtB7P,QAAQsQ,KAAK,OAAO,EACpBtQ,QAAQsQ,KAAK,YAAaT,GAAOA,MAAM,EAE3C,EAAG,CAACA,GAAQG,CAAe,CAAC,EAE5B,IAAM0D,MAAmB3S,EAAAA,aAAY,UAAM,CACrC0R,IACFZ,EAAS,EAAE,EACXwB,GAAkBzT,EAAM+T,KAAK,CAAC,GAEhC/D,EAAsBhQ,CAAK,CAC7B,EAAG,CAACgQ,EAAuByD,GAAmBZ,EAAMZ,EAAUjS,CAAK,CAAC,EAEpE,MAAO,CACL8T,iBAAAA,GACA5B,kBAAAA,EACAlS,MAAAA,EACAgI,QAAS,CAAC6K,CACZ,CACF,EAEamB,GAAiB,UAAM,CAMlC,IAAMC,EAAc,SAACC,EAAqB,CACxC,IAAMC,KAAcC,GAAAA,IAAiBF,CAAQ,EACvCG,EAAWC,EAAAA,GAAYH,CAAG,EAEhC,MAAO,0BAAP7V,OAAiC+V,CAAQ,CAC3C,EAEA,OAAOJ,CACT,EAEaM,GAAwB,UAAM,CACzC,IAAAC,EAAqB7J,GAAuB,EAApC3I,EAAQwS,EAARxS,SACRyS,EAAoCtF,EAAyB,EAArDI,EAAuBkF,EAAvBlF,wBACF1J,KAAoBC,EAAAA,IAAqB,EACzChC,KAAqBD,EAAAA,IAAsB,EAE3C6Q,EAAqB,SAAC3Q,EAAgC,CAAF,OAAAnC,EAAAA,EAAAC,EAAAA,EAAA,EAAAC,KAAK,SAAA6S,GAAA,KAAArH,EAAA,OAAAzL,EAAAA,EAAA,EAAAI,KAAA,SAAA2S,EAAA,eAAAA,EAAAzS,KAAAyS,EAAAxS,KAAA,QAAAwS,OAAAA,EAAAxS,KAAA,EAC3C0B,EAAmBC,EAAiB/B,CAAQ,EAAC,OAAzDsL,OAAAA,EAAGsH,EAAA/I,KACLyB,IAAQ,GACViC,EAAwB,EAAE,EAC3BqF,EAAAC,OAAA,SACMvH,CAAG,0BAAAsH,EAAArS,KAAA,IAAAoS,CAAA,EACX,IAEKG,EAAuB,SAAC/Q,EAAmC,CAC/D8B,EAAkB,CAAEM,KAAMuO,EAAmB3Q,CAAe,CAAE,CAAC,CACjE,EAEA,MAAO,CAAE+Q,qBAAAA,CAAqB,CAChC,EAEaC,GAAwB,UAAM,CACzC,IAAAC,KAAwC/I,EAAAA,UACtC,CAAC,CACH,EAACgJ,EAAAzP,EAAAA,EAAAwP,EAAA,GAFMlF,EAAYmF,EAAA,GAAEvF,EAAeuF,EAAA,GAG9BnS,KAAoBD,EAAAA,IAAqB,EAC/CqS,KAIIrI,EAAAA,IAAiB,EAHVsI,EAAyBD,EAAlCvL,QACWyL,EAA2BF,EAAtClI,UACWqI,EAA2BH,EAAtChI,UAEIxJ,KAAqBD,EAAAA,IAAsB,EAE3C6R,KAAyBnU,EAAAA,aAAW,eAAAoU,EAAA3T,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KACxC,SAAA0T,EAAO1V,EAAc,CAAF,IAAAwN,EAAA,OAAAzL,EAAAA,EAAA,EAAAI,KAAA,SAAAwT,EAAE,CAAF,cAAAA,EAAAtT,KAAAsT,EAAArT,KAAE,CAAF,OAAAqT,OAAAA,EAAArT,KAAA,EACCsB,EAAkBtF,EAAAA,EAAAA,EAAAA,EAAC,CAAC,EACjC0R,CAAY,MACf5M,gBAAiB4M,EAAahS,GAC9BgC,KAAAA,CAAI,EACL,EAAC,OAJIwN,EAAGmI,EAAA5J,KAMLyB,EAAIxB,UAAY,GAClBsJ,EAA4B,EAC7B,wBAAAK,EAAAlT,KAAA,IAAAiT,CAAA,EACF,mBAAAE,EAAA,QAAAH,EAAA9S,MAAA,KAAAC,SAAA,MACD,CAACgB,EAAoBoM,EAAcsF,CAA2B,CAChE,EAEMpN,KAAUC,EAAAA,GAA8B,YAAa,CACzD,iBAAiB,CAClB,EAEK0N,KAAoCxU,EAAAA,aAAW,eAAAyU,EAAAhU,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KACnD,SAAA+T,EAAO9S,EAAwB,CAAF,IAAAuK,EAAA,OAAAzL,EAAAA,EAAA,EAAAI,KAAA,SAAA6T,EAAE,CAAF,cAAAA,EAAA3T,KAAA2T,EAAA1T,KAAE,CAAF,OAAA0T,OAAAA,EAAA1T,KAAA,EACTU,EAAkBC,EAAgB,EAAK,EAAC,OAApDuK,EAAGwI,EAAAjK,KACLyB,EAAIxB,UAAY,GAClB4D,EAAgBpC,EAAIzF,IAAI,EAE1BwN,EAA4B,EAAE,wBAAAS,EAAAvT,KAAA,IAAAsT,CAAA,EAC/B,mBAAAE,EAAA,QAAAH,EAAAnT,MAAA,KAAAC,SAAA,MACD,CAAC2S,EAA6BvS,CAAiB,CACjD,EAEA,MAAO,CACLkT,0BAA2BhO,EAC3BiO,wBAAyBnG,EAAahQ,KACtCwV,uBAAAA,EACAH,0BAAAA,EACAC,4BAAAA,EACAC,4BAA6BM,CAC/B,CACF,EAEaO,GAAiB,UAAM,CAClC,IAAAC,KAA0CtJ,EAAAA,IAAiB,EAAnDlD,EAAOwM,EAAPxM,QAASuD,EAASiJ,EAATjJ,UAAWF,EAASmJ,EAATnJ,UAC5BoJ,KAA0CnK,EAAAA,UAAiB,CAAC,CAAW,EAACoK,EAAA7Q,EAAAA,EAAA4Q,EAAA,GAAjEE,EAAaD,EAAA,GAAEE,EAAgBF,EAAA,GACtCG,KAAoCvK,EAAAA,UAAiB,EAAE,EAACwK,EAAAjR,EAAAA,EAAAgR,EAAA,GAAjDzQ,EAAU0Q,EAAA,GAAEC,EAAaD,EAAA,GAE1BE,KAAsBxV,EAAAA,aAC1B,SAAC4E,EAAoB6Q,EAAkB,CACrC1J,EAAU,EACVqJ,EAAiBK,CAAK,EACtBF,EAAc3Q,CAAU,CAC1B,EACA,CAACmH,CAAS,CACZ,EAEA,MAAO,CACLyJ,oBAAAA,EACAhN,QAAAA,EACAuD,UAAAA,EACAF,UAAAA,EACAsJ,cAAAA,EACAvQ,WAAAA,CACF,CACF,EAEa8Q,GAA6B,UAAM,CAC9C,SAAO5O,EAAAA,GAA8B,YAAa,CAAC,YAAY,CAAC,CAClE,EACa6O,GAAmC,UAAM,CACpD,SAAO7O,EAAAA,GAA8B,YAAa,CAAC,kBAAkB,CAAC,CACxE,EACa8O,GAA+B,UAAM,CAChD,SAAO9O,EAAAA,GAA8B,YAAa,CAAC,iBAAiB,CAAC,CACvE,EAEa+O,GAA2B,UAAM,CAC5C,IAAAC,EAAqCtM,GAAuB,EAApD3I,EAAQiV,EAARjV,SAAUe,EAAckU,EAAdlU,eAElB,OAAOf,IAAa,IAAMe,IAAmB,EAC/C,EAOMmU,GAAS,SAACC,EAAa,CAAF,OAAKA,EAAKC,OAAO,YAAY,CAAC,EAE5CC,GAAuB,SAAC1N,EAAqB,CACxD,IAAM/E,KAAaD,EAAAA,IAAc,EACjC2S,KAAsCrL,EAAAA,UAAqB,CACzDsL,GAAAA,EAAM,EACNA,GAAAA,EAAM,EAAEC,SAAS,EAAG,KAAK,CAAC,CAC3B,EAACC,EAAAjS,EAAAA,EAAA8R,EAAA,GAHKI,EAAWD,EAAA,GAAEE,EAAcF,EAAA,GAKlChR,SAAAA,EAAAA,WAAU,UAAM,CACd,GAAIkD,GAAWiO,MAAMC,QAAQH,CAAW,GAAKA,EAAY,CAAC,EAAG,KAAAI,EAC3DlT,EAAW,CACTmT,SAAUb,GAAOQ,EAAY,CAAC,CAAC,EAC/BM,OAAQd,IAAMY,EAACJ,EAAY,CAAC,KAAC,MAAAI,IAAA,OAAAA,EAAIP,GAAAA,EAAM,CAAC,CAC1C,CAAC,EAEL,EAAG,CAAC3S,EAAY8S,EAAa/N,CAAO,CAAC,EAE9B,CACL+N,YAAAA,EACAC,eAAAA,CACF,CACF,EAEaM,GAAmB,SAACtO,EAAkB3H,EAAqB,CACtE,IAAM0C,KAAcD,EAAAA,IAAe,EAC7BL,KAAcD,EAAAA,IAAenC,CAAQ,EACrCsC,KAAYD,EAAAA,IAAa,EACzBG,KAAYD,EAAAA,IAAmB,EAC/B2T,KAAkBjQ,EAAAA,GAA8B,YAAa,CACjE,aAAa,CACd,EACKkQ,KAAclQ,EAAAA,GAA8B,YAAa,CAAC,MAAM,CAAC,EAEjEpC,KAAoBC,EAAAA,IAAqB,EAEzCsS,EAAgB,SAACC,EAAeC,EAAqB,CACzDzS,EAAkB,CAChBM,KAAM,kBAAMzB,EAAY,CAAE1C,SAAAA,EAAUuW,OAAQ,CAACF,CAAK,EAAGC,SAAAA,CAAS,CAAC,CAAC,CAClE,CAAC,CACH,EAEA7R,SAAAA,EAAAA,WAAU,UAAM,CACVkD,GAAW3H,GACbsC,EAAUtC,CAAQ,CAEtB,EAAG,CAACsC,EAAWtC,EAAU2H,CAAO,CAAC,EAE1B,CACLjF,YAAa0T,EACbhU,YAAAA,EACAI,UAAAA,EACA0T,gBAAAA,EACAC,YAAAA,CACF,CACF,EAMaK,GAA0B,UAAsB,CAC3D,IAAM1T,KAAgBD,EAAAA,IAAe,EA8BrC,OAAO4T,OAAO9Y,KAAKmF,CAAK,EAAE4T,OAAO,SAAC/J,EAAKgK,EAAQ,CAC7C,IAAM/X,EAAOkE,EAAM6T,CAAG,EACtB,OAAI/X,EAAKqC,OAAS,IAChB0L,EAAIgK,CAAG,EAAoB/X,EAAKhB,IAAI,SAACyI,EAAG,CAAF,MAAM,CAC1CuQ,MAAOvQ,EAAE,CAAC,EACVwQ,MAAOxQ,EAAE,CAAC,CACZ,CAAC,CAAC,GAEGsG,CACT,EAAG,CAAC,CAAmB,CACzB,EAEamK,GAAyB,UAAM,CAC1C,IAAAC,EAAoClK,GAAAA,GAAQmK,WAAW,EAACC,EAAAzT,EAAAA,EAAAuT,EAAA,GAAjDG,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,KAAcC,EAAAA,IAAa,MAAM,EAAzBC,EAACF,EAADE,EAEFC,KAAsBpY,EAAAA,aAAY,UAAM,CAC5C+X,EAAW/Y,MAAMmZ,EAAE,YAAY,CAAC,CAClC,EAAG,CAACJ,EAAYI,CAAC,CAAC,EAClB,MAAO,CAAEC,oBAAAA,EAAqBJ,cAAAA,CAAc,CAC9C,EAEMK,GAAkB,SAACnB,EAAkB,CACzC,IAAAoB,EAA2BC,OAAOC,SAA1BC,EAAQH,EAARG,SAAUC,EAAIJ,EAAJI,KAClB,MAAO,GAAPvb,OAAUsb,EAAQ,MAAAtb,OAAKub,EAAI,0BAAAvb,OAAyB+Z,CAAK,CAC3D,EAEMyB,GAAmC,SAAC9X,EAAqB,CAC7D,IAAA+X,EAA+CjB,GAAuB,EAA9DS,EAAmBQ,EAAnBR,oBAAqBJ,EAAaY,EAAbZ,cAEvB7U,KAAYD,EAAAA,IAAa,EACzBG,KAAYD,EAAAA,IAAmB,EAE/B8T,EACJT,MAAMC,QAAQrT,CAAS,GAAKA,EAAUvB,OAAS,EAAIuB,EAAU,CAAC,EAAE6T,MAAQ,GAEpE2B,KAAgB7Y,EAAAA,aAAWS,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAAC,SAAAmY,GAAA,KAAApS,EAAAnI,EAAAwa,EAAA,OAAArY,EAAAA,EAAA,EAAAI,KAAA,SAAAkY,EAAA,eAAAA,EAAAhY,KAAAgY,EAAA/X,KAAA,QAAA+X,OAAAA,EAAA/X,KAAA,EACbkC,EAAUtC,CAAQ,EAAC,OAChB,GADhB6F,EAAIsS,EAAAtO,KACJnM,EAAOmI,EAAKA,KAAI,EAClBA,EAAKiE,UAAY,GAAK8L,MAAMC,QAAQnY,CAAI,GAAKA,EAAKuD,OAAS,GAAC,CAAAkX,EAAA/X,KAAA,eAAA+X,EAAAtF,OAAA,UAAAqF,EACvDxa,EAAK,CAAC,KAAC,MAAAwa,IAAA,cAAPA,EAAS7B,KAAK,SAErBkB,OAAAA,EAAoB,EAAEY,EAAAtF,OAAA,SACf,EAAK,2BAAAsF,EAAA5X,KAAA,IAAA0X,CAAA,EAEf,GAAE,CAACjY,EAAUsC,EAAWiV,CAAmB,CAAC,EAE7C,MAAO,CACLlB,MAAAA,EACAc,cAAAA,EACAa,cAAAA,CACF,CACF,EAEaI,GAAoB,SAACpY,EAAqB,CACrD,IAAAqY,KAIIxN,EAAAA,IAAiB,EAHVyN,EAAYD,EAArB1Q,QACW4Q,EAAcF,EAAzBrN,UACWwN,EAAcH,EAAzBnN,UAGFuN,EACEX,GAAiC9X,CAAQ,EADnCgY,EAAaS,EAAbT,cAAe3B,EAAKoC,EAALpC,MAAOc,EAAasB,EAAbtB,cAGxBuB,KAAuBvZ,EAAAA,aAAWS,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAAC,SAAA6Y,GAAA,KAAAC,EAAA,OAAA/Y,EAAAA,EAAA,EAAAI,KAAA,SAAA4Y,EAAA,eAAAA,EAAA1Y,KAAA0Y,EAAAzY,KAAA,QAAAyY,OAAAA,EAAAzY,KAAA,EACjB4X,EAAc,EAAC,OAA/BY,EAAOC,EAAAhP,KACT+O,GACFJ,EAAe,EAChB,wBAAAK,EAAAtY,KAAA,IAAAoY,CAAA,EACF,GAAE,CAACX,EAAeQ,CAAc,CAAC,EAElC,MAAO,CACLA,eAAgBE,EAChBH,eAAAA,EACAD,aAAAA,EACAQ,WAAYzC,EACZ0C,mBAAoB5B,CACtB,CACF,EAEa6B,GAAiB,SAAChZ,EAAqB,CAClD,IAAAiZ,EACEnB,GAAiC9X,CAAQ,EADnCgY,EAAaiB,EAAbjB,cAAeb,EAAa8B,EAAb9B,cAGjB+B,KAAO/Z,EAAAA,aAAY,SAACmY,EAAc,CACtCI,OAAOwB,KAAK1B,GAAgBF,CAAC,EAAG,QAAQ,CAC1C,EAAG,CAAC,CAAC,EAEC6B,KAAgBha,EAAAA,aAAWS,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAAC,SAAAsZ,GAAA,KAAA/C,EAAA,OAAAxW,EAAAA,EAAA,EAAAI,KAAA,SAAAoZ,EAAA,eAAAA,EAAAlZ,KAAAkZ,EAAAjZ,KAAA,QAAAiZ,OAAAA,EAAAjZ,KAAA,EACZ4X,EAAc,EAAC,OAA7B3B,EAAKgD,EAAAxP,KACPwM,GACF6C,EAAK7C,CAAK,EACX,wBAAAgD,EAAA9Y,KAAA,IAAA6Y,CAAA,EACF,GAAE,CAACpB,EAAekB,CAAI,CAAC,EAExB,MAAO,CACLC,cAAAA,EACAhC,cAAAA,CACF,CACF,C,oSCr8BA,EAAe,CAAC,wBAA0B,kCAAkC,oBAAsB,8BAA8B,sBAAwB,gCAAgC,iBAAmB,2BAA2B,aAAe,uBAAuB,cAAgB,wBAAwB,OAAS,iBAAiB,MAAQ,eAAe,E,6CCgB/VmC,EAAM,kBACNC,EAAS,kBAETC,EAAgB,SAACC,EAAe,CAAF,OAAKC,OAAOD,EAAMjL,MAAM,EAAG,EAAE,CAAC,CAAC,EAE7DmL,EAAkB,SAAH9d,EAQf,KAPJsS,EAAStS,EAATsS,UACAwG,GAAmB9Y,EAAnB8Y,oBACA7H,GAAOjR,EAAPiR,QAMMrG,MAAiBD,EAAAA,IAAwB,EAEzCoT,MAA4Bza,EAAAA,aAChC,SAAC4E,GAAoB6Q,EAAeiF,EAAgB,CAAF,OAAK,UAAM,CACtDA,GAGLlF,GAAoB5Q,GAAY6Q,CAAK,CACvC,CAAC,EACD,CAACD,EAAmB,CACtB,EAEMmF,GAAsB,UAAM,CAChC,OAAO,SAA2BC,EAAW,IAC3CC,GAAAA,IAAaD,EAAM,OAAQ,SAACE,EAAMC,EAAc,CAC9C,IAAMC,EAAiBD,EAAU3L,GAAG,EAAE,EAEpC4L,EAAeC,UAAY,qBAC3BD,EAAeC,UAAY,SAE3BH,EAAK7a,KAAO,UACZ6a,EAAKG,QAAU,oBACfH,EAAKI,WAAa,CAAC,EACnBJ,EAAKvd,SAAW,CAAC,CAAE0C,KAAM,OAAQpB,MAAOic,EAAKjc,KAAM,CAAC,EAExD,CAAC,CACH,CACF,EAEMsc,MAAoBnb,EAAAA,aACxB,SAACob,GAAuB,KAAAC,EAAAC,EAChBC,GAAMF,EAAGrM,GAAS,YAATA,EAAWuM,UAAM,MAAAF,IAAA,OAAAA,EAAI,CAAC,EAC/BG,EAAYD,EAAOH,EAAU,EAC7BK,EAAWzM,GAAS,OAAAsM,EAATtM,EAAW0M,YAAQ,MAAAJ,IAAA,cAAnBA,EAAqB9b,KACpC,SAAC0H,GAAG,CAAF,OAAKA,IAAC,YAADA,GAAGrC,WAAW2W,GAAS,YAATA,EAAW3W,OAAM,CACxC,EACMD,GAAa6W,GAAQ,YAARA,EAAU5W,OACvB8W,GAAgB/W,GAAa0C,GAAe1C,EAAU,EAAI,GAC1DgX,GAAgBhX,MAAaiX,EAAAA,IAAaJ,GAAQ,YAARA,EAAUK,QAAQ,EAAI,GAChEC,GAAUP,GAAS,YAATA,EAAWQ,OAC3B,SACEC,EAAAA,MAACC,EAAAA,EAAI,CAEHC,IAAK,GACLvf,UAAWwf,EAAOC,wBAAwB9e,SAAA,CAEzCwe,OACC/e,EAAAA,KAACsf,EAAAA,EAAO,CACNC,UAAU,OACV5O,WACE3Q,EAAAA,KAACP,EAAAA,EAAK,CACJE,GAAIof,GACJnf,UAAWwf,EAAOI,qBAAsB,CAClC,EACTjf,YAEDP,EAAAA,KAACP,EAAAA,EAAK,CACJE,GAAIof,GACJnf,UAAWwf,EAAOK,mBAAoB,CAChC,CAAC,CACF,KAEXR,EAAAA,MAACS,EAAAA,EAAK,CAACC,UAAW,WAAWpf,SAAA,IAC3BP,EAAAA,KAAA,OACE4f,wBAAyB,CACvBC,OAAQrB,GAAS,YAATA,EAAWsB,mBACrB,EACAlgB,UAAWwf,EAAOW,gBAAiB,CAC/B,EACLnY,OACCqX,EAAAA,MAACC,EAAAA,EAAI,CAACC,IAAK,QAAQ5e,SAAA,CAChBoe,MACC3e,EAAAA,KAAA,OAAKE,IAAKye,GAAete,IAAI,EAAE,CAAE,KAEjCL,EAAAA,KAACmC,EAAAA,EAAO,CACNR,KAAI,aAAAxB,OAAeye,EAAa,EAChCxc,MAAO,EAAG,CACF,KAEZpC,EAAAA,KAACggB,EAAAA,GAAM,CACL/c,KAAK,OACLrD,UAAWwf,EAAOa,aAClBnf,QAAS2c,GACP7V,GACA4W,EACAI,KAAkB,KACpB,EAAEre,SAEDke,GAAQ,YAARA,EAAUK,QAAQ,CACb,CAAC,EACL,CACP,EACI,CAAC,GAlDHN,GAAS,YAATA,EAAW0B,QAmDZ,CAEV,EACA,CAAClO,EAAW1H,GAAgBmT,EAAyB,CACvD,EAEM0C,MAAkBnd,EAAAA,aACtB,SAACod,GAAiB,CAChB,IAAIC,EAAeC,GAAAA,EAAmBF,GAAMjD,EAAK,SAACG,EAAOiD,EAAM,CAC7D,IAAMnC,EAAaf,EAAcC,CAAK,EACtC,SACEtd,EAAAA,KAACsf,EAAAA,EAAO,CAAC3O,QAASwN,GAAkBC,CAAU,EAAE7d,YAC9CP,EAAAA,KAACwgB,EAAAA,EAAkB,CAAS5gB,UAAWwf,EAAOqB,aAAc,EAAnCF,CAAqC,CAAC,CACxD,CAEb,CAAC,EAEDF,OAAAA,EAAeC,GAAAA,EAAmBD,EAAcjD,EAAQ,SAACE,EAAOiD,EAAG,CAAF,SAC/DvgB,EAAAA,KAAA,QAAMJ,UAAWwf,EAAOsB,MAAO,EAAMH,CAAS,CAAC,CAChD,EAEMF,CACT,EACA,CAAClC,EAAiB,CACpB,EAEA,SACEne,EAAAA,KAAC2gB,GAAAA,EAAQ,CACPC,cAAe,CAACjD,EAAmB,EACnCkD,cAAe,CAACC,GAAAA,CAAS,EACzBC,WACE,CACE,oBAAqB,SAAA9R,EAAA,KAAG1O,EAAQ0O,EAAR1O,SAAQ,OAC9B4f,GAAgB5f,CAAQ,CAAC,EAC3BygB,KAAI,SAACnhB,EAAY,CACf,IAAQU,EAAuCV,EAAvCU,SAAUX,EAA6BC,EAA7BD,UAAWke,EAAkBje,EAAlBie,KAASmD,EAAInhB,EAAAA,EAAKD,EAAKE,CAAA,EAC9Cud,GAAQ,iBAAiB4D,KAAKthB,GAAa,EAAE,EACnD,OAAO0d,MACLtd,EAAAA,KAACmhB,GAAAA,EAAiBlhB,EAAAA,EAAAA,EAAAA,EAAA,GAAKghB,CAAI,MAAEG,OAAO,MAAMC,SAAU/D,GAAM,CAAC,EAAE/c,SAC1D+gB,OAAO/gB,CAAQ,EAAEqB,QAAQ,MAAO,EAAE,CAAC,CAAC,CACpB,KAEnB5B,EAAAA,KAAA,OAAAC,EAAAA,EAAAA,EAAAA,EAAA,GAAUghB,CAAI,MAAErhB,UAAWA,EAAUW,SAClCA,CAAQ,CAAC,CACN,CAEV,CACF,EACDA,SAEAoQ,EAAO,CACA,CAEd,EAEA,EAAe6M,C,gJCzKF+D,EAAW,UAAM,CAC5B,MAAO,CAAEnf,MAAOmZ,OAAOiG,UAAW,CACpC,EACaC,EAAS,SAACC,EAAqB,CAC1C,IAAMC,EACJ,6bACIC,EAAY,IAAIC,EAAAA,EAEtBD,OAAAA,EAAUE,aAAaH,CAAG,EAEnBC,EAAUG,QAAQC,EAAAA,GAAOC,OAAOP,CAAQ,CAAC,CAClD,EAEA,EAAe,CACbH,SAAAA,EACAE,OAAAA,CACF,EAEaxL,EAAmB,SAACF,EAAkB,CAAF,OAC/CA,EAAS1D,MAAM0D,EAASmM,YAAY,GAAG,EAAI,CAAC,EAAEC,YAAY,CAAC,C,oFC7BzDC,EAAY,OAAO,eACnBC,EAAsB,OAAO,sBAC7BC,EAAe,OAAO,UAAU,eAChCC,EAAe,OAAO,UAAU,qBAChCC,EAAkB,CAACC,EAAK/gB,EAAKG,IAAUH,KAAO+gB,EAAML,EAAUK,EAAK/gB,EAAK,CAAE,WAAY,GAAM,aAAc,GAAM,SAAU,GAAM,MAAAG,CAAM,CAAC,EAAI4gB,EAAI/gB,CAAG,EAAIG,EACtJ6gB,EAAiB,CAACC,EAAGC,IAAM,CAC7B,QAASC,KAAQD,IAAMA,EAAI,CAAC,GACtBN,EAAa,KAAKM,EAAGC,CAAI,GAC3BL,EAAgBG,EAAGE,EAAMD,EAAEC,CAAI,CAAC,EACpC,GAAIR,EACF,QAASQ,KAAQR,EAAoBO,CAAC,EAChCL,EAAa,KAAKK,EAAGC,CAAI,GAC3BL,EAAgBG,EAAGE,EAAMD,EAAEC,CAAI,CAAC,EAEtC,OAAOF,CACT,EAEA,MAAMG,EAAgBjjB,GAA0B,gBAAoB,MAAO6iB,EAAe,CAAE,MAAO,6BAA8B,MAAO,GAAI,OAAQ,GAAI,QAAS,aAAc,EAAG7iB,CAAK,EAAmB,gBAAoB,OAAQ,CAAE,KAAM,UAAW,EAAG,mRAAoR,CAAC,EAAmB,gBAAoB,OAAQ,CAAE,KAAM,OAAQ,EAAG,w4BAAy4B,CAAC,CAAC,EAE99C,MAAe,wvD,wBCnBf,IAAI4B,EAAM,CACT,kBAAmB,KACnB,eAAgB,KAChB,sBAAuB,MACvB,gCAAiC,MACjC,kBAAmB,MACnB,6BAA8B,MAC9B,6BAA8B,MAC9B,6BAA8B,MAC9B,6BAA8B,MAC9B,iCAAkC,MAClC,4BAA6B,MAC7B,4BAA6B,MAC7B,+BAAgC,MAChC,+BAAgC,MAChC,+BAAgC,KAChC,+BAAgC,MAChC,8BAA+B,MAC/B,8BAA+B,MAC/B,8BAA+B,MAC/B,8BAA+B,MAC/B,4BAA6B,MAC7B,4BAA6B,MAC7B,4BAA6B,MAC7B,4BAA6B,MAC7B,8BAA+B,MAC/B,8BAA+B,MAC/B,qCAAsC,MACtC,qCAAsC,MACtC,2BAA4B,MAC5B,2BAA4B,MAC5B,+BAAgC,MAChC,+BAAgC,MAChC,8BAA+B,MAC/B,8BAA+B,MAC/B,eAAgB,MAChB,gBAAiB,MACjB,eAAgB,KAChB,WAAY,MACZ,sBAAuB,MACvB,qBAAsB,MACtB,sBAAuB,MACvB,sBAAuB,MACvB,sBAAuB,MACvB,sBAAuB,MACvB,sBAAuB,MACvB,uBAAwB,MACxB,sBAAuB,MACvB,sBAAuB,MACvB,sBAAuB,MACvB,yBAA0B,MAC1B,sBAAuB,MACvB,uBAAwB,MACxB,uBAAwB,MACxB,uBAAwB,MACxB,uBAAwB,MACxB,sBAAuB,MACvB,qBAAsB,MACtB,uBAAwB,MACxB,sBAAuB,MACvB,sBAAuB,MACvB,sBAAuB,MACvB,uBAAwB,MACxB,sBAAuB,MACvB,sBAAuB,MACvB,sBAAuB,MACvB,uBAAwB,MACxB,sBAAuB,MACvB,sBAAuB,MACvB,sBAAuB,MACvB,sBAAuB,MACvB,uBAAwB,KACxB,sBAAuB,MACvB,sBAAuB,MACvB,uBAAwB,MACxB,sBAAuB,KACvB,uBAAwB,MACxB,sBAAuB,MACvB,wBAAyB,MACzB,uBAAwB,MACxB,+BAAgC,MAChC,0BAA2B,KAC3B,0BAA2B,MAC3B,qBAAsB,KACtB,qBAAsB,MACtB,mBAAoB,MACpB,mBAAoB,MACpB,iBAAkB,MAClB,qBAAsB,MACtB,mBAAoB,MACpB,mBAAoB,MACpB,mBAAoB,MACpB,wBAAyB,MACzB,mBAAoB,MACpB,uBAAwB,MACxB,kBAAmB,MACnB,sBAAuB,MACvB,yBAA0B,MAC1B,mBAAoB,MACpB,eAAgB,MAChB,cAAe,MACf,wBAAyB,MACzB,aAAc,MACd,mBAAoB,MACpB,aAAc,KACd,cAAe,MACf,2BAA4B,KAC5B,iBAAkB,MAClB,gBAAiB,KACjB,cAAe,MACf,gBAAiB,MACjB,YAAa,MACb,yBAA0B,MAC1B,2BAA4B,MAC5B,gCAAiC,MACjC,aAAc,MACd,oBAAqB,KACtB,EAGA,SAASshB,EAAeC,EAAK,CAC5B,IAAIrjB,EAAKsjB,EAAsBD,CAAG,EAClC,OAAOE,EAAoBvjB,CAAE,CAC9B,CACA,SAASsjB,EAAsBD,EAAK,CACnC,GAAG,CAACE,EAAoB,EAAEzhB,EAAKuhB,CAAG,EAAG,CACpC,IAAIjiB,EAAI,IAAI,MAAM,uBAAyBiiB,EAAM,GAAG,EACpD,MAAAjiB,EAAE,KAAO,mBACHA,EAEP,OAAOU,EAAIuhB,CAAG,CACf,CACAD,EAAe,KAAO,UAA8B,CACnD,OAAO,OAAO,KAAKthB,CAAG,CACvB,EACAshB,EAAe,QAAUE,EACzBE,EAAO,QAAUJ,EACjBA,EAAe,GAAK,K","sources":["webpack:///./src/components/image.tsx","webpack:///./src/components/new-document-link.tsx","webpack:///./src/components/svg-icon.tsx","webpack:///./src/hooks/chatHooks.ts","webpack:///./src/hooks/knowledgeHook.ts","webpack:///./src/pages/chat/hooks.ts","webpack:///./src/pages/chat/markdown-content/index.less?ed51","webpack:///./src/pages/chat/markdown-content/index.tsx","webpack:///./src/utils/index.ts","webpack:///./src/assets/svg/assistant.svg","webpack:///./src/assets/svg/ sync \\.svg$"],"sourcesContent":["import { api_host } from '@/utils/api';\n\ninterface IImage {\n  id: string;\n  className: string;\n}\n\nconst Image = ({ id, className, ...props }: IImage) => {\n  return (\n    <img\n      {...props}\n      src={`${api_host}/document/image/${id}`}\n      alt=\"\"\n      className={className}\n    />\n  );\n};\n\nexport default Image;\n","import React from 'react';\n\ninterface IProps extends React.PropsWithChildren {\n  link: string;\n  preventDefault?: boolean;\n  color?: string;\n}\n\nconst NewDocumentLink = ({\n  children,\n  link,\n  preventDefault = false,\n  color = 'rgb(15, 79, 170)',\n}: IProps) => {\n  return (\n    <a\n      target=\"_blank\"\n      onClick={!preventDefault ? undefined : (e) => e.preventDefault()}\n      href={link}\n      rel=\"noreferrer\"\n      style={{ color, wordBreak: 'break-all' }}\n    >\n      {children}\n    </a>\n  );\n};\n\nexport default NewDocumentLink;\n","import Icon from '@ant-design/icons';\nimport { IconComponentProps } from '@ant-design/icons/lib/components/Icon';\n\nconst importAll = (requireContext: __WebpackModuleApi.RequireContext) => {\n  const list = requireContext.keys().map((key) => {\n    const name = key.replace(/\\.\\/(.*)\\.\\w+$/, '$1');\n    return { name, value: requireContext(key) };\n  });\n  return list;\n};\n\nlet routeList: { name: string; value: string }[] = [];\n\ntry {\n  routeList = importAll(require.context('@/assets/svg', true, /\\.svg$/));\n} catch (error) {\n  console.warn(error);\n  routeList = [];\n}\n\ninterface IProps extends IconComponentProps {\n  name: string;\n  width: string | number;\n  height?: string | number;\n}\n\nconst SvgIcon = ({ name, width, height, ...restProps }: IProps) => {\n  const ListItem = routeList.find((item) => item.name === name);\n  return (\n    <Icon\n      component={() => (\n        <img src={ListItem?.value} alt=\"\" width={width} height={height} />\n      )}\n      {...(restProps as any)}\n    />\n  );\n};\n\nexport default SvgIcon;\n","import {\n  IConversation,\n  IDialog,\n  IStats,\n  IToken,\n} from '@/interfaces/database/chat';\nimport { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'umi';\n\nexport const useFetchDialogList = () => {\n  const dispatch = useDispatch();\n\n  const fetchDialogList = useCallback(() => {\n    return dispatch<any>({ type: 'chatModel/listDialog' });\n  }, [dispatch]);\n\n  return fetchDialogList;\n};\n\nexport const useSelectDialogList = () => {\n  const dialogList: IDialog[] = useSelector(\n    (state: any) => state.chatModel.dialogList,\n  );\n\n  return dialogList;\n};\n\nexport const useFetchConversationList = () => {\n  const dispatch = useDispatch();\n\n  const fetchConversationList = useCallback(\n    async (dialogId: string) => {\n      if (dialogId) {\n        dispatch({\n          type: 'chatModel/listConversation',\n          payload: { dialog_id: dialogId },\n        });\n      }\n    },\n    [dispatch],\n  );\n\n  return fetchConversationList;\n};\n\nexport const useSelectConversationList = () => {\n  const conversationList: IConversation[] = useSelector(\n    (state: any) => state.chatModel.conversationList,\n  );\n\n  return conversationList;\n};\n\nexport const useFetchConversation = () => {\n  const dispatch = useDispatch();\n\n  const fetchConversation = useCallback(\n    (conversationId: string, needToBeSaved = true) => {\n      return dispatch<any>({\n        type: 'chatModel/getConversation',\n        payload: {\n          needToBeSaved,\n          conversation_id: conversationId,\n        },\n      });\n    },\n    [dispatch],\n  );\n\n  return fetchConversation;\n};\n\nexport const useFetchDialog = () => {\n  const dispatch = useDispatch();\n\n  const fetchDialog = useCallback(\n    (dialogId: string, needToBeSaved = true) => {\n      if (dialogId) {\n        return dispatch<any>({\n          type: 'chatModel/getDialog',\n          payload: { dialog_id: dialogId, needToBeSaved },\n        });\n      }\n    },\n    [dispatch],\n  );\n\n  return fetchDialog;\n};\n\nexport const useRemoveDialog = () => {\n  const dispatch = useDispatch();\n\n  const removeDocument = useCallback(\n    (dialogIds: Array<string>) => {\n      return dispatch({\n        type: 'chatModel/removeDialog',\n        payload: {\n          dialog_ids: dialogIds,\n        },\n      });\n    },\n    [dispatch],\n  );\n\n  return removeDocument;\n};\n\nexport const useUpdateConversation = () => {\n  const dispatch = useDispatch();\n\n  const updateConversation = useCallback(\n    (payload: any) => {\n      return dispatch<any>({\n        type: 'chatModel/setConversation',\n        payload,\n      });\n    },\n    [dispatch],\n  );\n\n  return updateConversation;\n};\n\nexport const useSetDialog = () => {\n  const dispatch = useDispatch();\n\n  const setDialog = useCallback(\n    (payload: IDialog) => {\n      return dispatch<any>({ type: 'chatModel/setDialog', payload });\n    },\n    [dispatch],\n  );\n\n  return setDialog;\n};\n\nexport const useRemoveConversation = () => {\n  const dispatch = useDispatch();\n\n  const removeConversation = useCallback(\n    (conversationIds: Array<string>, dialogId: string) => {\n      return dispatch<any>({\n        type: 'chatModel/removeConversation',\n        payload: {\n          dialog_id: dialogId,\n          conversation_ids: conversationIds,\n        },\n      });\n    },\n    [dispatch],\n  );\n\n  return removeConversation;\n};\n\n/*\n@deprecated\n */\nexport const useCompleteConversation = () => {\n  const dispatch = useDispatch();\n\n  const completeConversation = useCallback(\n    (payload: any) => {\n      return dispatch<any>({\n        type: 'chatModel/completeConversation',\n        payload,\n      });\n    },\n    [dispatch],\n  );\n\n  return completeConversation;\n};\n\n// #region API provided for external calls\n\nexport const useCreateToken = (dialogId: string) => {\n  const dispatch = useDispatch();\n\n  const createToken = useCallback(() => {\n    return dispatch<any>({\n      type: 'chatModel/createToken',\n      payload: { dialogId },\n    });\n  }, [dispatch, dialogId]);\n\n  return createToken;\n};\n\nexport const useListToken = () => {\n  const dispatch = useDispatch();\n\n  const listToken = useCallback(\n    (dialogId: string) => {\n      return dispatch<any>({\n        type: 'chatModel/listToken',\n        payload: { dialogId },\n      });\n    },\n    [dispatch],\n  );\n\n  return listToken;\n};\n\nexport const useSelectTokenList = () => {\n  const tokenList: IToken[] = useSelector(\n    (state: any) => state.chatModel.tokenList,\n  );\n\n  return tokenList;\n};\n\nexport const useRemoveToken = () => {\n  const dispatch = useDispatch();\n\n  const removeToken = useCallback(\n    (payload: { tenantId: string; dialogId: string; tokens: string[] }) => {\n      return dispatch<any>({\n        type: 'chatModel/removeToken',\n        payload: payload,\n      });\n    },\n    [dispatch],\n  );\n\n  return removeToken;\n};\n\nexport const useFetchStats = () => {\n  const dispatch = useDispatch();\n\n  const fetchStats = useCallback(\n    (payload: any) => {\n      return dispatch<any>({\n        type: 'chatModel/getStats',\n        payload,\n      });\n    },\n    [dispatch],\n  );\n\n  return fetchStats;\n};\n\nexport const useSelectStats = () => {\n  const stats: IStats = useSelector((state: any) => state.chatModel.stats);\n\n  return stats;\n};\n\n//#endregion\n\n//#region shared chat\n\nexport const useCreateSharedConversation = () => {\n  const dispatch = useDispatch();\n\n  const createSharedConversation = useCallback(\n    (userId?: string) => {\n      return dispatch<any>({\n        type: 'chatModel/createExternalConversation',\n        payload: { userId },\n      });\n    },\n    [dispatch],\n  );\n\n  return createSharedConversation;\n};\n\nexport const useFetchSharedConversation = () => {\n  const dispatch = useDispatch();\n\n  const fetchSharedConversation = useCallback(\n    (conversationId: string) => {\n      return dispatch<any>({\n        type: 'chatModel/getExternalConversation',\n        payload: conversationId,\n      });\n    },\n    [dispatch],\n  );\n\n  return fetchSharedConversation;\n};\n\n//#endregion\n","import { useShowDeleteConfirm } from '@/hooks/commonHooks';\nimport { IKnowledge } from '@/interfaces/database/knowledge';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport { useDispatch, useSearchParams, useSelector } from 'umi';\nimport { useGetKnowledgeSearchParams } from './routeHook';\nimport { useOneNamespaceEffectsLoading } from './storeHooks';\n\nexport const useKnowledgeBaseId = (): string => {\n  const [searchParams] = useSearchParams();\n  const knowledgeBaseId = searchParams.get('id');\n\n  return knowledgeBaseId || '';\n};\n\nexport const useDeleteDocumentById = (): {\n  removeDocument: (documentId: string) => Promise<number>;\n} => {\n  const dispatch = useDispatch();\n  const knowledgeBaseId = useKnowledgeBaseId();\n  const showDeleteConfirm = useShowDeleteConfirm();\n\n  const removeDocument = (documentId: string) => () => {\n    return dispatch({\n      type: 'kFModel/document_rm',\n      payload: {\n        doc_id: documentId,\n        kb_id: knowledgeBaseId,\n      },\n    });\n  };\n\n  const onRmDocument = (documentId: string): Promise<number> => {\n    return showDeleteConfirm({ onOk: removeDocument(documentId) });\n  };\n\n  return {\n    removeDocument: onRmDocument,\n  };\n};\n\nexport const useFetchKnowledgeDetail = () => {\n  const dispatch = useDispatch();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const fetchKnowledgeDetail = useCallback(\n    (knowledgeId: string) => {\n      dispatch({\n        type: 'knowledgeModel/getKnowledgeDetail',\n        payload: { kb_id: knowledgeId },\n      });\n    },\n    [dispatch],\n  );\n\n  useEffect(() => {\n    fetchKnowledgeDetail(knowledgeId);\n  }, [fetchKnowledgeDetail, knowledgeId]);\n\n  return fetchKnowledgeDetail;\n};\n\nexport const useSelectKnowledgeDetail = () => {\n  const knowledge: IKnowledge = useSelector(\n    (state: any) => state.knowledgeModel.knowledge,\n  );\n\n  return knowledge;\n};\n\nexport const useGetDocumentDefaultParser = () => {\n  const item = useSelectKnowledgeDetail();\n\n  return {\n    defaultParserId: item?.parser_id ?? '',\n    parserConfig: item?.parser_config ?? '',\n  };\n};\n\nexport const useDeleteChunkByIds = (): {\n  removeChunk: (chunkIds: string[], documentId: string) => Promise<number>;\n} => {\n  const dispatch = useDispatch();\n  const showDeleteConfirm = useShowDeleteConfirm();\n\n  const removeChunk = useCallback(\n    (chunkIds: string[], documentId: string) => () => {\n      return dispatch({\n        type: 'chunkModel/rm_chunk',\n        payload: {\n          chunk_ids: chunkIds,\n          doc_id: documentId,\n        },\n      });\n    },\n    [dispatch],\n  );\n\n  const onRemoveChunk = useCallback(\n    (chunkIds: string[], documentId: string): Promise<number> => {\n      return showDeleteConfirm({ onOk: removeChunk(chunkIds, documentId) });\n    },\n    [removeChunk, showDeleteConfirm],\n  );\n\n  return {\n    removeChunk: onRemoveChunk,\n  };\n};\n\nexport const useFetchKnowledgeBaseConfiguration = () => {\n  const dispatch = useDispatch();\n  const knowledgeBaseId = useKnowledgeBaseId();\n\n  const fetchKnowledgeBaseConfiguration = useCallback(() => {\n    dispatch({\n      type: 'kSModel/getKbDetail',\n      payload: {\n        kb_id: knowledgeBaseId,\n      },\n    });\n  }, [dispatch, knowledgeBaseId]);\n\n  useEffect(() => {\n    fetchKnowledgeBaseConfiguration();\n  }, [fetchKnowledgeBaseConfiguration]);\n};\n\nexport const useSelectKnowledgeList = () => {\n  const knowledgeModel = useSelector((state) => state.knowledgeModel);\n  const { data = [] } = knowledgeModel;\n  return data;\n};\n\nexport const useFetchKnowledgeList = (\n  shouldFilterListWithoutDocument: boolean = false,\n) => {\n  const dispatch = useDispatch();\n  const loading = useOneNamespaceEffectsLoading('knowledgeModel', ['getList']);\n\n  const knowledgeModel = useSelector((state) => state.knowledgeModel);\n  const { data = [] } = knowledgeModel;\n  const list: IKnowledge[] = useMemo(() => {\n    return shouldFilterListWithoutDocument\n      ? data.filter((x: IKnowledge) => x.chunk_num > 0)\n      : data;\n  }, [data, shouldFilterListWithoutDocument]);\n\n  const fetchList = useCallback(() => {\n    dispatch({\n      type: 'knowledgeModel/getList',\n    });\n  }, [dispatch]);\n\n  useEffect(() => {\n    fetchList();\n  }, [fetchList]);\n\n  return { list, loading, fetchList };\n};\n\nexport const useSelectFileThumbnails = () => {\n  const fileThumbnails: Record<string, string> = useSelector(\n    (state: any) => state.kFModel.fileThumbnails,\n  );\n\n  return fileThumbnails;\n};\n\nexport const useFetchFileThumbnails = (docIds?: Array<string>) => {\n  const dispatch = useDispatch();\n  const fileThumbnails = useSelectFileThumbnails();\n\n  const fetchFileThumbnails = useCallback(\n    (docIds: Array<string>) => {\n      dispatch({\n        type: 'kFModel/fetch_document_thumbnails',\n        payload: { doc_ids: docIds.join(',') },\n      });\n    },\n    [dispatch],\n  );\n\n  useEffect(() => {\n    if (docIds) {\n      fetchFileThumbnails(docIds);\n    }\n  }, [docIds, fetchFileThumbnails]);\n\n  return { fileThumbnails, fetchFileThumbnails };\n};\n\n//#region knowledge configuration\n\nexport const useUpdateKnowledge = () => {\n  const dispatch = useDispatch();\n\n  const saveKnowledgeConfiguration = useCallback(\n    (payload: any) => {\n      dispatch({\n        type: 'kSModel/updateKb',\n        payload,\n      });\n    },\n    [dispatch],\n  );\n\n  return saveKnowledgeConfiguration;\n};\n\nexport const useSelectKnowledgeDetails = () => {\n  const knowledgeDetails: IKnowledge = useSelector(\n    (state: any) => state.kSModel.knowledgeDetails,\n  );\n  return knowledgeDetails;\n};\n//#endregion\n\n//#region Retrieval testing\n\nexport const useTestChunkRetrieval = () => {\n  const dispatch = useDispatch();\n  const knowledgeBaseId = useKnowledgeBaseId();\n\n  const testChunk = useCallback(\n    (values: any) => {\n      dispatch({\n        type: 'testingModel/testDocumentChunk',\n        payload: {\n          ...values,\n          kb_id: knowledgeBaseId,\n        },\n      });\n    },\n    [dispatch, knowledgeBaseId],\n  );\n\n  return testChunk;\n};\n//#endregion\n","import { MessageType } from '@/constants/chat';\nimport { fileIconMap } from '@/constants/common';\nimport {\n  useCreateToken,\n  useFetchConversation,\n  useFetchConversationList,\n  useFetchDialog,\n  useFetchDialogList,\n  useFetchStats,\n  useListToken,\n  useRemoveConversation,\n  useRemoveDialog,\n  useRemoveToken,\n  useSelectConversationList,\n  useSelectDialogList,\n  useSelectStats,\n  useSelectTokenList,\n  useSetDialog,\n  useUpdateConversation,\n} from '@/hooks/chatHooks';\nimport {\n  useSetModalState,\n  useShowDeleteConfirm,\n  useTranslate,\n} from '@/hooks/commonHooks';\nimport { useSendMessageWithSse } from '@/hooks/logicHooks';\nimport { useOneNamespaceEffectsLoading } from '@/hooks/storeHooks';\nimport {\n  IAnswer,\n  IConversation,\n  IDialog,\n  IStats,\n} from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { getFileExtension } from '@/utils';\nimport { message } from 'antd';\nimport dayjs, { Dayjs } from 'dayjs';\nimport omit from 'lodash/omit';\nimport {\n  ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { useDispatch, useSearchParams, useSelector } from 'umi';\nimport { v4 as uuid } from 'uuid';\nimport { ChatSearchParams } from './constants';\nimport {\n  IClientConversation,\n  IMessage,\n  VariableTableDataType,\n} from './interface';\nimport { ChatModelState } from './model';\nimport { isConversationIdExist } from './utils';\n\nexport const useSelectCurrentDialog = () => {\n  const currentDialog: IDialog = useSelector(\n    (state: any) => state.chatModel.currentDialog,\n  );\n\n  return currentDialog;\n};\n\nexport const useFetchDialogOnMount = (\n  dialogId: string,\n  visible: boolean,\n): IDialog => {\n  const currentDialog: IDialog = useSelectCurrentDialog();\n  const fetchDialog = useFetchDialog();\n\n  useEffect(() => {\n    if (dialogId && visible) {\n      fetchDialog(dialogId);\n    }\n  }, [dialogId, fetchDialog, visible]);\n\n  return currentDialog;\n};\n\nexport const useSetCurrentDialog = () => {\n  const dispatch = useDispatch();\n\n  const currentDialog: IDialog = useSelector(\n    (state: any) => state.chatModel.currentDialog,\n  );\n\n  const setCurrentDialog = useCallback(\n    (dialogId: string) => {\n      dispatch({\n        type: 'chatModel/setCurrentDialog',\n        payload: { id: dialogId },\n      });\n    },\n    [dispatch],\n  );\n\n  return { currentDialog, setCurrentDialog };\n};\n\nexport const useResetCurrentDialog = () => {\n  const dispatch = useDispatch();\n\n  const resetCurrentDialog = useCallback(() => {\n    dispatch({\n      type: 'chatModel/setCurrentDialog',\n      payload: {},\n    });\n  }, [dispatch]);\n\n  return { resetCurrentDialog };\n};\n\nexport const useSelectPromptConfigParameters = (): VariableTableDataType[] => {\n  const currentDialog: IDialog = useSelector(\n    (state: any) => state.chatModel.currentDialog,\n  );\n\n  const finalParameters: VariableTableDataType[] = useMemo(() => {\n    const parameters = currentDialog?.prompt_config?.parameters ?? [];\n    if (!currentDialog.id) {\n      // The newly created chat has a default parameter\n      return [{ key: uuid(), variable: 'knowledge', optional: false }];\n    }\n    return parameters.map((x) => ({\n      key: uuid(),\n      variable: x.key,\n      optional: x.optional,\n    }));\n  }, [currentDialog]);\n\n  return finalParameters;\n};\n\nexport const useDeleteDialog = () => {\n  const showDeleteConfirm = useShowDeleteConfirm();\n\n  const removeDocument = useRemoveDialog();\n\n  const onRemoveDialog = (dialogIds: Array<string>) => {\n    showDeleteConfirm({ onOk: () => removeDocument(dialogIds) });\n  };\n\n  return { onRemoveDialog };\n};\n\nexport const useGetChatSearchParams = () => {\n  const [currentQueryParameters] = useSearchParams();\n\n  return {\n    dialogId: currentQueryParameters.get(ChatSearchParams.DialogId) || '',\n    conversationId:\n      currentQueryParameters.get(ChatSearchParams.ConversationId) || '',\n  };\n};\n\nexport const useSetCurrentConversation = () => {\n  const dispatch = useDispatch();\n\n  const setCurrentConversation = useCallback(\n    (currentConversation: IClientConversation) => {\n      dispatch({\n        type: 'chatModel/setCurrentConversation',\n        payload: currentConversation,\n      });\n    },\n    [dispatch],\n  );\n\n  return setCurrentConversation;\n};\n\nexport const useClickDialogCard = () => {\n  const [currentQueryParameters, setSearchParams] = useSearchParams();\n\n  const newQueryParameters: URLSearchParams = useMemo(() => {\n    return new URLSearchParams();\n  }, []);\n\n  const handleClickDialog = useCallback(\n    (dialogId: string) => {\n      newQueryParameters.set(ChatSearchParams.DialogId, dialogId);\n      // newQueryParameters.set(\n      //   ChatSearchParams.ConversationId,\n      //   EmptyConversationId,\n      // );\n      setSearchParams(newQueryParameters);\n    },\n    [newQueryParameters, setSearchParams],\n  );\n\n  return { handleClickDialog };\n};\n\nexport const useSelectFirstDialogOnMount = () => {\n  const fetchDialogList = useFetchDialogList();\n  const dialogList = useSelectDialogList();\n\n  const { handleClickDialog } = useClickDialogCard();\n\n  const fetchList = useCallback(async () => {\n    const data = await fetchDialogList();\n    if (data.retcode === 0 && data.data.length > 0) {\n      handleClickDialog(data.data[0].id);\n    }\n  }, [fetchDialogList, handleClickDialog]);\n\n  useEffect(() => {\n    fetchList();\n  }, [fetchList]);\n\n  return dialogList;\n};\n\nexport const useHandleItemHover = () => {\n  const [activated, setActivated] = useState<string>('');\n\n  const handleItemEnter = (id: string) => {\n    setActivated(id);\n  };\n\n  const handleItemLeave = () => {\n    setActivated('');\n  };\n\n  return {\n    activated,\n    handleItemEnter,\n    handleItemLeave,\n  };\n};\n\nexport const useEditDialog = () => {\n  const [dialog, setDialog] = useState<IDialog>({} as IDialog);\n  const fetchDialog = useFetchDialog();\n  const submitDialog = useSetDialog();\n  const loading = useOneNamespaceEffectsLoading('chatModel', ['setDialog']);\n\n  const {\n    visible: dialogEditVisible,\n    hideModal: hideDialogEditModal,\n    showModal: showDialogEditModal,\n  } = useSetModalState();\n\n  const onDialogEditOk = useCallback(\n    async (dialog: IDialog) => {\n      const ret = await submitDialog(dialog);\n\n      if (ret === 0) {\n        hideDialogEditModal();\n      }\n    },\n    [submitDialog, hideDialogEditModal],\n  );\n\n  const handleShowDialogEditModal = useCallback(\n    async (dialogId?: string) => {\n      if (dialogId) {\n        const ret = await fetchDialog(dialogId, false);\n        if (ret.retcode === 0) {\n          setDialog(ret.data);\n        }\n      }\n      showDialogEditModal();\n    },\n    [showDialogEditModal, fetchDialog],\n  );\n\n  const clearDialog = useCallback(() => {\n    setDialog({} as IDialog);\n  }, []);\n\n  return {\n    dialogSettingLoading: loading,\n    initialDialog: dialog,\n    onDialogEditOk,\n    dialogEditVisible,\n    hideDialogEditModal,\n    showDialogEditModal: handleShowDialogEditModal,\n    clearDialog,\n  };\n};\n\n//#region conversation\n\nexport const useFetchConversationListOnMount = () => {\n  const conversationList = useSelectConversationList();\n  const { dialogId } = useGetChatSearchParams();\n  const fetchConversationList = useFetchConversationList();\n\n  useEffect(() => {\n    fetchConversationList(dialogId);\n  }, [fetchConversationList, dialogId]);\n\n  return conversationList;\n};\n\nexport const useSelectDerivedConversationList = () => {\n  const [list, setList] = useState<Array<IConversation>>([]);\n  let chatModel: ChatModelState = useSelector((state: any) => state.chatModel);\n  const { conversationList, currentDialog } = chatModel;\n  const { dialogId } = useGetChatSearchParams();\n  const prologue = currentDialog?.prompt_config?.prologue ?? '';\n\n  const addTemporaryConversation = useCallback(() => {\n    setList((pre) => {\n      if (dialogId) {\n        const nextList = [\n          {\n            id: '',\n            name: 'New conversation',\n            dialog_id: dialogId,\n            message: [\n              {\n                content: prologue,\n                role: MessageType.Assistant,\n              },\n            ],\n          } as IConversation,\n          ...conversationList,\n        ];\n        return nextList;\n      }\n\n      return pre;\n    });\n  }, [conversationList, dialogId, prologue]);\n\n  useEffect(() => {\n    addTemporaryConversation();\n  }, [addTemporaryConversation]);\n\n  return { list, addTemporaryConversation };\n};\n\nexport const useClickConversationCard = () => {\n  const [currentQueryParameters, setSearchParams] = useSearchParams();\n  const newQueryParameters: URLSearchParams = useMemo(\n    () => new URLSearchParams(currentQueryParameters.toString()),\n    [currentQueryParameters],\n  );\n\n  const handleClickConversation = useCallback(\n    (conversationId: string) => {\n      newQueryParameters.set(ChatSearchParams.ConversationId, conversationId);\n      setSearchParams(newQueryParameters);\n    },\n    [newQueryParameters, setSearchParams],\n  );\n\n  return { handleClickConversation };\n};\n\nexport const useSetConversation = () => {\n  const { dialogId } = useGetChatSearchParams();\n  const updateConversation = useUpdateConversation();\n\n  const setConversation = useCallback(\n    (message: string) => {\n      return updateConversation({\n        dialog_id: dialogId,\n        name: message,\n        message: [\n          {\n            role: MessageType.Assistant,\n            content: message,\n          },\n        ],\n      });\n    },\n    [updateConversation, dialogId],\n  );\n\n  return { setConversation };\n};\n\nexport const useSelectCurrentConversation = () => {\n  const [currentConversation, setCurrentConversation] =\n    useState<IClientConversation>({} as IClientConversation);\n\n  const conversation: IClientConversation = useSelector(\n    (state: any) => state.chatModel.currentConversation,\n  );\n  const dialog = useSelectCurrentDialog();\n  const { conversationId, dialogId } = useGetChatSearchParams();\n\n  const addNewestConversation = useCallback(\n    (message: string, answer: string = '') => {\n      setCurrentConversation((pre) => {\n        return {\n          ...pre,\n          message: [\n            ...pre.message,\n            {\n              role: MessageType.User,\n              content: message,\n              id: uuid(),\n            } as IMessage,\n            {\n              role: MessageType.Assistant,\n              content: answer,\n              id: uuid(),\n              reference: [],\n            } as IMessage,\n          ],\n        };\n      });\n    },\n    [],\n  );\n\n  const addNewestAnswer = useCallback((answer: IAnswer) => {\n    setCurrentConversation((pre) => {\n      const latestMessage = pre.message?.at(-1);\n\n      if (latestMessage) {\n        return {\n          ...pre,\n          message: [\n            ...pre.message.slice(0, -1),\n            {\n              ...latestMessage,\n              content: answer.answer,\n              reference: answer.reference,\n            } as IMessage,\n          ],\n        };\n      }\n      return pre;\n    });\n  }, []);\n\n  const removeLatestMessage = useCallback(() => {\n    console.info('removeLatestMessage');\n    setCurrentConversation((pre) => {\n      const nextMessages = pre.message?.slice(0, -2) ?? [];\n      return {\n        ...pre,\n        message: nextMessages,\n      };\n    });\n  }, []);\n\n  const addPrologue = useCallback(() => {\n    if (dialogId !== '' && conversationId === '') {\n      const prologue = dialog.prompt_config?.prologue;\n\n      const nextMessage = {\n        role: MessageType.Assistant,\n        content: prologue,\n        id: uuid(),\n      } as IMessage;\n\n      setCurrentConversation({\n        id: '',\n        dialog_id: dialogId,\n        reference: [],\n        message: [nextMessage],\n      } as any);\n    }\n  }, [conversationId, dialog, dialogId]);\n\n  useEffect(() => {\n    addPrologue();\n  }, [addPrologue]);\n\n  useEffect(() => {\n    if (conversationId) {\n      setCurrentConversation(conversation);\n    }\n  }, [conversation, conversationId]);\n\n  return {\n    currentConversation,\n    addNewestConversation,\n    removeLatestMessage,\n    addNewestAnswer,\n  };\n};\n\nexport const useScrollToBottom = (currentConversation: IClientConversation) => {\n  const ref = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = useCallback(() => {\n    console.info('useScrollToBottom');\n    if (currentConversation.id) {\n      ref.current?.scrollIntoView({ behavior: 'instant' });\n    }\n  }, [currentConversation]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [scrollToBottom]);\n\n  return ref;\n};\n\nexport const useFetchConversationOnMount = () => {\n  const { conversationId } = useGetChatSearchParams();\n  const fetchConversation = useFetchConversation();\n  const {\n    currentConversation,\n    addNewestConversation,\n    removeLatestMessage,\n    addNewestAnswer,\n  } = useSelectCurrentConversation();\n  const ref = useScrollToBottom(currentConversation);\n\n  const fetchConversationOnMount = useCallback(() => {\n    if (isConversationIdExist(conversationId)) {\n      fetchConversation(conversationId);\n    }\n  }, [fetchConversation, conversationId]);\n\n  useEffect(() => {\n    fetchConversationOnMount();\n  }, [fetchConversationOnMount]);\n\n  return {\n    currentConversation,\n    addNewestConversation,\n    ref,\n    removeLatestMessage,\n    addNewestAnswer,\n  };\n};\n\nexport const useHandleMessageInputChange = () => {\n  const [value, setValue] = useState('');\n\n  const handleInputChange: ChangeEventHandler<HTMLInputElement> = (e) => {\n    const value = e.target.value;\n    const nextValue = value.replaceAll('\\\\n', '\\n').replaceAll('\\\\t', '\\t');\n    setValue(nextValue);\n  };\n\n  return {\n    handleInputChange,\n    value,\n    setValue,\n  };\n};\n\nexport const useSendMessage = (\n  conversation: IClientConversation,\n  addNewestConversation: (message: string, answer?: string) => void,\n  removeLatestMessage: () => void,\n  addNewestAnswer: (answer: IAnswer) => void,\n) => {\n  const { setConversation } = useSetConversation();\n  const { conversationId } = useGetChatSearchParams();\n  const { handleInputChange, value, setValue } = useHandleMessageInputChange();\n\n  const fetchConversation = useFetchConversation();\n\n  const { handleClickConversation } = useClickConversationCard();\n  const { send, answer, done } = useSendMessageWithSse();\n\n  const sendMessage = useCallback(\n    async (message: string, id?: string) => {\n      const res: Response = await send({\n        conversation_id: id ?? conversationId,\n        messages: [\n          ...(conversation?.message ?? []).map((x: IMessage) => omit(x, 'id')),\n          {\n            role: MessageType.User,\n            content: message,\n          },\n        ],\n      });\n\n      if (res.status === 200) {\n        if (id) {\n          console.info('111');\n          // new conversation\n          handleClickConversation(id);\n        } else {\n          console.info('222');\n          // fetchConversation(conversationId);\n        }\n      } else {\n        console.info('333');\n\n        // cancel loading\n        setValue(message);\n        console.info('removeLatestMessage111');\n        removeLatestMessage();\n      }\n      console.info('false');\n    },\n    [\n      conversation?.message,\n      conversationId,\n      // fetchConversation,\n      handleClickConversation,\n      removeLatestMessage,\n      setValue,\n      send,\n    ],\n  );\n\n  const handleSendMessage = useCallback(\n    async (message: string) => {\n      if (conversationId !== '') {\n        sendMessage(message);\n      } else {\n        const data = await setConversation(message);\n        if (data.retcode === 0) {\n          const id = data.data.id;\n          sendMessage(message, id);\n        }\n      }\n    },\n    [conversationId, setConversation, sendMessage],\n  );\n\n  useEffect(() => {\n    if (answer.answer) {\n      addNewestAnswer(answer);\n      console.info('true?');\n      console.info('send msg:', answer.answer);\n    }\n  }, [answer, addNewestAnswer]);\n\n  const handlePressEnter = useCallback(() => {\n    if (done) {\n      setValue('');\n      handleSendMessage(value.trim());\n    }\n    addNewestConversation(value);\n  }, [addNewestConversation, handleSendMessage, done, setValue, value]);\n\n  return {\n    handlePressEnter,\n    handleInputChange,\n    value,\n    loading: !done,\n  };\n};\n\nexport const useGetFileIcon = () => {\n  // const req = require.context('@/assets/svg/file-icon');\n  // const ret = req.keys().map(req);\n  // console.info(ret);\n  // useEffect(() => {}, []);\n\n  const getFileIcon = (filename: string) => {\n    const ext: string = getFileExtension(filename);\n    const iconPath = fileIconMap[ext as keyof typeof fileIconMap];\n    // const x = require(`@/assets/svg/file-icon/${iconPath}`);\n    return `@/assets/svg/file-icon/${iconPath}`;\n  };\n\n  return getFileIcon;\n};\n\nexport const useDeleteConversation = () => {\n  const { dialogId } = useGetChatSearchParams();\n  const { handleClickConversation } = useClickConversationCard();\n  const showDeleteConfirm = useShowDeleteConfirm();\n  const removeConversation = useRemoveConversation();\n\n  const deleteConversation = (conversationIds: Array<string>) => async () => {\n    const ret = await removeConversation(conversationIds, dialogId);\n    if (ret === 0) {\n      handleClickConversation('');\n    }\n    return ret;\n  };\n\n  const onRemoveConversation = (conversationIds: Array<string>) => {\n    showDeleteConfirm({ onOk: deleteConversation(conversationIds) });\n  };\n\n  return { onRemoveConversation };\n};\n\nexport const useRenameConversation = () => {\n  const [conversation, setConversation] = useState<IClientConversation>(\n    {} as IClientConversation,\n  );\n  const fetchConversation = useFetchConversation();\n  const {\n    visible: conversationRenameVisible,\n    hideModal: hideConversationRenameModal,\n    showModal: showConversationRenameModal,\n  } = useSetModalState();\n  const updateConversation = useUpdateConversation();\n\n  const onConversationRenameOk = useCallback(\n    async (name: string) => {\n      const ret = await updateConversation({\n        ...conversation,\n        conversation_id: conversation.id,\n        name,\n      });\n\n      if (ret.retcode === 0) {\n        hideConversationRenameModal();\n      }\n    },\n    [updateConversation, conversation, hideConversationRenameModal],\n  );\n\n  const loading = useOneNamespaceEffectsLoading('chatModel', [\n    'setConversation',\n  ]);\n\n  const handleShowConversationRenameModal = useCallback(\n    async (conversationId: string) => {\n      const ret = await fetchConversation(conversationId, false);\n      if (ret.retcode === 0) {\n        setConversation(ret.data);\n      }\n      showConversationRenameModal();\n    },\n    [showConversationRenameModal, fetchConversation],\n  );\n\n  return {\n    conversationRenameLoading: loading,\n    initialConversationName: conversation.name,\n    onConversationRenameOk,\n    conversationRenameVisible,\n    hideConversationRenameModal,\n    showConversationRenameModal: handleShowConversationRenameModal,\n  };\n};\n\nexport const useClickDrawer = () => {\n  const { visible, showModal, hideModal } = useSetModalState();\n  const [selectedChunk, setSelectedChunk] = useState<IChunk>({} as IChunk);\n  const [documentId, setDocumentId] = useState<string>('');\n\n  const clickDocumentButton = useCallback(\n    (documentId: string, chunk: IChunk) => {\n      showModal();\n      setSelectedChunk(chunk);\n      setDocumentId(documentId);\n    },\n    [showModal],\n  );\n\n  return {\n    clickDocumentButton,\n    visible,\n    showModal,\n    hideModal,\n    selectedChunk,\n    documentId,\n  };\n};\n\nexport const useSelectDialogListLoading = () => {\n  return useOneNamespaceEffectsLoading('chatModel', ['listDialog']);\n};\nexport const useSelectConversationListLoading = () => {\n  return useOneNamespaceEffectsLoading('chatModel', ['listConversation']);\n};\nexport const useSelectConversationLoading = () => {\n  return useOneNamespaceEffectsLoading('chatModel', ['getConversation']);\n};\n\nexport const useGetSendButtonDisabled = () => {\n  const { dialogId, conversationId } = useGetChatSearchParams();\n\n  return dialogId === '' && conversationId === '';\n};\n//#endregion\n\n//#region API provided for external calls\n\ntype RangeValue = [Dayjs | null, Dayjs | null] | null;\n\nconst getDay = (date: Dayjs) => date.format('YYYY-MM-DD');\n\nexport const useFetchStatsOnMount = (visible: boolean) => {\n  const fetchStats = useFetchStats();\n  const [pickerValue, setPickerValue] = useState<RangeValue>([\n    dayjs(),\n    dayjs().subtract(7, 'day'),\n  ]);\n\n  useEffect(() => {\n    if (visible && Array.isArray(pickerValue) && pickerValue[0]) {\n      fetchStats({\n        fromDate: getDay(pickerValue[0]),\n        toDate: getDay(pickerValue[1] ?? dayjs()),\n      });\n    }\n  }, [fetchStats, pickerValue, visible]);\n\n  return {\n    pickerValue,\n    setPickerValue,\n  };\n};\n\nexport const useOperateApiKey = (visible: boolean, dialogId: string) => {\n  const removeToken = useRemoveToken();\n  const createToken = useCreateToken(dialogId);\n  const listToken = useListToken();\n  const tokenList = useSelectTokenList();\n  const creatingLoading = useOneNamespaceEffectsLoading('chatModel', [\n    'createToken',\n  ]);\n  const listLoading = useOneNamespaceEffectsLoading('chatModel', ['list']);\n\n  const showDeleteConfirm = useShowDeleteConfirm();\n\n  const onRemoveToken = (token: string, tenantId: string) => {\n    showDeleteConfirm({\n      onOk: () => removeToken({ dialogId, tokens: [token], tenantId }),\n    });\n  };\n\n  useEffect(() => {\n    if (visible && dialogId) {\n      listToken(dialogId);\n    }\n  }, [listToken, dialogId, visible]);\n\n  return {\n    removeToken: onRemoveToken,\n    createToken,\n    tokenList,\n    creatingLoading,\n    listLoading,\n  };\n};\n\ntype ChartStatsType = {\n  [k in keyof IStats]: Array<{ xAxis: string; yAxis: number }>;\n};\n\nexport const useSelectChartStatsList = (): ChartStatsType => {\n  const stats: IStats = useSelectStats();\n  // const stats = {\n  //   pv: [\n  //     ['2024-06-01', 1],\n  //     ['2024-07-24', 3],\n  //     ['2024-09-01', 10],\n  //   ],\n  //   uv: [\n  //     ['2024-02-01', 0],\n  //     ['2024-03-01', 99],\n  //     ['2024-05-01', 3],\n  //   ],\n  //   speed: [\n  //     ['2024-09-01', 2],\n  //     ['2024-09-01', 3],\n  //   ],\n  //   tokens: [\n  //     ['2024-09-01', 1],\n  //     ['2024-09-01', 3],\n  //   ],\n  //   round: [\n  //     ['2024-09-01', 0],\n  //     ['2024-09-01', 3],\n  //   ],\n  //   thumb_up: [\n  //     ['2024-09-01', 3],\n  //     ['2024-09-01', 9],\n  //   ],\n  // };\n\n  return Object.keys(stats).reduce((pre, cur) => {\n    const item = stats[cur as keyof IStats];\n    if (item.length > 0) {\n      pre[cur as keyof IStats] = item.map((x) => ({\n        xAxis: x[0] as string,\n        yAxis: x[1] as number,\n      }));\n    }\n    return pre;\n  }, {} as ChartStatsType);\n};\n\nexport const useShowTokenEmptyError = () => {\n  const [messageApi, contextHolder] = message.useMessage();\n  const { t } = useTranslate('chat');\n\n  const showTokenEmptyError = useCallback(() => {\n    messageApi.error(t('tokenError'));\n  }, [messageApi, t]);\n  return { showTokenEmptyError, contextHolder };\n};\n\nconst getUrlWithToken = (token: string) => {\n  const { protocol, host } = window.location;\n  return `${protocol}//${host}/chat/share?shared_id=${token}`;\n};\n\nconst useFetchTokenListBeforeOtherStep = (dialogId: string) => {\n  const { showTokenEmptyError, contextHolder } = useShowTokenEmptyError();\n\n  const listToken = useListToken();\n  const tokenList = useSelectTokenList();\n\n  const token =\n    Array.isArray(tokenList) && tokenList.length > 0 ? tokenList[0].token : '';\n\n  const handleOperate = useCallback(async () => {\n    const data = await listToken(dialogId);\n    const list = data.data;\n    if (data.retcode === 0 && Array.isArray(list) && list.length > 0) {\n      return list[0]?.token;\n    } else {\n      showTokenEmptyError();\n      return false;\n    }\n  }, [dialogId, listToken, showTokenEmptyError]);\n\n  return {\n    token,\n    contextHolder,\n    handleOperate,\n  };\n};\n\nexport const useShowEmbedModal = (dialogId: string) => {\n  const {\n    visible: embedVisible,\n    hideModal: hideEmbedModal,\n    showModal: showEmbedModal,\n  } = useSetModalState();\n\n  const { handleOperate, token, contextHolder } =\n    useFetchTokenListBeforeOtherStep(dialogId);\n\n  const handleShowEmbedModal = useCallback(async () => {\n    const succeed = await handleOperate();\n    if (succeed) {\n      showEmbedModal();\n    }\n  }, [handleOperate, showEmbedModal]);\n\n  return {\n    showEmbedModal: handleShowEmbedModal,\n    hideEmbedModal,\n    embedVisible,\n    embedToken: token,\n    errorContextHolder: contextHolder,\n  };\n};\n\nexport const usePreviewChat = (dialogId: string) => {\n  const { handleOperate, contextHolder } =\n    useFetchTokenListBeforeOtherStep(dialogId);\n\n  const open = useCallback((t: string) => {\n    window.open(getUrlWithToken(t), '_blank');\n  }, []);\n\n  const handlePreview = useCallback(async () => {\n    const token = await handleOperate();\n    if (token) {\n      open(token);\n    }\n  }, [handleOperate, open]);\n\n  return {\n    handlePreview,\n    contextHolder,\n  };\n};\n\n//#endregion\n","// extracted by mini-css-extract-plugin\nexport default {\"referencePopoverWrapper\":\"referencePopoverWrapper___rn9A6\",\"referenceChunkImage\":\"referenceChunkImage___LoR67\",\"referenceImagePreview\":\"referenceImagePreview___kcQgd\",\"chunkContentText\":\"chunkContentText___vcP0P\",\"documentLink\":\"documentLink___USud0\",\"referenceIcon\":\"referenceIcon___g5Mgk\",\"cursor\":\"cursor___rRuWB\",\"blink\":\"blink___BYl7u\"};","import Image from '@/components/image';\nimport SvgIcon from '@/components/svg-icon';\nimport { useSelectFileThumbnails } from '@/hooks/knowledgeHook';\nimport { IReference } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { getExtension } from '@/utils/documentUtils';\nimport { InfoCircleOutlined } from '@ant-design/icons';\nimport { Button, Flex, Popover, Space } from 'antd';\nimport { useCallback } from 'react';\nimport Markdown from 'react-markdown';\nimport reactStringReplace from 'react-string-replace';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport remarkGfm from 'remark-gfm';\nimport { visitParents } from 'unist-util-visit-parents';\n\nimport styles from './index.less';\n\nconst reg = /(#{2}\\d+\\${2})/g;\nconst curReg = /(~{2}\\d+\\${2})/g;\n\nconst getChunkIndex = (match: string) => Number(match.slice(2, -2));\n// TODO: The display of the table is inconsistent with the display previously placed in the MessageItem.\nconst MarkdownContent = ({\n  reference,\n  clickDocumentButton,\n  content,\n}: {\n  content: string;\n  reference: IReference;\n  clickDocumentButton: (documentId: string, chunk: IChunk) => void;\n}) => {\n  const fileThumbnails = useSelectFileThumbnails();\n\n  const handleDocumentButtonClick = useCallback(\n    (documentId: string, chunk: IChunk, isPdf: boolean) => () => {\n      if (!isPdf) {\n        return;\n      }\n      clickDocumentButton(documentId, chunk);\n    },\n    [clickDocumentButton],\n  );\n\n  const rehypeWrapReference = () => {\n    return function wrapTextTransform(tree: any) {\n      visitParents(tree, 'text', (node, ancestors) => {\n        const latestAncestor = ancestors.at(-1);\n        if (\n          latestAncestor.tagName !== 'custom-typography' &&\n          latestAncestor.tagName !== 'code'\n        ) {\n          node.type = 'element';\n          node.tagName = 'custom-typography';\n          node.properties = {};\n          node.children = [{ type: 'text', value: node.value }];\n        }\n      });\n    };\n  };\n\n  const getPopoverContent = useCallback(\n    (chunkIndex: number) => {\n      const chunks = reference?.chunks ?? [];\n      const chunkItem = chunks[chunkIndex];\n      const document = reference?.doc_aggs?.find(\n        (x) => x?.doc_id === chunkItem?.doc_id,\n      );\n      const documentId = document?.doc_id;\n      const fileThumbnail = documentId ? fileThumbnails[documentId] : '';\n      const fileExtension = documentId ? getExtension(document?.doc_name) : '';\n      const imageId = chunkItem?.img_id;\n      return (\n        <Flex\n          key={chunkItem?.chunk_id}\n          gap={10}\n          className={styles.referencePopoverWrapper}\n        >\n          {imageId && (\n            <Popover\n              placement=\"left\"\n              content={\n                <Image\n                  id={imageId}\n                  className={styles.referenceImagePreview}\n                ></Image>\n              }\n            >\n              <Image\n                id={imageId}\n                className={styles.referenceChunkImage}\n              ></Image>\n            </Popover>\n          )}\n          <Space direction={'vertical'}>\n            <div\n              dangerouslySetInnerHTML={{\n                __html: chunkItem?.content_with_weight,\n              }}\n              className={styles.chunkContentText}\n            ></div>\n            {documentId && (\n              <Flex gap={'small'}>\n                {fileThumbnail ? (\n                  <img src={fileThumbnail} alt=\"\" />\n                ) : (\n                  <SvgIcon\n                    name={`file-icon/${fileExtension}`}\n                    width={24}\n                  ></SvgIcon>\n                )}\n                <Button\n                  type=\"link\"\n                  className={styles.documentLink}\n                  onClick={handleDocumentButtonClick(\n                    documentId,\n                    chunkItem,\n                    fileExtension === 'pdf',\n                  )}\n                >\n                  {document?.doc_name}\n                </Button>\n              </Flex>\n            )}\n          </Space>\n        </Flex>\n      );\n    },\n    [reference, fileThumbnails, handleDocumentButtonClick],\n  );\n\n  const renderReference = useCallback(\n    (text: string) => {\n      let replacedText = reactStringReplace(text, reg, (match, i) => {\n        const chunkIndex = getChunkIndex(match);\n        return (\n          <Popover content={getPopoverContent(chunkIndex)}>\n            <InfoCircleOutlined key={i} className={styles.referenceIcon} />\n          </Popover>\n        );\n      });\n\n      replacedText = reactStringReplace(replacedText, curReg, (match, i) => (\n        <span className={styles.cursor} key={i}></span>\n      ));\n\n      return replacedText;\n    },\n    [getPopoverContent],\n  );\n\n  return (\n    <Markdown\n      rehypePlugins={[rehypeWrapReference]}\n      remarkPlugins={[remarkGfm]}\n      components={\n        {\n          'custom-typography': ({ children }: { children: string }) =>\n            renderReference(children),\n          code(props: any) {\n            const { children, className, node, ...rest } = props;\n            const match = /language-(\\w+)/.exec(className || '');\n            return match ? (\n              <SyntaxHighlighter {...rest} PreTag=\"div\" language={match[1]}>\n                {String(children).replace(/\\n$/, '')}\n              </SyntaxHighlighter>\n            ) : (\n              <code {...rest} className={className}>\n                {children}\n              </code>\n            );\n          },\n        } as any\n      }\n    >\n      {content}\n    </Markdown>\n  );\n};\n\nexport default MarkdownContent;\n","/**\r\n * @param  {String}  url\r\n * @param  {Boolean} isNoCaseSensitive 是否区分大小写\r\n * @return {Object}\r\n */\r\n// import numeral from 'numeral';\r\n\r\nimport { Base64 } from 'js-base64';\r\nimport JSEncrypt from 'jsencrypt';\r\n\r\nexport const getWidth = () => {\r\n  return { width: window.innerWidth };\r\n};\r\nexport const rsaPsw = (password: string) => {\r\n  const pub =\r\n    '-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArq9XTUSeYr2+N1h3Afl/z8Dse/2yD0ZGrKwx+EEEcdsBLca9Ynmx3nIB5obmLlSfmskLpBo0UACBmB5rEjBp2Q2f3AG3Hjd4B+gNCG6BDaawuDlgANIhGnaTLrIqWrrcm4EMzJOnAOI1fgzJRsOOUEfaS318Eq9OVO3apEyCCt0lOQK6PuksduOjVxtltDav+guVAA068NrPYmRNabVKRNLJpL8w4D44sfth5RvZ3q9t+6RTArpEtc5sh5ChzvqPOzKGMXW83C95TxmXqpbK6olN4RevSfVjEAgCydH6HN6OhtOQEcnrU97r9H0iZOWwbw3pVrZiUkuRD1R56Wzs2wIDAQAB-----END PUBLIC KEY-----';\r\n  const encryptor = new JSEncrypt();\r\n\r\n  encryptor.setPublicKey(pub);\r\n\r\n  return encryptor.encrypt(Base64.encode(password));\r\n};\r\n\r\nexport default {\r\n  getWidth,\r\n  rsaPsw,\r\n};\r\n\r\nexport const getFileExtension = (filename: string) =>\r\n  filename.slice(filename.lastIndexOf('.') + 1).toLowerCase();\r\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgAssistant = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ xmlns: \"http://www.w3.org/2000/svg\", width: 40, height: 40, viewBox: \"0 0 256 274\" }, props), /* @__PURE__ */ React.createElement(\"path\", { fill: \"#2B64CF\", d: \"M118.84 2.179c5.083-2.902 13.312-2.909 18.406 0l109.551 71.514C251.88 76.595 256 83.68 256 89.542v93.345c0 5.85-4.109 12.94-9.203 15.848l-109.551 72.55c-5.083 2.902-13.312 2.909-18.406 0L9.203 198.736C4.12 195.833 0 188.75 0 182.887V89.542c0-5.851 4.109-12.94 9.203-15.849z\" }), /* @__PURE__ */ React.createElement(\"path\", { fill: \"#FFF\", d: \"M143.107 59.955c1.056 0 1.913.857 1.913 1.913V94.28h43.227a8.61 8.61 0 0 1 8.61 8.609l-.002 33.9h5a2.87 2.87 0 0 1 2.869 2.87v28.355a2.87 2.87 0 0 1-2.87 2.87h-4.999l.001 16.984a8.61 8.61 0 0 1-8.609 8.609H68.2a8.61 8.61 0 0 1-8.61-8.61v-16.984h-5.443a2.87 2.87 0 0 1-2.87-2.87v-28.355a2.87 2.87 0 0 1 2.87-2.87h5.443v-33.9a8.61 8.61 0 0 1 8.61-8.608h68.921v-9.113l-15.4.001a1.913 1.913 0 0 1-1.913-1.913V61.868c0-1.056.856-1.913 1.913-1.913zm23.66 74.772-.036.036-10.685 10.929a3 3 0 0 1-4.242.048l-.036-.036-3.657-3.7a3 3 0 0 0-4.267 0l-3.718 3.76a3 3 0 0 0 0 4.219l11.646 11.78a3 3 0 0 0 4.274-.008l18.684-19.038a3 3 0 0 0-.008-4.21l-3.713-3.756a3 3 0 0 0-4.242-.024m-56.657 0-.036.036-10.685 10.929a3 3 0 0 1-4.242.048l-.037-.036-3.657-3.7a3 3 0 0 0-4.267 0l-3.717 3.76a3 3 0 0 0 0 4.219l11.645 11.78a3 3 0 0 0 4.243.024l.032-.032 18.684-19.038a3 3 0 0 0-.008-4.21l-3.713-3.756a3 3 0 0 0-4.242-.024\" }));\nexport { SvgAssistant as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI1NiAyNzQiPjxwYXRoIGZpbGw9IiMyQjY0Q0YiIGQ9Ik0xMTguODQgMi4xNzljNS4wODMtMi45MDIgMTMuMzEyLTIuOTA5IDE4LjQwNiAwbDEwOS41NTEgNzEuNTE0QzI1MS44OCA3Ni41OTUgMjU2IDgzLjY4IDI1NiA4OS41NDJ2OTMuMzQ1YzAgNS44NS00LjEwOSAxMi45NC05LjIwMyAxNS44NDhsLTEwOS41NTEgNzIuNTVjLTUuMDgzIDIuOTAyLTEzLjMxMiAyLjkwOS0xOC40MDYgMEw5LjIwMyAxOTguNzM2QzQuMTIgMTk1LjgzMyAwIDE4OC43NSAwIDE4Mi44ODdWODkuNTQyYzAtNS44NTEgNC4xMDktMTIuOTQgOS4yMDMtMTUuODQ5eiIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNDMuMTA3IDU5Ljk1NWMxLjA1NiAwIDEuOTEzLjg1NyAxLjkxMyAxLjkxM1Y5NC4yOGg0My4yMjdhOC42MSA4LjYxIDAgMCAxIDguNjEgOC42MDlsLS4wMDIgMzMuOWg1YTIuODcgMi44NyAwIDAgMSAyLjg2OSAyLjg3djI4LjM1NWEyLjg3IDIuODcgMCAwIDEtMi44NyAyLjg3aC00Ljk5OWwuMDAxIDE2Ljk4NGE4LjYxIDguNjEgMCAwIDEtOC42MDkgOC42MDlINjguMmE4LjYxIDguNjEgMCAwIDEtOC42MS04LjYxdi0xNi45ODRoLTUuNDQzYTIuODcgMi44NyAwIDAgMS0yLjg3LTIuODd2LTI4LjM1NWEyLjg3IDIuODcgMCAwIDEgMi44Ny0yLjg3aDUuNDQzdi0zMy45YTguNjEgOC42MSAwIDAgMSA4LjYxLTguNjA4aDY4LjkyMXYtOS4xMTNsLTE1LjQuMDAxYTEuOTEzIDEuOTEzIDAgMCAxLTEuOTEzLTEuOTEzVjYxLjg2OGMwLTEuMDU2Ljg1Ni0xLjkxMyAxLjkxMy0xLjkxM3ptMjMuNjYgNzQuNzcyLS4wMzYuMDM2LTEwLjY4NSAxMC45MjlhMyAzIDAgMCAxLTQuMjQyLjA0OGwtLjAzNi0uMDM2LTMuNjU3LTMuN2EzIDMgMCAwIDAtNC4yNjcgMGwtMy43MTggMy43NmEzIDMgMCAwIDAgMCA0LjIxOWwxMS42NDYgMTEuNzhhMyAzIDAgMCAwIDQuMjc0LS4wMDhsMTguNjg0LTE5LjAzOGEzIDMgMCAwIDAtLjAwOC00LjIxbC0zLjcxMy0zLjc1NmEzIDMgMCAwIDAtNC4yNDItLjAyNG0tNTYuNjU3IDAtLjAzNi4wMzYtMTAuNjg1IDEwLjkyOWEzIDMgMCAwIDEtNC4yNDIuMDQ4bC0uMDM3LS4wMzYtMy42NTctMy43YTMgMyAwIDAgMC00LjI2NyAwbC0zLjcxNyAzLjc2YTMgMyAwIDAgMCAwIDQuMjE5bDExLjY0NSAxMS43OGEzIDMgMCAwIDAgNC4yNDMuMDI0bC4wMzItLjAzMiAxOC42ODQtMTkuMDM4YTMgMyAwIDAgMC0uMDA4LTQuMjFsLTMuNzEzLTMuNzU2YTMgMyAwIDAgMC00LjI0Mi0uMDI0Ii8+PC9zdmc+\";\n","var map = {\n\t\"./assistant.svg\": 4159,\n\t\"./cancel.svg\": 8156,\n\t\"./chat-app-cube.svg\": 34339,\n\t\"./chat-configuration-atom.svg\": 57950,\n\t\"./chat-star.svg\": 49570,\n\t\"./chunk-method/book-01.svg\": 38726,\n\t\"./chunk-method/book-02.svg\": 21357,\n\t\"./chunk-method/book-03.svg\": 88093,\n\t\"./chunk-method/book-04.svg\": 58355,\n\t\"./chunk-method/chunk-empty.svg\": 16035,\n\t\"./chunk-method/law-01.svg\": 54530,\n\t\"./chunk-method/law-02.svg\": 75787,\n\t\"./chunk-method/manual-01.svg\": 64179,\n\t\"./chunk-method/manual-02.svg\": 40547,\n\t\"./chunk-method/manual-03.svg\": 1437,\n\t\"./chunk-method/manual-04.svg\": 81486,\n\t\"./chunk-method/media-01.svg\": 33952,\n\t\"./chunk-method/media-02.svg\": 93802,\n\t\"./chunk-method/naive-01.svg\": 88488,\n\t\"./chunk-method/naive-02.svg\": 74795,\n\t\"./chunk-method/one-01.svg\": 88533,\n\t\"./chunk-method/one-02.svg\": 99199,\n\t\"./chunk-method/one-03.svg\": 23192,\n\t\"./chunk-method/one-04.svg\": 72906,\n\t\"./chunk-method/paper-01.svg\": 64018,\n\t\"./chunk-method/paper-02.svg\": 77250,\n\t\"./chunk-method/presentation-01.svg\": 87162,\n\t\"./chunk-method/presentation-02.svg\": 59640,\n\t\"./chunk-method/qa-01.svg\": 39420,\n\t\"./chunk-method/qa-02.svg\": 55086,\n\t\"./chunk-method/resume-01.svg\": 76604,\n\t\"./chunk-method/resume-02.svg\": 96131,\n\t\"./chunk-method/table-01.svg\": 42743,\n\t\"./chunk-method/table-02.svg\": 84817,\n\t\"./delete.svg\": 71483,\n\t\"./disable.svg\": 84377,\n\t\"./enable.svg\": 8207,\n\t\"./es.svg\": 96492,\n\t\"./file-icon/aep.svg\": 83889,\n\t\"./file-icon/ai.svg\": 28897,\n\t\"./file-icon/avi.svg\": 27635,\n\t\"./file-icon/css.svg\": 52229,\n\t\"./file-icon/csv.svg\": 50747,\n\t\"./file-icon/dmg.svg\": 71691,\n\t\"./file-icon/doc.svg\": 35354,\n\t\"./file-icon/docx.svg\": 69139,\n\t\"./file-icon/eps.svg\": 43279,\n\t\"./file-icon/exe.svg\": 46462,\n\t\"./file-icon/fig.svg\": 33179,\n\t\"./file-icon/folder.svg\": 54168,\n\t\"./file-icon/gif.svg\": 73845,\n\t\"./file-icon/html.svg\": 53682,\n\t\"./file-icon/indd.svg\": 26763,\n\t\"./file-icon/java.svg\": 13916,\n\t\"./file-icon/jpeg.svg\": 19525,\n\t\"./file-icon/jpg.svg\": 24674,\n\t\"./file-icon/js.svg\": 38470,\n\t\"./file-icon/json.svg\": 56373,\n\t\"./file-icon/mkv.svg\": 49197,\n\t\"./file-icon/mp3.svg\": 44538,\n\t\"./file-icon/mp4.svg\": 52038,\n\t\"./file-icon/mpeg.svg\": 77747,\n\t\"./file-icon/pdf.svg\": 82938,\n\t\"./file-icon/png.svg\": 71915,\n\t\"./file-icon/ppt.svg\": 85173,\n\t\"./file-icon/pptx.svg\": 62133,\n\t\"./file-icon/psd.svg\": 30182,\n\t\"./file-icon/rss.svg\": 38428,\n\t\"./file-icon/sql.svg\": 78501,\n\t\"./file-icon/svg.svg\": 72515,\n\t\"./file-icon/tiff.svg\": 4502,\n\t\"./file-icon/txt.svg\": 55773,\n\t\"./file-icon/wav.svg\": 63645,\n\t\"./file-icon/webp.svg\": 87260,\n\t\"./file-icon/xls.svg\": 5343,\n\t\"./file-icon/xlsx.svg\": 41475,\n\t\"./file-icon/xml.svg\": 38476,\n\t\"./file-management.svg\": 39121,\n\t\"./knowledge-base.svg\": 87055,\n\t\"./knowledge-configration.svg\": 96450,\n\t\"./knowledge-dataset.svg\": 9385,\n\t\"./knowledge-testing.svg\": 65376,\n\t\"./llm/baichuan.svg\": 6507,\n\t\"./llm/deepseek.svg\": 23476,\n\t\"./llm/github.svg\": 29034,\n\t\"./llm/google.svg\": 93926,\n\t\"./llm/jina.svg\": 19765,\n\t\"./llm/moonshot.svg\": 98184,\n\t\"./llm/ollama.svg\": 59488,\n\t\"./llm/openai.svg\": 81459,\n\t\"./llm/tongyi.svg\": 74296,\n\t\"./llm/volc_engine.svg\": 25210,\n\t\"./llm/wenxin.svg\": 34981,\n\t\"./llm/xinference.svg\": 76577,\n\t\"./llm/zhipu.svg\": 19568,\n\t\"./login-avatars.svg\": 68683,\n\t\"./login-background.svg\": 89624,\n\t\"./login-star.svg\": 31130,\n\t\"./logout.svg\": 67487,\n\t\"./minio.svg\": 32382,\n\t\"./model-providers.svg\": 70410,\n\t\"./moon.svg\": 22350,\n\t\"./more-model.svg\": 88458,\n\t\"./more.svg\": 1333,\n\t\"./mysql.svg\": 37124,\n\t\"./navigation-pointer.svg\": 1979,\n\t\"./password.svg\": 33530,\n\t\"./profile.svg\": 1769,\n\t\"./redis.svg\": 43867,\n\t\"./refresh.svg\": 96198,\n\t\"./run.svg\": 91449,\n\t\"./select-files-end.svg\": 14387,\n\t\"./select-files-start.svg\": 16734,\n\t\"./selected-files-collapse.svg\": 40975,\n\t\"./team.svg\": 52381,\n\t\"./translation.svg\": 40724\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 78131;"],"names":["Image","_ref","id","className","props","_objectWithoutProperties","_excluded","_jsx","_objectSpread","src","concat","api_host","alt","NewDocumentLink","children","link","_ref$preventDefault","preventDefault","_ref$color","color","target","onClick","e","undefined","href","rel","style","wordBreak","importAll","requireContext","list","keys","map","key","name","replace","value","routeList","require","error","console","warn","SvgIcon","width","height","restProps","ListItem","find","item","Icon","component","useFetchDialogList","dispatch","useDispatch","fetchDialogList","useCallback","type","useSelectDialogList","dialogList","useSelector","state","chatModel","useFetchConversationList","fetchConversationList","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dialogId","wrap","_context","prev","next","payload","dialog_id","stop","_x","apply","arguments","useSelectConversationList","conversationList","useFetchConversation","fetchConversation","conversationId","needToBeSaved","length","conversation_id","useFetchDialog","fetchDialog","useRemoveDialog","removeDocument","dialogIds","dialog_ids","useUpdateConversation","updateConversation","useSetDialog","setDialog","useRemoveConversation","removeConversation","conversationIds","conversation_ids","useCompleteConversation","completeConversation","useCreateToken","createToken","useListToken","listToken","useSelectTokenList","tokenList","useRemoveToken","removeToken","useFetchStats","fetchStats","useSelectStats","stats","useCreateSharedConversation","createSharedConversation","userId","useFetchSharedConversation","fetchSharedConversation","useKnowledgeBaseId","_useSearchParams","useSearchParams","_useSearchParams2","_slicedToArray","searchParams","knowledgeBaseId","get","useDeleteDocumentById","showDeleteConfirm","useShowDeleteConfirm","documentId","doc_id","kb_id","onRmDocument","onOk","useFetchKnowledgeDetail","_useGetKnowledgeSearc","useGetKnowledgeSearchParams","knowledgeId","fetchKnowledgeDetail","useEffect","useSelectKnowledgeDetail","knowledge","knowledgeModel","useGetDocumentDefaultParser","_item$parser_id","_item$parser_config","defaultParserId","parser_id","parserConfig","parser_config","useDeleteChunkByIds","removeChunk","chunkIds","chunk_ids","onRemoveChunk","useFetchKnowledgeBaseConfiguration","fetchKnowledgeBaseConfiguration","useSelectKnowledgeList","_knowledgeModel$data","data","useFetchKnowledgeList","shouldFilterListWithoutDocument","loading","useOneNamespaceEffectsLoading","_knowledgeModel$data2","useMemo","filter","x","chunk_num","fetchList","useSelectFileThumbnails","fileThumbnails","kFModel","useFetchFileThumbnails","docIds","fetchFileThumbnails","doc_ids","join","useUpdateKnowledge","saveKnowledgeConfiguration","useSelectKnowledgeDetails","knowledgeDetails","kSModel","useTestChunkRetrieval","testChunk","values","useSelectCurrentDialog","currentDialog","useFetchDialogOnMount","visible","useSetCurrentDialog","setCurrentDialog","useResetCurrentDialog","resetCurrentDialog","useSelectPromptConfigParameters","finalParameters","_currentDialog$prompt","_currentDialog$prompt2","parameters","prompt_config","uuid","variable","optional","useDeleteDialog","onRemoveDialog","useGetChatSearchParams","currentQueryParameters","ChatSearchParams","DialogId","ConversationId","useSetCurrentConversation","setCurrentConversation","currentConversation","useClickDialogCard","_useSearchParams3","_useSearchParams4","setSearchParams","newQueryParameters","URLSearchParams","handleClickDialog","set","useSelectFirstDialogOnMount","_useClickDialogCard","sent","retcode","useHandleItemHover","_useState","useState","_useState2","activated","setActivated","handleItemEnter","handleItemLeave","useEditDialog","_useState3","_useState4","dialog","submitDialog","_useSetModalState","useSetModalState","dialogEditVisible","hideDialogEditModal","hideModal","showDialogEditModal","showModal","onDialogEditOk","_ref2","_callee2","ret","_context2","handleShowDialogEditModal","_ref3","_callee3","_context3","_x2","clearDialog","dialogSettingLoading","initialDialog","useFetchConversationListOnMount","_useGetChatSearchPara","useSelectDerivedConversationList","_currentDialog$prompt3","_currentDialog$prompt4","_useState5","_useState6","setList","_useGetChatSearchPara2","prologue","addTemporaryConversation","pre","nextList","message","content","role","MessageType","Assistant","_toConsumableArray","useClickConversationCard","_useSearchParams5","_useSearchParams6","toString","handleClickConversation","useSetConversation","_useGetChatSearchPara3","setConversation","useSelectCurrentConversation","_useState7","_useState8","conversation","_useGetChatSearchPara4","addNewestConversation","answer","User","reference","addNewestAnswer","_pre$message","latestMessage","at","slice","removeLatestMessage","info","_pre$message$slice","_pre$message2","nextMessages","addPrologue","_dialog$prompt_config","nextMessage","useScrollToBottom","ref","useRef","scrollToBottom","_ref$current","current","scrollIntoView","behavior","useFetchConversationOnMount","_useGetChatSearchPara5","_useSelectCurrentConv","fetchConversationOnMount","isConversationIdExist","useHandleMessageInputChange","_useState9","_useState10","setValue","handleInputChange","nextValue","replaceAll","useSendMessage","_useSetConversation","_useGetChatSearchPara6","_useHandleMessageInpu","_useClickConversation","_useSendMessageWithSs","useSendMessageWithSse","send","done","sendMessage","_ref4","_callee4","_conversation$message","res","_context4","messages","omit","status","_x3","_x4","handleSendMessage","_ref5","_callee5","_context5","_x5","handlePressEnter","trim","useGetFileIcon","getFileIcon","filename","ext","getFileExtension","iconPath","fileIconMap","useDeleteConversation","_useGetChatSearchPara7","_useClickConversation2","deleteConversation","_callee6","_context6","abrupt","onRemoveConversation","useRenameConversation","_useState11","_useState12","_useSetModalState2","conversationRenameVisible","hideConversationRenameModal","showConversationRenameModal","onConversationRenameOk","_ref7","_callee7","_context7","_x6","handleShowConversationRenameModal","_ref8","_callee8","_context8","_x7","conversationRenameLoading","initialConversationName","useClickDrawer","_useSetModalState3","_useState13","_useState14","selectedChunk","setSelectedChunk","_useState15","_useState16","setDocumentId","clickDocumentButton","chunk","useSelectDialogListLoading","useSelectConversationListLoading","useSelectConversationLoading","useGetSendButtonDisabled","_useGetChatSearchPara8","getDay","date","format","useFetchStatsOnMount","_useState17","dayjs","subtract","_useState18","pickerValue","setPickerValue","Array","isArray","_pickerValue$","fromDate","toDate","useOperateApiKey","creatingLoading","listLoading","onRemoveToken","token","tenantId","tokens","useSelectChartStatsList","Object","reduce","cur","xAxis","yAxis","useShowTokenEmptyError","_message$useMessage","useMessage","_message$useMessage2","messageApi","contextHolder","_useTranslate","useTranslate","t","showTokenEmptyError","getUrlWithToken","_window$location","window","location","protocol","host","useFetchTokenListBeforeOtherStep","_useShowTokenEmptyErr","handleOperate","_callee9","_list$","_context9","useShowEmbedModal","_useSetModalState4","embedVisible","hideEmbedModal","showEmbedModal","_useFetchTokenListBef","handleShowEmbedModal","_callee10","succeed","_context10","embedToken","errorContextHolder","usePreviewChat","_useFetchTokenListBef2","open","handlePreview","_callee11","_context11","reg","curReg","getChunkIndex","match","Number","MarkdownContent","handleDocumentButtonClick","isPdf","rehypeWrapReference","tree","visitParents","node","ancestors","latestAncestor","tagName","properties","getPopoverContent","chunkIndex","_reference$chunks","_reference$doc_aggs","chunks","chunkItem","document","doc_aggs","fileThumbnail","fileExtension","getExtension","doc_name","imageId","img_id","_jsxs","Flex","gap","styles","referencePopoverWrapper","Popover","placement","referenceImagePreview","referenceChunkImage","Space","direction","dangerouslySetInnerHTML","__html","content_with_weight","chunkContentText","Button","documentLink","chunk_id","renderReference","text","replacedText","reactStringReplace","i","InfoCircleOutlined","referenceIcon","cursor","Markdown","rehypePlugins","remarkPlugins","remarkGfm","components","code","rest","exec","SyntaxHighlighter","PreTag","language","String","getWidth","innerWidth","rsaPsw","password","pub","encryptor","JSEncrypt","setPublicKey","encrypt","Base64","encode","lastIndexOf","toLowerCase","__defProp","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","obj","__spreadValues","a","b","prop","SvgAssistant","webpackContext","req","webpackContextResolve","__webpack_require__","module"],"sourceRoot":""}