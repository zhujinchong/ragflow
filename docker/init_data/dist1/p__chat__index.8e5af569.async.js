(self.webpackChunk=self.webpackChunk||[]).push([[8301],{96449:function(Te,re,t){"use strict";t.d(re,{s:function(){return k}});var se=t(15009),S=t.n(se),l=t(99289),w=t.n(l),oe=t(5574),z=t.n(oe),D=t(5121),te=t(62435),k=function($){var ne=(0,te.useState)(""),J=z()(ne,2),Ie=J[0],ge=J[1],pe=(0,te.useCallback)(w()(S()().mark(function de(){var B,s;return S()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,D.Z.get($);case 2:B=ae.sent,s=B.data,s.retcode!==0&&ge(s==null?void 0:s.retmsg);case 5:case"end":return ae.stop()}},de)})),[$]);return(0,te.useEffect)(function(){pe()},[pe]),Ie}},77567:function(Te,re,t){"use strict";var se=t(96330),S=t(2039),l=t(11754),w=t(99859),oe=t(20652),z=t(71338),D=t(86074),te=function(){var $=(0,S.qM)("knowledgeDetails"),ne=$.t,J=(0,l.hl)();return(0,D.jsx)(w.Z.Item,{label:ne("rerankModel"),name:"rerank_id",tooltip:ne("rerankTip"),children:(0,D.jsx)(oe.Z,{options:J[se.Vr.Rerank],allowClear:!0,placeholder:ne("rerankPlaceholder")})})},k=function(){var $=(0,S.qM)("knowledgeDetails"),ne=$.t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(te,{}),(0,D.jsx)(w.Z.Item,{noStyle:!0,dependencies:["rerank_id"],children:function(Ie){var ge=Ie.getFieldValue,pe=ge("rerank_id");return pe&&(0,D.jsx)(w.Z.Item,{label:ne("topK"),name:"top_k",initialValue:1024,tooltip:ne("topKTip"),children:(0,D.jsx)(z.Z,{max:2048,min:1})})}})]})};re.Z=k},32739:function(Te,re,t){"use strict";var se=t(2039),S=t(99859),l=t(71338),w=t(86074),oe=function(D){var te=D.isTooltipShown,k=te===void 0?!1:te,V=(0,se.qM)("knowledgeDetails"),$=V.t;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(S.Z.Item,{label:$("similarityThreshold"),name:"similarity_threshold",tooltip:k&&$("similarityThresholdTip"),initialValue:.2,children:(0,w.jsx)(l.Z,{max:1,step:.01})}),(0,w.jsx)(S.Z.Item,{label:$("vectorSimilarityWeight"),name:"vector_similarity_weight",initialValue:1-.3,tooltip:k&&$("vectorSimilarityWeightTip"),children:(0,w.jsx)(l.Z,{max:1,step:.01})})]})};re.Z=oe},11754:function(Te,re,t){"use strict";t.d(re,{Ju:function(){return e},OR:function(){return xe},SL:function(){return de},at:function(){return $},hl:function(){return Ie},ki:function(){return B},mT:function(){return J},uZ:function(){return ae},ux:function(){return s}});var se=t(97857),S=t.n(se),l=t(9783),w=t.n(l),oe=t(5574),z=t.n(oe),D=t(96330),te=t(52043),k=t(62435),V=t(6589),$=function(b){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=(0,V.useDispatch)(),H=(0,k.useCallback)(function(){R({type:"settingModel/llm_list",payload:{model_type:b}})},[R,b]);return(0,k.useEffect)(function(){C&&H()},[H,C]),H},ne=function(){var b=(0,V.useSelector)(function(C){return C.settingModel.llmInfo});return b},J=function(){var b=ne(),C=(0,k.useMemo)(function(){return Object.entries(b).map(function(R){var H=z()(R,2),ie=H[0],U=H[1];return{label:ie,options:U.map(function(j){return{label:j.llm_name,value:j.llm_name,disabled:!j.available}})}})},[b]);return C},Ie=function(){var b=ne(),C=function(H){return Object.entries(b).filter(function(ie){var U=z()(ie,2),j=U[1];return H?j.some(function(G){return G.model_type.includes(H)}):!0}).map(function(ie){var U=z()(ie,2),j=U[0],G=U[1];return{label:j,options:G.filter(function(q){return H?q.model_type.includes(H):!0}).map(function(q){return{label:q.llm_name,value:q.llm_name,disabled:!q.available}})}})};return w()(w()(w()(w()(w()({},D.Vr.Chat,C(D.Vr.Chat)),D.Vr.Embedding,C(D.Vr.Embedding)),D.Vr.Image2text,C(D.Vr.Image2text)),D.Vr.Speech2text,C(D.Vr.Speech2text)),D.Vr.Rerank,C(D.Vr.Rerank))},ge=function(){var b=(0,V.useSelector)(function(C){return C.settingModel.factoryList});return b},pe=function(){var b=(0,V.useSelector)(function(C){return C.settingModel.myLlmList});return b},de=function(){var b=(0,V.useDispatch)(),C=ge(),R=pe(),H=(0,k.useMemo)(function(){var U=C.filter(function(j){return Object.keys(R).every(function(G){return G!==j.name})});return(0,te.tJ)(U)},[C,R]),ie=(0,k.useCallback)(function(){b({type:"settingModel/factories_list"})},[b]);return(0,k.useEffect)(function(){ie()},[ie]),H},B=function(){var b=(0,V.useDispatch)(),C=pe(),R=ge(),H=(0,k.useMemo)(function(){return Object.entries(C).map(function(U){var j,G,q=z()(U,2),De=q[0],Ce=q[1];return S()({name:De,logo:(j=(G=R.find(function(we){return we.name===De}))===null||G===void 0?void 0:G.logo)!==null&&j!==void 0?j:""},Ce)})},[C,R]),ie=(0,k.useCallback)(function(){b({type:"settingModel/my_llm"})},[b]);return(0,k.useEffect)(function(){ie()},[ie]),H},s=function(){var b=(0,V.useDispatch)(),C=(0,k.useCallback)(function(R){return b({type:"settingModel/set_api_key",payload:R})},[b]);return C},xe=function(){var b=(0,V.useDispatch)(),C=(0,k.useCallback)(function(R){return b({type:"settingModel/set_tenant_info",payload:R})},[b]);return C},ae=function(){var b=(0,V.useDispatch)(),C=(0,k.useCallback)(function(R){return b({type:"settingModel/add_llm",payload:R})},[b]);return C},e=function(){var b=(0,V.useDispatch)(),C=(0,k.useCallback)(function(R){return b({type:"settingModel/delete_llm",payload:R})},[b]);return C}},2518:function(Te,re,t){"use strict";t.r(re),t.d(re,{default:function(){return Kn}});var se=t(9783),S=t.n(se),l=t(62435),w=Object.defineProperty,oe=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,te=(m,n,a)=>n in m?w(m,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[n]=a,k=(m,n)=>{for(var a in n||(n={}))z.call(n,a)&&te(m,a,n[a]);if(oe)for(var a of oe(n))D.call(n,a)&&te(m,a,n[a]);return m};const V=m=>l.createElement("svg",k({width:15,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},m),l.createElement("path",{d:"m6.188 12.104.859.478c.165.092.248.138.335.156a.581.581 0 0 0 .236 0c.087-.018.17-.064.335-.156l.86-.478m-5.25-1.458-.833-.462c-.175-.097-.262-.146-.326-.215a.583.583 0 0 1-.125-.212c-.029-.09-.029-.19-.029-.39V8.46m0-2.917v-.91c0-.199 0-.299.03-.388a.583.583 0 0 1 .124-.212c.064-.07.151-.118.326-.215l.833-.463m2.624-1.458.86-.477c.165-.092.248-.138.335-.156a.583.583 0 0 1 .236 0c.087.018.17.064.335.156l.86.477m2.624 1.458.833.463c.175.097.262.146.326.215a.584.584 0 0 1 .125.212c.029.089.029.189.029.389v.909m0 2.917v.909c0 .2 0 .3-.03.389a.584.584 0 0 1-.124.212c-.064.07-.151.118-.326.215l-.832.462m-5.25-4.375 1.312.73m0 0 1.313-.73m-1.313.73v1.458M2.25 4.084l1.313.729m7.874 0 1.313-.73M7.5 11.376v1.459",stroke:"#A5A3A9",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}));var $="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYuMTg4IDEyLjEwNC44NTkuNDc4Yy4xNjUuMDkyLjI0OC4xMzguMzM1LjE1NmEuNTgxLjU4MSAwIDAgMCAuMjM2IDBjLjA4Ny0uMDE4LjE3LS4wNjQuMzM1LS4xNTZsLjg2LS40NzhtLTUuMjUtMS40NTgtLjgzMy0uNDYyYy0uMTc1LS4wOTctLjI2Mi0uMTQ2LS4zMjYtLjIxNWEuNTgzLjU4MyAwIDAgMS0uMTI1LS4yMTJjLS4wMjktLjA5LS4wMjktLjE5LS4wMjktLjM5VjguNDZtMC0yLjkxN3YtLjkxYzAtLjE5OSAwLS4yOTkuMDMtLjM4OGEuNTgzLjU4MyAwIDAgMSAuMTI0LS4yMTJjLjA2NC0uMDcuMTUxLS4xMTguMzI2LS4yMTVsLjgzMy0uNDYzbTIuNjI0LTEuNDU4Ljg2LS40NzdjLjE2NS0uMDkyLjI0OC0uMTM4LjMzNS0uMTU2YS41ODMuNTgzIDAgMCAxIC4yMzYgMGMuMDg3LjAxOC4xNy4wNjQuMzM1LjE1NmwuODYuNDc3bTIuNjI0IDEuNDU4LjgzMy40NjNjLjE3NS4wOTcuMjYyLjE0Ni4zMjYuMjE1YS41ODQuNTg0IDAgMCAxIC4xMjUuMjEyYy4wMjkuMDg5LjAyOS4xODkuMDI5LjM4OXYuOTA5bTAgMi45MTd2LjkwOWMwIC4yIDAgLjMtLjAzLjM4OWEuNTg0LjU4NCAwIDAgMS0uMTI0LjIxMmMtLjA2NC4wNy0uMTUxLjExOC0uMzI2LjIxNWwtLjgzMi40NjJtLTUuMjUtNC4zNzUgMS4zMTIuNzNtMCAwIDEuMzEzLS43M20tMS4zMTMuNzN2MS40NThNMi4yNSA0LjA4NGwxLjMxMy43MjltNy44NzQgMCAxLjMxMy0uNzNNNy41IDExLjM3NnYxLjQ1OSIgc3Ryb2tlPSIjQTVBM0E5IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+",ne=t(15009),J=t.n(ne),Ie=t(99289),ge=t.n(Ie),pe=t(5574),de=t.n(pe),B=t(2039),s=t(99859),xe=t(85576),ae=t(79531),e=t(86074),ce=function(n){var a=n.visible,d=n.hideModal,i=n.loading,v=n.initialName,o=n.onOk,r=s.Z.useForm(),x=de()(r,1),M=x[0],u=(0,B.qM)("common"),c=u.t,p=function(){var y=ge()(J()().mark(function I(){var L;return J()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,M.validateFields();case 2:return L=g.sent,g.abrupt("return",o(L.name));case 4:case"end":return g.stop()}},I)}));return function(){return y.apply(this,arguments)}}(),h=function(){d()},f=function(I){console.log("Success:",I)},E=function(I){console.log("Failed:",I)};return(0,l.useEffect)(function(){a&&M.setFieldValue("name",v)},[v,M,a]),(0,e.jsx)(xe.Z,{title:c("rename"),open:a,onOk:p,onCancel:h,okButtonProps:{loading:i},confirmLoading:i,children:(0,e.jsx)(s.Z,{name:"basic",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},onFinish:f,onFinishFailed:E,autoComplete:"off",form:M,children:(0,e.jsx)(s.Z.Item,{label:c("name"),name:"name",rules:[{required:!0,message:c("namePlaceholder")}],children:(0,e.jsx)(ae.Z,{})})})})},b=ce,C=t(24969),R=t(86548),H=t(48689),ie=t(22850),U=t(42075),j=t(86250),G=t(15867),q=t(96074),De=t(75081),Ce=t(4393),we=t(7134),Ve=t(85418),ht=t(66309),gt=t(93967),je=t.n(gt),pt=t(97857),N=t.n(pt),jt=t(19632),Pe=t.n(jt),ft=Object.defineProperty,Xe=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,$e=(m,n,a)=>n in m?ft(m,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[n]=a,yt=(m,n)=>{for(var a in n||(n={}))xt.call(n,a)&&$e(m,a,n[a]);if(Xe)for(var a of Xe(n))Mt.call(n,a)&&$e(m,a,n[a]);return m};const It=m=>l.createElement("svg",yt({width:52,height:52,fill:"none",xmlns:"http://www.w3.org/2000/svg"},m),l.createElement("g",{filter:"url(#chat-configuration-atom_svg__a)"},l.createElement("path",{d:"M2.5 11A9.5 9.5 0 0 1 12 1.5h28a9.5 9.5 0 0 1 9.5 9.5v28a9.5 9.5 0 0 1-9.5 9.5H12A9.5 9.5 0 0 1 2.5 39V11Z",stroke:"#EAECF0",shapeRendering:"crispEdges"}),l.createElement("path",{d:"M26 25h.01m3.525 3.535c-4.686 4.686-10.068 6.903-12.02 4.95-1.953-1.953.263-7.335 4.949-12.02 4.686-4.687 10.068-6.903 12.02-4.95 1.953 1.952-.263 7.334-4.949 12.02Zm0-7.071c4.686 4.686 6.902 10.068 4.95 12.02-1.953 1.953-7.335-.263-12.021-4.949-4.686-4.686-6.902-10.068-4.95-12.02 1.953-1.953 7.335.263 12.021 4.949ZM26.5 25a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",stroke:"#344054",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),l.createElement("defs",null,l.createElement("filter",{id:"chat-configuration-atom_svg__a",x:0,y:0,width:52,height:52,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},l.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),l.createElement("feOffset",{dy:1}),l.createElement("feGaussianBlur",{stdDeviation:1}),l.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),l.createElement("feColorMatrix",{values:"0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.05 0"}),l.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_550_8026"}),l.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_550_8026",result:"shape"}))));var ga="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsdGVyPSJ1cmwoI2EpIj48cGF0aCBkPSJNMi41IDExQTkuNSA5LjUgMCAwIDEgMTIgMS41aDI4YTkuNSA5LjUgMCAwIDEgOS41IDkuNXYyOGE5LjUgOS41IDAgMCAxLTkuNSA5LjVIMTJBOS41IDkuNSAwIDAgMSAyLjUgMzlWMTFaIiBzdHJva2U9IiNFQUVDRjAiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwYXRoIGQ9Ik0yNiAyNWguMDFtMy41MjUgMy41MzVjLTQuNjg2IDQuNjg2LTEwLjA2OCA2LjkwMy0xMi4wMiA0Ljk1LTEuOTUzLTEuOTUzLjI2My03LjMzNSA0Ljk0OS0xMi4wMiA0LjY4Ni00LjY4NyAxMC4wNjgtNi45MDMgMTIuMDItNC45NSAxLjk1MyAxLjk1Mi0uMjYzIDcuMzM0LTQuOTQ5IDEyLjAyWm0wLTcuMDcxYzQuNjg2IDQuNjg2IDYuOTAyIDEwLjA2OCA0Ljk1IDEyLjAyLTEuOTUzIDEuOTUzLTcuMzM1LS4yNjMtMTIuMDIxLTQuOTQ5LTQuNjg2LTQuNjg2LTYuOTAyLTEwLjA2OC00Ljk1LTEyLjAyIDEuOTUzLTEuOTUzIDcuMzM1LjI2MyAxMi4wMjEgNC45NDlaTTI2LjUgMjVhLjUuNSAwIDEgMS0xIDAgLjUuNSAwIDAgMSAxIDBaIiBzdHJva2U9IiMzNDQwNTQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9nPjxkZWZzPjxmaWx0ZXIgaWQ9ImEiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSI1MiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPjxmZU9mZnNldCBkeT0iMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiLz48ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz48ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC4wNjI3NDUxIDAgMCAwIDAgMC4wOTQxMTc2IDAgMCAwIDAgMC4xNTY4NjMgMCAwIDAgMC4wNSAwIi8+PGZlQmxlbmQgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzU1MF84MDI2Ii8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzU1MF84MDI2IiByZXN1bHQ9InNoYXBlIi8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPg==",Se=t(96330),Ct=t(92783),Lt=t(68929),Be=t.n(Lt),bt=t(57557),Et=t.n(bt),He=t(90104),Je=t(35293),qe=t(82182),Zt=t(31365),Re=t(20652),Le=t(72269),F={chatConfigurationDescription:"chatConfigurationDescription___Marto",variableContainer:"variableContainer___Y8OCn",variableAlign:"variableAlign___V0wtR",variableLabel:"variableLabel___lux8o",variableIcon:"variableIcon___aAfD2",variableTable:"variableTable___q3ddB",editableRow:"editableRow____LyFZ",segmentedHidden:"segmentedHidden___jWNN7",sliderInputNumber:"sliderInputNumber___cS3d6",variableSlider:"variableSlider___l0sWn"},Tt=function(n){var a=n.show,d=(0,qe.VJ)(!0),i=d.list,v=i.map(function(u){return{label:u.name,value:u.id}}),o=(0,B.qM)("chat"),r=o.t,x=function(c){return Array.isArray(c)?c:c==null?void 0:c.fileList},M=(0,e.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,e.jsx)(C.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:r("upload",{keyPrefix:"common"})})]});return(0,e.jsxs)("section",{className:je()(S()({},F.segmentedHidden,!a)),children:[(0,e.jsx)(s.Z.Item,{name:"name",label:r("assistantName"),rules:[{required:!0,message:r("assistantNameMessage")}],children:(0,e.jsx)(ae.Z,{placeholder:r("namePlaceholder")})}),(0,e.jsx)(s.Z.Item,{name:"icon",label:r("assistantAvatar"),valuePropName:"fileList",getValueFromEvent:x,children:(0,e.jsx)(Zt.Z,{listType:"picture-card",maxCount:1,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!1},children:a?M:null})}),(0,e.jsx)(s.Z.Item,{name:"language",label:r("language"),initialValue:"English",tooltip:"coming soon",style:{display:"none"},children:(0,e.jsx)(Re.Z,{options:[{value:"Chinese",label:r("chinese",{keyPrefix:"common"})},{value:"English",label:r("english",{keyPrefix:"common"})}]})}),(0,e.jsx)(s.Z.Item,{name:["prompt_config","empty_response"],label:r("emptyResponse"),tooltip:r("emptyResponseTip"),children:(0,e.jsx)(ae.Z,{placeholder:""})}),(0,e.jsx)(s.Z.Item,{name:["prompt_config","prologue"],label:r("setAnOpener"),tooltip:r("setAnOpenerTip"),initialValue:r("setAnOpenerInitial"),children:(0,e.jsx)(ae.Z.TextArea,{autoSize:{minRows:5}})}),(0,e.jsx)(s.Z.Item,{label:r("quote"),valuePropName:"checked",name:["prompt_config","quote"],tooltip:r("quoteTip"),initialValue:!0,children:(0,e.jsx)(Le.Z,{})}),(0,e.jsx)(s.Z.Item,{label:r("knowledgeBases"),name:"kb_ids",tooltip:r("knowledgeBasesTip"),rules:[{required:!0,message:r("knowledgeBasesMessage"),type:"array"}],children:(0,e.jsx)(Re.Z,{mode:"multiple",options:v,placeholder:r("knowledgeBasesMessage")})})]})},Dt=Tt,et=t(11754),Ge=t(79495),St=function(n){var a,d=(0,Ge.fS)(!1),i=(0,Ge.Zl)();return(0,l.useEffect)(function(){n&&d()},[n,d]),(a=i==null?void 0:i.llm_id)!==null&&a!==void 0?a:""},_t=function(n){var a=(0,et.at)();(0,l.useEffect)(function(){n&&a()},[a,n])},_e=t(71338),Oe=t(48928),At=function(n){var a=n.show,d=n.form,i=n.initialLlmSetting,v=n.visible,o=(0,B.qM)("chat"),r=o.t,x=Object.values(Se.oQ).map(function(c){return{label:r(Be()(c)),value:c}}),M=(0,et.hl)(),u=function(p){var h=Se.S8[p];d.setFieldsValue({llm_setting:h})};return(0,l.useEffect)(function(){if(v){var c=Object.keys(He.vv).reduce(function(p,h){return p[h]=i===void 0?!0:!!i[He.vv[h]],p},{});d.setFieldsValue(c)}},[d,i,v]),(0,e.jsxs)("section",{className:je()(S()({},F.segmentedHidden,!a)),children:[(0,e.jsx)(s.Z.Item,{label:r("model"),name:"llm_id",tooltip:r("modelTip"),rules:[{required:!0,message:r("modelMessage")}],children:(0,e.jsx)(Re.Z,{options:M[Se.Vr.Chat],showSearch:!0})}),(0,e.jsx)(q.Z,{}),(0,e.jsx)(s.Z.Item,{label:r("freedom"),name:"parameters",tooltip:r("freedomTip"),initialValue:Se.oQ.Precise,children:(0,e.jsx)(Re.Z,{options:x,onChange:u})}),(0,e.jsx)(s.Z.Item,{label:r("temperature"),tooltip:r("temperatureTip"),children:(0,e.jsxs)(j.Z,{gap:20,align:"center",children:[(0,e.jsx)(s.Z.Item,{name:"temperatureEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Le.Z,{size:"small"})}),(0,e.jsx)(s.Z.Item,{noStyle:!0,dependencies:["temperatureEnabled"],children:function(p){var h=p.getFieldValue,f=!h("temperatureEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{flex:1,children:(0,e.jsx)(s.Z.Item,{name:["llm_setting","temperature"],noStyle:!0,children:(0,e.jsx)(_e.Z,{className:F.variableSlider,max:1,step:.01,disabled:f})})}),(0,e.jsx)(s.Z.Item,{name:["llm_setting","temperature"],noStyle:!0,children:(0,e.jsx)(Oe.Z,{className:F.sliderInputNumber,max:1,min:0,step:.01,disabled:f})})]})}})]})}),(0,e.jsx)(s.Z.Item,{label:r("topP"),tooltip:r("topPTip"),children:(0,e.jsxs)(j.Z,{gap:20,align:"center",children:[(0,e.jsx)(s.Z.Item,{name:"topPEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Le.Z,{size:"small"})}),(0,e.jsx)(s.Z.Item,{noStyle:!0,dependencies:["topPEnabled"],children:function(p){var h=p.getFieldValue,f=!h("topPEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{flex:1,children:(0,e.jsx)(s.Z.Item,{name:["llm_setting","top_p"],noStyle:!0,children:(0,e.jsx)(_e.Z,{className:F.variableSlider,max:1,step:.01,disabled:f})})}),(0,e.jsx)(s.Z.Item,{name:["llm_setting","top_p"],noStyle:!0,children:(0,e.jsx)(Oe.Z,{className:F.sliderInputNumber,max:1,min:0,step:.01,disabled:f})})]})}})]})}),(0,e.jsx)(s.Z.Item,{label:r("presencePenalty"),tooltip:r("presencePenaltyTip"),children:(0,e.jsxs)(j.Z,{gap:20,align:"center",children:[(0,e.jsx)(s.Z.Item,{name:"presencePenaltyEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Le.Z,{size:"small"})}),(0,e.jsx)(s.Z.Item,{noStyle:!0,dependencies:["presencePenaltyEnabled"],children:function(p){var h=p.getFieldValue,f=!h("presencePenaltyEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{flex:1,children:(0,e.jsx)(s.Z.Item,{name:["llm_setting","presence_penalty"],noStyle:!0,children:(0,e.jsx)(_e.Z,{className:F.variableSlider,max:1,step:.01,disabled:f})})}),(0,e.jsx)(s.Z.Item,{name:["llm_setting","presence_penalty"],noStyle:!0,children:(0,e.jsx)(Oe.Z,{className:F.sliderInputNumber,max:1,min:0,step:.01,disabled:f})})]})}})]})}),(0,e.jsx)(s.Z.Item,{label:r("frequencyPenalty"),tooltip:r("frequencyPenaltyTip"),children:(0,e.jsxs)(j.Z,{gap:20,align:"center",children:[(0,e.jsx)(s.Z.Item,{name:"frequencyPenaltyEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Le.Z,{size:"small"})}),(0,e.jsx)(s.Z.Item,{noStyle:!0,dependencies:["frequencyPenaltyEnabled"],children:function(p){var h=p.getFieldValue,f=!h("frequencyPenaltyEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{flex:1,children:(0,e.jsx)(s.Z.Item,{name:["llm_setting","frequency_penalty"],noStyle:!0,children:(0,e.jsx)(_e.Z,{className:F.variableSlider,max:1,step:.01,disabled:f})})}),(0,e.jsx)(s.Z.Item,{name:["llm_setting","frequency_penalty"],noStyle:!0,children:(0,e.jsx)(Oe.Z,{className:F.sliderInputNumber,max:1,min:0,step:.01,disabled:f})})]})}})]})}),(0,e.jsx)(s.Z.Item,{label:r("maxTokens"),tooltip:r("maxTokensTip"),children:(0,e.jsxs)(j.Z,{gap:20,align:"center",children:[(0,e.jsx)(s.Z.Item,{name:"maxTokensEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Le.Z,{size:"small"})}),(0,e.jsx)(s.Z.Item,{noStyle:!0,dependencies:["maxTokensEnabled"],children:function(p){var h=p.getFieldValue,f=!h("maxTokensEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{flex:1,children:(0,e.jsx)(s.Z.Item,{name:["llm_setting","max_tokens"],noStyle:!0,children:(0,e.jsx)(_e.Z,{className:F.variableSlider,max:2048,disabled:f})})}),(0,e.jsx)(s.Z.Item,{name:["llm_setting","max_tokens"],noStyle:!0,children:(0,e.jsx)(Oe.Z,{disabled:f,className:F.sliderInputNumber,max:2048,min:0})})]})}})]})})]})},Nt=At,Pt=t(32739),Ot=t(25035),tt=t(71230),Ue=t(15746),nt=t(83062),at=t(41978),kt=t(57632),wt=t(13769),Ke=t.n(wt),Rt=["index"],Ut=["title","editable","children","dataIndex","record","handleSave"],rt=l.createContext(null),Wt=function(n){var a=n.index,d=Ke()(n,Rt),i=s.Z.useForm(),v=de()(i,1),o=v[0];return(0,e.jsx)(s.Z,{form:o,component:!1,children:(0,e.jsx)(rt.Provider,{value:o,children:(0,e.jsx)("tr",N()({},d))})})},Ft=function(n){var a=n.title,d=n.editable,i=n.children,v=n.dataIndex,o=n.record,r=n.handleSave,x=Ke()(n,Ut),M=(0,l.useState)(!1),u=de()(M,2),c=u[0],p=u[1],h=(0,l.useRef)(null),f=(0,l.useContext)(rt);(0,l.useEffect)(function(){c&&h.current.focus()},[c]);var E=function(){p(!c),f.setFieldsValue(S()({},v,o[v]))},y=function(){var L=ge()(J()().mark(function Z(){var g;return J()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,f.validateFields();case 3:g=_.sent,E(),r(N()(N()({},o),g)),_.next=11;break;case 8:_.prev=8,_.t0=_.catch(0),console.log("Save failed:",_.t0);case 11:case"end":return _.stop()}},Z,null,[[0,8]])}));return function(){return L.apply(this,arguments)}}(),I=i;return d&&(I=c?(0,e.jsx)(s.Z.Item,{style:{margin:0},name:v,rules:[{required:!0,message:"".concat(a," is required.")}],children:(0,e.jsx)(ae.Z,{ref:h,onPressEnter:y,onBlur:y})}):(0,e.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:E,children:i})),(0,e.jsx)("td",N()(N()({},x),{},{children:I}))},zt=t(77567),A=t(41923),Vt=function(n,a){var d=n.show,i=(0,l.useState)([]),v=de()(i,2),o=v[0],r=v[1],x=(0,A.GI)(),M=(0,B.qM)("chat"),u=M.t,c={body:{row:Wt,cell:Ft}},p=function(L){return function(){var Z=o.filter(function(g){return g.key!==L});r(Z)}},h=function(L){var Z=Pe()(o),g=Z.findIndex(function(_){return L.key===_.key}),K=Z[g];Z.splice(g,1,N()(N()({},K),L)),r(Z)},f=function(){r(function(L){return[].concat(Pe()(L),[{key:(0,kt.Z)(),variable:"",optional:!0}])})},E=function(L){return function(Z){var g=Pe()(o),K=g.findIndex(function(le){return L.key===le.key}),_=g[K];g.splice(K,1,N()(N()({},_),{},{optional:Z})),r(g)}};(0,l.useImperativeHandle)(a,function(){return o.filter(function(I){return I.variable.trim()!==""}).map(function(I){return{key:I.variable,optional:I.optional}})},[o]);var y=[{title:u("key"),dataIndex:"variable",key:"variable",onCell:function(L){return{record:L,editable:!0,dataIndex:"variable",title:"key",handleSave:h}}},{title:u("optional"),dataIndex:"optional",key:"optional",width:40,align:"center",render:function(L,Z){return(0,e.jsx)(Le.Z,{size:"small",checked:L,onChange:E(Z)})}},{title:u("operation"),dataIndex:"operation",width:30,key:"operation",align:"center",render:function(L,Z){return(0,e.jsx)(H.Z,{onClick:p(Z.key)})}}];return(0,l.useEffect)(function(){r(x)},[x]),(0,e.jsxs)("section",{className:je()(S()({},F.segmentedHidden,!d)),children:[(0,e.jsx)(s.Z.Item,{label:u("system"),rules:[{required:!0,message:u("systemMessage")}],tooltip:u("systemTip"),name:["prompt_config","system"],initialValue:u("systemInitialValue"),children:(0,e.jsx)(ae.Z.TextArea,{autoSize:{maxRows:8,minRows:5}})}),(0,e.jsx)(q.Z,{}),(0,e.jsx)(Pt.Z,{isTooltipShown:!0}),(0,e.jsx)(s.Z.Item,{label:u("topN"),name:"top_n",initialValue:8,tooltip:u("topNTip"),children:(0,e.jsx)(_e.Z,{max:30})}),(0,e.jsx)(zt.Z,{}),(0,e.jsxs)("section",{className:je()(F.variableContainer),children:[(0,e.jsxs)(tt.Z,{align:"middle",justify:"end",children:[(0,e.jsx)(Ue.Z,{span:9,className:F.variableAlign,children:(0,e.jsxs)("label",{className:F.variableLabel,children:[u("variable"),(0,e.jsx)(nt.Z,{title:u("variableTip"),children:(0,e.jsx)(Ot.Z,{className:F.variableIcon})})]})}),(0,e.jsx)(Ue.Z,{span:15,className:F.variableAlign,children:(0,e.jsx)(G.ZP,{size:"small",onClick:f,children:u("add")})})]}),o.length>0&&(0,e.jsxs)(tt.Z,{children:[(0,e.jsx)(Ue.Z,{span:7,children:" "}),(0,e.jsx)(Ue.Z,{span:17,children:(0,e.jsx)(at.Z,{dataSource:o,columns:y,rowKey:"key",className:F.variableTable,components:c,rowClassName:function(){return F.editableRow}})})]})]})]})},Bt=(0,l.forwardRef)(Vt),Ht={labelCol:{span:9},wrapperCol:{span:15}},Gt={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},Me=function(m){return m.AssistantSetting="Assistant Setting",m.PromptEngine="Prompt Engine",m.ModelSetting="Model Setting",m}(Me||{}),Kt=S()(S()(S()({},Me.AssistantSetting,Dt),Me.ModelSetting,Nt),Me.PromptEngine,Bt),Yt=function(n){var a=n.visible,d=n.hideModal,i=n.initialDialog,v=n.loading,o=n.onOk,r=n.clearDialog,x=s.Z.useForm(),M=de()(x,1),u=M[0],c=(0,l.useState)(Me.AssistantSetting),p=de()(c,2),h=p[0],f=p[1],E=(0,l.useRef)([]),y=St(a),I=(0,B.qM)("chat"),L=I.t,Z=function(){var P=ge()(J()().mark(function Q(){var X,me,he,fe,Ne,ve,Fe,ze;return J()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,u.validateFields();case 2:he=be.sent,fe=Et()(he,[].concat(Pe()(Object.keys(He.vv)),["parameters"],Pe()((0,Je.kP)(he)))),Ne=(X=(me=fe.prompt_config)===null||me===void 0?void 0:me.empty_response)!==null&&X!==void 0?X:"",ve=he.icon,Array.isArray(ve)&&ve.length>0&&(Fe=ve[0].thumbUrl),ze=N()(N()({dialog_id:i.id},fe),{},{vector_similarity_weight:1-fe.vector_similarity_weight,prompt_config:N()(N()({},fe.prompt_config),{},{parameters:E.current,empty_response:Ne}),icon:Fe}),o(ze);case 9:case"end":return be.stop()}},Q)}));return function(){return P.apply(this,arguments)}}(),g=function(){d()},K=function(Q){f(Q)},_=function(){r(),u.resetFields()};_t(a);var le=(0,e.jsxs)(j.Z,{gap:16,children:[(0,e.jsx)(It,{}),(0,e.jsxs)("div",{children:[(0,e.jsx)("b",{children:L("chatConfiguration")}),(0,e.jsx)("div",{className:F.chatConfigurationDescription,children:L("chatConfigurationDescription")})]})]});return(0,l.useEffect)(function(){if(a){var P,Q,X,me=i.icon,he=[];me&&(he=[{uid:"1",name:"file",thumbUrl:me,status:"done"}]),u.setFieldsValue(N()(N()({},i),{},{llm_setting:(P=i.llm_setting)!==null&&P!==void 0?P:Se.S8[Se.oQ.Precise],icon:he,llm_id:(Q=i.llm_id)!==null&&Q!==void 0?Q:y,vector_similarity_weight:1-((X=i.vector_similarity_weight)!==null&&X!==void 0?X:.3)}))}},[i,u,a,y]),(0,e.jsxs)(xe.Z,{title:le,width:688,open:a,onOk:Z,onCancel:g,confirmLoading:v,destroyOnClose:!0,afterClose:_,children:[(0,e.jsx)(Ct.Z,{size:"large",value:h,onChange:K,options:Object.values(Me).map(function(P){return{label:L(Be()(P)),value:P}}),block:!0}),(0,e.jsx)(q.Z,{}),(0,e.jsx)(s.Z,N()(N()({},Ht),{},{name:"nest-messages",form:u,style:{maxWidth:600},validateMessages:Gt,colon:!1,children:Object.entries(Kt).map(function(P){var Q=de()(P,2),X=Q[0],me=Q[1];return(0,e.jsx)(me,N()(N()({show:X===h,form:u},X===Me.ModelSetting?{initialLlmSetting:i.llm_setting,visible:a}:{}),X===Me.PromptEngine?{ref:E}:{}),X)})}))]})},Qt=Yt,Xt=t(88964),$t=t(18334),Ye=t(49468),Jt=t(21687),ke=t(49723),qt=t(4772),en=t(96449),tn={documentContainer:"documentContainer___kWzt7"},nn=function(n){var a=n.comment;return a.text?(0,e.jsxs)("div",{className:"Highlight__popup",children:[a.emoji," ",a.text]}):null},an=function(n){var a=n.chunk,d=n.documentId,i=n.visible,v=(0,Ye.pC)(d),o=(0,Ye.tl)(a),r=o.highlights,x=o.setWidthAndHeight,M=(0,l.useRef)(function(){}),u=(0,l.useState)(!1),c=de()(u,2),p=c[0],h=c[1],f=v(),E=(0,en.s)(f),y=function(){};return(0,l.useEffect)(function(){h(i)},[i]),(0,l.useEffect)(function(){r.length>0&&p&&(h(!1),M.current(r[0]))},[r,p]),(0,e.jsx)("div",{className:tn.documentContainer,children:(0,e.jsx)(ke.Hz,{url:f,beforeLoad:(0,e.jsx)(Jt.Z,{active:!0}),workerSrc:"/pdfjs-dist/pdf.worker.min.js",errorMessage:(0,e.jsx)(qt.Z,{children:E}),children:function(L){return L.getPage(1).then(function(Z){var g=Z.getViewport({scale:1}),K=g.width,_=g.height;x(K,_)}),(0,e.jsx)(ke.Nb,{pdfDocument:L,enableAreaSelection:function(g){return g.altKey},onScrollChange:y,scrollRef:function(g){M.current=g,h(!0)},onSelectionFinished:function(){return null},highlightTransform:function(g,K,_,le,P,Q,X){var me=!(g.content&&g.content.image),he=me?(0,e.jsx)(ke.y$,{isScrolledTo:X,position:g.position,comment:g.comment}):(0,e.jsx)(ke.PD,{isScrolledTo:X,highlight:g,onChange:function(){}});return(0,e.jsx)(ke.GI,{popupContent:(0,e.jsx)(nn,N()({},g)),onMouseOver:function(Ne){return _(g,function(){return Ne})},onMouseOut:le,children:he},K)},highlights:r})}})})},rn=an,ye=t(1079),it=t(2487),ln=t(85265),sn=t(46008),on=t(46693),lt=t(65400),ue={chatContainer:"chatContainer___KnZy3",messageContainer:"messageContainer___HpbDk",messageItem:"messageItem___Ygyfi",messageItemSection:"messageItemSection___iLh5D",messageItemSectionLeft:"messageItemSectionLeft___kvNNH",messageItemSectionRight:"messageItemSectionRight___VZFy0",messageItemContent:"messageItemContent___xlt0U",messageItemContentReverse:"messageItemContentReverse___aD08i",messageText:"messageText___JiiCK",messageEmpty:"messageEmpty___uvA1b",thumbnailImg:"thumbnailImg___q5qBr",messageItemLeft:"messageItemLeft___o3kLO",messageItemRight:"messageItemRight___pLPv7"},dn=function(n){var a=n.item,d=n.reference,i=n.loading,v=i===void 0?!1:i,o=n.clickDocumentButton,r=(0,Ge.ml)(),x=(0,qe.l5)(),M=(0,Ye.pC)(),u=(0,B.qM)("chat"),c=u.t,p=a.role===ye.C.Assistant,h=(0,l.useMemo)(function(){var E;return(E=d==null?void 0:d.doc_aggs)!==null&&E!==void 0?E:[]},[d==null?void 0:d.doc_aggs]),f=(0,l.useMemo)(function(){var E,y=a.content;return y===""&&(y=c("searching")),v?(E=y)===null||E===void 0?void 0:E.concat("~~2$$"):y},[a.content,v,c]);return(0,e.jsx)("div",{className:je()(ue.messageItem,S()(S()({},ue.messageItemLeft,a.role===ye.C.Assistant),ue.messageItemRight,a.role===ye.C.User)),children:(0,e.jsx)("section",{className:je()(ue.messageItemSection,S()(S()({},ue.messageItemSectionLeft,a.role===ye.C.Assistant),ue.messageItemSectionRight,a.role===ye.C.User)),children:(0,e.jsxs)("div",{className:je()(ue.messageItemContent,S()({},ue.messageItemContentReverse,a.role===ye.C.User)),children:[a.role===ye.C.User?(0,e.jsx)(we.C,{size:40,src:r.avatar}):(0,e.jsx)(Xt.r,{}),(0,e.jsxs)(j.Z,{vertical:!0,gap:8,flex:1,children:[(0,e.jsx)("b",{children:p?"":r.nickname}),(0,e.jsx)("div",{className:ue.messageText,children:(0,e.jsx)(sn.Z,{content:f,reference:d,clickDocumentButton:o})}),p&&h.length>0&&(0,e.jsx)(it.Z,{bordered:!0,dataSource:h,renderItem:function(y){var I=x[y.doc_id],L=(0,lt.RT)(y.doc_name);return(0,e.jsx)(it.Z.Item,{children:(0,e.jsxs)(j.Z,{gap:"small",align:"center",children:[I?(0,e.jsx)("img",{src:I,className:ue.thumbnailImg}):(0,e.jsx)(on.Z,{name:"file-icon/".concat(L),width:24}),(0,e.jsx)($t.Z,{link:M(y.doc_id),preventDefault:!(0,lt.Ze)(y.doc_name),children:y.doc_name})]})})}})]})]})})})},cn=function(){var n,a=(0,A.Q5)(),d=a.ref,i=a.currentConversation,v=a.addNewestConversation,o=a.removeLatestMessage,r=a.addNewestAnswer,x=(0,A.$3)(i,v,o,r),M=x.handleInputChange,u=x.handlePressEnter,c=x.value,p=x.loading,h=(0,A.Bh)(),f=h.visible,E=h.hideModal,y=h.documentId,I=h.selectedChunk,L=h.clickDocumentButton,Z=(0,A.lT)();(0,A.G8)();var g=(0,A.k9)(),K=(0,B.qM)("chat"),_=K.t;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Z,{flex:1,className:ue.chatContainer,vertical:!0,children:[(0,e.jsxs)(j.Z,{flex:1,vertical:!0,className:ue.messageContainer,children:[(0,e.jsx)("div",{children:(0,e.jsx)(De.Z,{spinning:g,children:i==null||(n=i.message)===null||n===void 0?void 0:n.map(function(le,P){return(0,e.jsx)(dn,{loading:le.role===ye.C.Assistant&&p&&(i==null?void 0:i.message.length)-1===P,item:le,reference:(0,Je.oI)(i,le),clickDocumentButton:L},le.id)})})}),(0,e.jsx)("div",{ref:d})]}),(0,e.jsx)(ae.Z,{size:"large",placeholder:_("sendPlaceholder"),value:c,disabled:Z,suffix:(0,e.jsx)(G.ZP,{type:"primary",onClick:u,loading:p,disabled:Z,children:_("send")}),onPressEnter:u,onChange:M})]}),(0,e.jsx)(ln.Z,{title:"Document Previewer",onClose:E,open:f,width:"50vw",children:(0,e.jsx)(rn,{documentId:y,chunk:I,visible:f})})]})},un=cn,mn=t(38725),vn=t(29009),hn=t(77180),gn=t(14195),pn=t(3023),jn=t(75358),fn=t(26050),xn=t(33558),Mn=t(56880),pa=[{name:"Page A",uv:4e3,pv:2400},{name:"Page B",uv:3e3,pv:1398},{name:"Page C",uv:2e3,pv:9800},{name:"Page D",uv:2780,pv:3908},{name:"Page E",uv:1890,pv:4800},{name:"Page F",uv:2390,pv:3800},{name:"Page G",uv:3490,pv:4300}],yn=function(n){var a=n.data,d=n.showLegend,i=d===void 0?!1:d;return(0,e.jsx)(vn.h,{width:"100%",height:"100%",children:(0,e.jsxs)(hn.w,{data:a,margin:{},children:[(0,e.jsx)(gn.q,{strokeDasharray:"3 3"}),(0,e.jsx)(pn.K,{dataKey:"xAxis"}),(0,e.jsx)(jn.B,{}),(0,e.jsx)(fn.u,{}),i&&(0,e.jsx)(xn.D,{}),(0,e.jsx)(Mn.x,{type:"monotone",dataKey:"yAxis",stroke:"#8884d8",activeDot:{r:8}})]})})},In=yn,st=t(28382),Cn=t(68259),Ln=t(27484),bn=t.n(Ln),En=t(63606),Zn=t(57132),Tn=t(74855),Dn=function(n){var a=n.text,d=(0,l.useState)(!1),i=de()(d,2),v=i[0],o=i[1],r=(0,B.qM)("common"),x=r.t,M=function(){o(!0),setTimeout(function(){o(!1)},2e3)};return(0,e.jsx)(nt.Z,{title:x(v?"copied":"copy"),children:(0,e.jsx)(Tn.CopyToClipboard,{text:a,onCopy:M,children:v?(0,e.jsx)(En.Z,{}):(0,e.jsx)(Zn.Z,{})})})},ot=Dn,Sn=function(n){var a=n.visible,d=n.dialogId,i=n.hideModal,v=(0,A.r6)(a,d),o=v.createToken,r=v.removeToken,x=v.tokenList,M=v.listLoading,u=v.creatingLoading,c=(0,B.qM)("chat"),p=c.t,h=[{title:"Token",dataIndex:"token",key:"token",render:function(E){return(0,e.jsx)("a",{children:E})}},{title:p("created"),dataIndex:"create_date",key:"create_date",render:function(E){return(0,st.p6)(E)}},{title:p("action"),key:"action",render:function(E,y){return(0,e.jsxs)(U.Z,{size:"middle",children:[(0,e.jsx)(ot,{text:y.token}),(0,e.jsx)(H.Z,{onClick:function(){return r(y.token,y.tenant_id)}})]})}}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(xe.Z,{title:p("apiKey"),open:a,onCancel:i,cancelButtonProps:{style:{display:"none"}},style:{top:300},onOk:i,width:"50vw",children:[(0,e.jsx)(at.Z,{columns:h,dataSource:x,rowKey:"token",loading:M}),(0,e.jsx)(G.ZP,{onClick:o,loading:u,children:p("createNewKey")})]})})},_n=Sn,An=t(21636),Nn=t(42481),Pn=t(55186),On=["children","className","node"],kn=function(n){var a=n.children;return(0,e.jsx)(An.U,{remarkPlugins:[Pn.Z],components:{code:function(i){var v=i.children,o=i.className,r=i.node,x=Ke()(i,On),M=/language-(\w+)/.exec(o||"");return M?(0,e.jsx)(Nn.Z,N()(N()({},x),{},{PreTag:"div",language:M[1],children:String(v).replace(/\n$/,"")})):(0,e.jsx)("code",N()(N()({},x),{},{className:o,children:v}))}},children:a})},wn=kn,Rn=t(92398),Un={codeCard:"codeCard___lyM60",codeText:"codeText___yCTO5"},Wn=function(n){var a=n.visible,d=n.hideModal,i=n.token,v=i===void 0?"":i,o=(0,B.qM)("chat"),r=o.t,x=`
  ~~~ html
  <iframe
  src="`.concat(location.origin,"/chat/share?shared_id=").concat(v,`"
  style="width: 100%; height: 100%; min-height: 600px"
  frameborder="0"
>
</iframe>
~~~
  `),M=[{key:"1",label:r("fullScreenTitle"),children:(0,e.jsx)(Ce.Z,{title:r("fullScreenDescription"),extra:(0,e.jsx)(ot,{text:x}),className:Un.codeCard,children:(0,e.jsx)(wn,{children:x})})},{key:"2",label:r("partialTitle"),children:r("comingSoon")},{key:"3",label:r("extensionTitle"),children:r("comingSoon")}],u=function(p){console.log(p)};return(0,e.jsx)(xe.Z,{title:r("embedModalTitle"),open:a,style:{top:300},width:"50vw",onOk:d,onCancel:d,children:(0,e.jsx)(Rn.Z,{defaultActiveKey:"1",items:M,onChange:u})})},Fn=Wn,We={chartWrapper:"chartWrapper___p8Zu6",chartItem:"chartItem___wdoO0",chartLabel:"chartLabel___gooI4",linkText:"linkText___wp54V"},zn=ie.Z.Paragraph,Vn=Cn.Z.RangePicker,Ae=function(n){var a,d,i=n.statsType,v=(0,B.qM)("chat"),o=v.t,r=(0,A.g$)(),x=(a=(d=r[i])===null||d===void 0?void 0:d.map(function(M){return N()(N()({},M),{},{xAxis:(0,st.p6)(M.xAxis)})}))!==null&&a!==void 0?a:[];return(0,e.jsxs)("div",{className:We.chartItem,children:[(0,e.jsx)("b",{className:We.chartLabel,children:o(Be()(i))}),(0,e.jsx)(In,{data:x})]})},Bn=function(n){var a=n.visible,d=n.hideModal,i=n.dialog,v=(0,B.qM)("chat"),o=v.t,r=(0,B.pG)(),x=r.visible,M=r.hideModal,u=r.showModal,c=(0,A.iV)(i.id),p=c.embedVisible,h=c.hideEmbedModal,f=c.showEmbedModal,E=c.embedToken,y=c.errorContextHolder,I=(0,A.Qe)(a),L=I.pickerValue,Z=I.setPickerValue,g=function(Q){return Q&&Q>bn()().endOf("day")},K=(0,A.Xm)(i.id),_=K.handlePreview,le=K.contextHolder;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(xe.Z,{title:o("overview"),open:a,onCancel:d,cancelButtonProps:{style:{display:"none"}},onOk:d,width:"100vw",okText:o("close",{keyPrefix:"common"}),children:[(0,e.jsxs)(j.Z,{vertical:!0,gap:"middle",children:[(0,e.jsxs)(Ce.Z,{title:o("backendServiceApi"),children:[(0,e.jsxs)(j.Z,{gap:8,vertical:!0,children:[o("serviceApiEndpoint"),(0,e.jsxs)(zn,{copyable:!0,className:We.linkText,children:[location.origin,"/v1/api/"]})]}),(0,e.jsxs)(U.Z,{size:"middle",children:[(0,e.jsx)(G.ZP,{onClick:u,children:o("apiKey")}),(0,e.jsx)("a",{href:"https://github.com/infiniflow/ragflow/blob/main/docs/references/api.md",target:"_blank",rel:"noreferrer",children:(0,e.jsx)(G.ZP,{children:o("apiReference")})})]})]}),(0,e.jsx)(Ce.Z,{title:"".concat(i.name," Web App"),children:(0,e.jsx)(j.Z,{gap:8,vertical:!0,children:(0,e.jsxs)(U.Z,{size:"middle",children:[(0,e.jsx)(G.ZP,{onClick:_,children:o("preview")}),(0,e.jsx)(G.ZP,{onClick:f,children:o("embedded")})]})})}),(0,e.jsxs)(U.Z,{children:[(0,e.jsx)("b",{children:o("dateRange")}),(0,e.jsx)(Vn,{disabledDate:g,value:L,onChange:Z,allowClear:!1})]}),(0,e.jsxs)("div",{className:We.chartWrapper,children:[(0,e.jsx)(Ae,{statsType:"pv"}),(0,e.jsx)(Ae,{statsType:"round"}),(0,e.jsx)(Ae,{statsType:"speed"}),(0,e.jsx)(Ae,{statsType:"thumb_up"}),(0,e.jsx)(Ae,{statsType:"tokens"}),(0,e.jsx)(Ae,{statsType:"uv"})]})]}),(0,e.jsx)(_n,{visible:x,hideModal:M,dialogId:i.id}),(0,e.jsx)(Fn,{token:E,visible:p,hideModal:h}),le,y]})})},Hn=Bn,ee={chatWrapper:"chatWrapper___LQ6YY",chatAppWrapper:"chatAppWrapper___hrF6r",chatAppContent:"chatAppContent___Ri0fp",chatAppCard:"chatAppCard___kPbxc",cubeIcon:"cubeIcon___zAmbo",chatAppCardSelected:"chatAppCardSelected___h9j2W",chatTitleWrapper:"chatTitleWrapper___MXbZF",chatTitle:"chatTitle___cyXkX",chatTitleContent:"chatTitleContent___XsLt3",chatSpin:"chatSpin___J9mE8",chatTitleCard:"chatTitleCard___Pnbv0",chatTitleCardSelected:"chatTitleCardSelected___A8BIt",divider:"divider___d5TdM"},dt=ie.Z.Text,Gn=function(){var n=(0,A.iH)(),a=(0,A.dd)(),d=a.onRemoveDialog,i=(0,A.E$)(),v=i.onRemoveConversation,o=(0,A.$D)(),r=o.handleClickDialog,x=(0,A.vV)(),M=x.handleClickConversation,u=(0,A.g6)(),c=u.dialogId,p=u.conversationId,h=(0,A.ch)(),f=h.list,E=h.addTemporaryConversation,y=(0,A.XU)(),I=y.activated,L=y.handleItemEnter,Z=y.handleItemLeave,g=(0,A.XU)(),K=g.activated,_=g.handleItemEnter,le=g.handleItemLeave,P=(0,A.hF)(),Q=P.conversationRenameLoading,X=P.initialConversationName,me=P.onConversationRenameOk,he=P.conversationRenameVisible,fe=P.hideConversationRenameModal,Ne=P.showConversationRenameModal,ve=(0,A.HN)(),Fe=ve.dialogSettingLoading,ze=ve.initialDialog,ct=ve.onDialogEditOk,be=ve.dialogEditVisible,Yn=ve.clearDialog,Qn=ve.hideDialogEditModal,ut=ve.showDialogEditModal,Xn=(0,A.Gi)(),$n=(0,A.bR)(),Jn=(0,B.qM)("chat"),Ee=Jn.t,Qe=(0,B.pG)(),qn=Qe.visible,ea=Qe.hideModal,ta=Qe.showModal,mt=(0,mn.cE)(),na=mt.currentRecord,aa=mt.setRecord;(0,A.NG)(c,!0);var ra=function(W){return function(){L(W)}},ia=function(W){return function(){_(W)}},vt=function(W){return function(O){var Y,Ze;O==null||(Y=O.domEvent)===null||Y===void 0||Y.preventDefault(),O==null||(Ze=O.domEvent)===null||Ze===void 0||Ze.stopPropagation(),ut(W)}},la=function(W){return function(O){var Y=O.domEvent;Y.preventDefault(),Y.stopPropagation(),d([W])}},ja=function(W){return function(O){var Y,Ze;O==null||(Y=O.domEvent)===null||Y===void 0||Y.preventDefault(),O==null||(Ze=O.domEvent)===null||Ze===void 0||Ze.stopPropagation(),aa(W),ta()}},sa=function(W){return function(O){var Y=O.domEvent;Y.preventDefault(),Y.stopPropagation(),v([W])}},oa=function(W){return function(O){var Y=O.domEvent;Y.preventDefault(),Y.stopPropagation(),Ne(W)}},da=function(W){return function(){r(W)}},ca=function(W){return function(){M(W)}},ua=(0,l.useCallback)(function(){E()},[E]),ma=[{key:"1",onClick:ua,label:(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(C.Z,{}),Ee("newChat")]})}],va=function(W){var O=W.id,Y=[{key:"1",onClick:vt(O),label:(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(R.Z,{}),Ee("edit",{keyPrefix:"common"})]})},{type:"divider"},{key:"2",onClick:la(O),label:(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(H.Z,{}),Ee("delete",{keyPrefix:"common"})]})}];return Y},ha=function(W){var O=[{key:"1",onClick:oa(W),label:(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(R.Z,{}),Ee("rename",{keyPrefix:"common"})]})},{type:"divider"},{key:"2",onClick:sa(W),label:(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(H.Z,{}),Ee("delete",{keyPrefix:"common"})]})}];return O};return(0,A.os)(),(0,e.jsxs)(j.Z,{className:ee.chatWrapper,children:[(0,e.jsx)(j.Z,{className:ee.chatAppWrapper,children:(0,e.jsxs)(j.Z,{flex:1,vertical:!0,children:[(0,e.jsx)(G.ZP,{type:"primary",onClick:vt(),children:Ee("createAssistant")}),(0,e.jsx)(q.Z,{}),(0,e.jsx)(j.Z,{className:ee.chatAppContent,vertical:!0,gap:10,children:(0,e.jsx)(De.Z,{spinning:Xn,wrapperClassName:ee.chatSpin,children:n.map(function(T){return(0,e.jsx)(Ce.Z,{hoverable:!0,className:je()(ee.chatAppCard,S()({},ee.chatAppCardSelected,c===T.id)),onMouseEnter:ra(T.id),onMouseLeave:Z,onClick:da(T.id),children:(0,e.jsxs)(j.Z,{justify:"space-between",align:"center",children:[(0,e.jsxs)(U.Z,{size:15,children:[(0,e.jsx)(we.C,{src:T.icon,shape:"square"}),(0,e.jsxs)("section",{children:[(0,e.jsx)("b",{children:(0,e.jsx)(dt,{ellipsis:{tooltip:T.name},style:{width:130},children:T.name})}),(0,e.jsx)("div",{children:T.description})]})]}),I===T.id&&(0,e.jsx)("section",{children:(0,e.jsx)(Ve.Z,{menu:{items:va(T)},children:(0,e.jsx)(V,{className:ee.cubeIcon})})})]})},T.id)})})})]})}),(0,e.jsx)(q.Z,{type:"vertical",className:ee.divider}),(0,e.jsx)(j.Z,{className:ee.chatTitleWrapper,children:(0,e.jsxs)(j.Z,{flex:1,vertical:!0,children:[(0,e.jsxs)(j.Z,{justify:"space-between",align:"center",className:ee.chatTitle,children:[(0,e.jsxs)(U.Z,{children:[(0,e.jsx)("b",{children:Ee("chat")}),(0,e.jsx)(ht.Z,{children:f.length})]}),(0,e.jsx)(Ve.Z,{menu:{items:ma},children:(0,e.jsx)(C.Z,{})})]}),(0,e.jsx)(q.Z,{}),(0,e.jsx)(j.Z,{vertical:!0,gap:10,className:ee.chatTitleContent,children:(0,e.jsx)(De.Z,{spinning:$n,wrapperClassName:ee.chatSpin,children:f.map(function(T){return(0,e.jsx)(Ce.Z,{hoverable:!0,onClick:ca(T.id),onMouseEnter:ia(T.id),onMouseLeave:le,className:je()(ee.chatTitleCard,S()({},ee.chatTitleCardSelected,T.id===p)),children:(0,e.jsxs)(j.Z,{justify:"space-between",align:"center",children:[(0,e.jsx)("div",{children:(0,e.jsx)(dt,{ellipsis:{tooltip:T.name},style:{width:150},children:T.name})}),K===T.id&&T.id!==""&&(0,e.jsx)("section",{children:(0,e.jsx)(Ve.Z,{menu:{items:ha(T.id)},children:(0,e.jsx)(V,{className:ee.cubeIcon})})})]})},T.id)})})})]})}),(0,e.jsx)(q.Z,{type:"vertical",className:ee.divider}),(0,e.jsx)(un,{}),(0,e.jsx)(Qt,{visible:be,initialDialog:ze,showModal:ut,hideModal:Qn,loading:Fe,onOk:ct,clearDialog:Yn}),(0,e.jsx)(b,{visible:he,hideModal:fe,onOk:me,initialName:X,loading:Q}),(0,e.jsx)(Hn,{visible:qn,hideModal:ea,dialog:na})]})},Kn=Gn},4772:function(Te,re,t){"use strict";t.d(re,{Z:function(){return te}});var se=t(86250),S=t(38925),l=t(2039),w=t(62435),oe={errorWrapper:"errorWrapper___QfVXQ"},z=t(86074),D=function(V){var $=V.children,ne=(0,l.qM)("fileManager"),J=ne.t;return(0,z.jsx)(se.Z,{align:"center",justify:"center",className:oe.errorWrapper,children:(0,z.jsx)(S.Z,{type:"error",message:(0,z.jsx)("h2",{children:$||J("fileError")})})})},te=D},28382:function(Te,re,t){"use strict";t.d(re,{p6:function(){return z}});var se=t(27484),S=t.n(se);function l(){return z(dayjs())}function w(){return z(dayjs().subtract(1,"days"))}function oe(){return z(dayjs().subtract(1,"weeks"))}function z(D){return D?S()(D).format("DD/MM/YYYY HH:mm:ss"):""}},64838:function(){},27922:function(){},15212:function(){},85777:function(){},76929:function(){},45036:function(){}}]);

//# sourceMappingURL=p__chat__index.8e5af569.async.js.map