(self.webpackChunk=self.webpackChunk||[]).push([[8725],{96330:function(B,P,e){"use strict";e.d(P,{Rx:function(){return y},S8:function(){return i},Vr:function(){return f},cG:function(){return h},ld:function(){return u},oQ:function(){return d}});var I=e(9783),M=e.n(I),y=function(t){return t.Dataset="dataset",t.Testing="testing",t.Configuration="configuration",t}({}),h=function(t){return t.UNSTART="0",t.RUNNING="1",t.CANCEL="2",t.DONE="3",t.FAIL="4",t}({}),d=function(t){return t.Improvise="Improvise",t.Precise="Precise",t.Balance="Balance",t}({}),i=M()(M()(M()({},d.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),d.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),d.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),f=function(t){return t.Embedding="embedding",t.Chat="chat",t.Image2text="image2text",t.Speech2text="speech2text",t.Rerank="rerank",t}({}),u=function(t){return t.DocumentId="doc_id",t.KnowledgeId="id",t}({})},2039:function(B,P,e){"use strict";e.d(P,{I3:function(){return F},pG:function(){return A},qM:function(){return z}});var I=e(15009),M=e.n(I),y=e(99289),h=e.n(y),d=e(5574),i=e.n(d),f=e(21640),u=e(3321),t=e(18446),S=e.n(t),T=e(62435),j=e(67421),U=e(86074),A=function(){var s=(0,T.useState)(!1),n=i()(s,2),a=n[0],r=n[1],l=function(){r(!0)},o=function(){r(!1)},p=function(){r(!a)};return{visible:a,showModal:l,hideModal:o,switchVisible:p}},E=function(s,n){var a=useRef(),r=function(){};isEqual(n,a.current)||(r=s(),a.current=n),useEffect(function(){return function(){r&&r()}},[])};function w(C){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=useRef(),a=useState(!1),r=_slicedToArray(a,2),l=r[0],o=r[1],p=useState(),O=_slicedToArray(p,2),L=O[0],g=O[1],c=s.onCompleted,_=s.onError;return useEffect(function(){o(!0);var D=function(){var m=_asyncToGenerator(_regeneratorRuntime().mark(function v(){return _regeneratorRuntime().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,e(86635)(C);case 3:n.current=b.sent.ReactComponent,c==null||c(C,n.current),b.next=11;break;case 7:b.prev=7,b.t0=b.catch(0),_==null||_(b.t0),g(b.t0);case 11:return b.prev=11,o(!1),b.finish(11);case 14:case"end":return b.stop()}},v,null,[[0,7,11,14]])}));return function(){return m.apply(this,arguments)}}();D()},[C,c,_]),{error:L,loading:l,SvgIcon:n.current}}var F=function(){var s=u.Z.useApp(),n=s.modal,a=(0,j.$G)(),r=a.t,l=(0,T.useCallback)(function(o){var p=o.onOk,O=o.onCancel;return new Promise(function(L,g){n.confirm({title:r("common.deleteModalTitle"),icon:(0,U.jsx)(f.Z,{}),okText:r("common.ok"),okType:"danger",cancelText:r("common.cancel"),onOk:function(){return h()(M()().mark(function _(){var D;return M()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,p==null?void 0:p();case 3:D=v.sent,L(D),console.info(D),v.next=11;break;case 8:v.prev=8,v.t0=v.catch(0),g(v.t0);case 11:case"end":return v.stop()}},_,null,[[0,8]])}))()},onCancel:function(){O==null||O()}})})},[r,n]);return l},z=function(s){return(0,j.$G)("translation",{keyPrefix:s})},N=function(){return useTranslation("translation",{keyPrefix:"common"})}},49468:function(B,P,e){"use strict";e.d(P,{B3:function(){return T},B4:function(){return F},OB:function(){return U},PE:function(){return j},TO:function(){return z},W2:function(){return E},Zd:function(){return A},cG:function(){return N},p6:function(){return C},pC:function(){return t},tl:function(){return S},xp:function(){return w}});var I=e(5574),M=e.n(I),y=e(60806),h=e(65400),d=e(62435),i=e(6589),f=e(65534),u=e(25194),t=function(n){var a=(0,d.useCallback)(function(r){return"".concat(y.N,"/document/get/").concat(n||r)},[n]);return a},S=function(n){var a=(0,d.useState)({width:849,height:1200}),r=M()(a,2),l=r[0],o=r[1],p=(0,d.useMemo)(function(){return(0,h.q1)(n,l)},[n,l]),O=function(g,c){o(function(_){return _.height!==c||_.width!==g?{height:c,width:g}:_})};return{highlights:p,setWidthAndHeight:O}},T=function(){var n=(0,f.pE)(),a=n.knowledgeId,r=(0,i.useDispatch)(),l=(0,d.useCallback)(function(){return r({type:"kFModel/getKfList",payload:{kb_id:a}})},[r,a]);return l},j=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,l=(0,d.useCallback)(function(o,p){n({type:"kFModel/updateDocumentStatus",payload:{doc_id:p,status:Number(o),kb_id:r}})},[n,r]);return l},U=function(){var n=(0,i.useSelector)(function(a){return a.kFModel.data});return n},A=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,l=(0,d.useCallback)(function(o,p){return n({type:"kFModel/document_rename",payload:{doc_id:o,name:p,kb_id:r}})},[n,r]);return l},E=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,l=(0,d.useCallback)(function(o){try{return n({type:"kFModel/document_create",payload:{name:o,kb_id:r}})}catch(p){console.log("Failed:",p)}},[n,r]);return l},w=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,l=(0,d.useCallback)(function(o,p,O){try{return n({type:"kFModel/document_change_parser",payload:{parser_id:o,doc_id:p,kb_id:r,parser_config:O}})}catch(L){console.log("Failed:",L)}},[n,r]);return l},F=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,l=(0,d.useCallback)(function(o){try{return n({type:"kFModel/document_rm",payload:{doc_id:o,kb_id:r}})}catch(p){console.log("Failed:",p)}},[n,r]);return l},z=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,l=(0,d.useCallback)(function(o){try{return n({type:"kFModel/upload_document",payload:{fileList:o,kb_id:r}})}catch(p){console.log("Failed:",p)}},[n,r]);return l},N=function(){var n=(0,i.useDispatch)(),a=(0,d.useCallback)(function(r){try{return n({type:"kFModel/document_run",payload:r})}catch(l){console.log("Failed:",l)}},[n]);return a},C=function(){var n=(0,u.q)("kFModel",["document_run"]);return n}},38725:function(B,P,e){"use strict";e.d(P,{$0:function(){return n},H0:function(){return O},IV:function(){return p},UL:function(){return r},cE:function(){return a}});var I=e(9783),M=e.n(I),y=e(5574),h=e.n(y),d=e(15009),i=e.n(d),f=e(99289),u=e.n(f),t=e(39918),S=e(40169),T=e(60806),j=e(32358),U=e(5121),A=e(24809),E=e(62435),w=e(67421),F=e(6589),z=e(2039),N=e(49468),C=e(25194),s=e(79495),n=function(g){var c=(0,N.xp)(),_=(0,z.pG)(),D=_.visible,m=_.hideModal,v=_.showModal,K=(0,C.q)("kFModel",["document_change_parser"]),b=(0,E.useCallback)(function(){var k=u()(i()().mark(function G($,H){var V;return i()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,c($,g,H);case 2:V=W.sent,V===0&&m();case 4:case"end":return W.stop()}},G)}));return function(G,$){return k.apply(this,arguments)}}(),[m,c,g]);return{changeParserLoading:K,onChangeParserOk:b,changeParserVisible:D,hideChangeParserModal:m,showChangeParserModal:v}},a=function(){var g=(0,E.useState)({}),c=h()(g,2),_=c[0],D=c[1],m=function(K){D(K)};return{currentRecord:_,setRecord:m}},r=function(){var g=(0,w.$G)(),c=g.i18n,_=(0,s.WH)(),D=function(v){c.changeLanguage(S.Kj[v]),_({language:v})};return D},l=function(g,c,_,D){var m=useTranslate("common"),v=m.t,K=useMemo(function(){return{showQuickJumper:!0,total:g,showSizeChanger:!0,current:c,pageSize:_,pageSizeOptions:[1,2,10,20,50,100],onChange:D,showTotal:function(k){return"".concat(v("total")," ").concat(k)}}},[v,D,c,_,g]);return{pagination:K}},o=function(g){var c=useDispatch(),_=useCallback(function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,m=arguments.length>1?arguments[1]:void 0,v={current:D};m&&(v.pageSize=m),c({type:"".concat(g,"/setPagination"),payload:v})},[c,g]);return _},p=function(){var g=(0,E.useState)({}),c=h()(g,2),_=c[0],D=c[1],m=(0,E.useCallback)(u()(i()().mark(function v(){var K;return i()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,U.Z.get("/conf.json");case 2:K=k.sent,D(K.data);case 4:case"end":return k.stop()}},v)})),[]);return(0,E.useEffect)(function(){m()},[m]),_},O=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T.Z.completeConversation,c=(0,E.useState)({}),_=h()(c,2),D=_[0],m=_[1],v=(0,E.useState)(!0),K=h()(v,2),b=K[0],k=K[1],G=(0,E.useCallback)(function(){var $=u()(i()().mark(function H(V){var Z,W,J,Q,q,X,Y,x;return i()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,k(!1),R.next=4,fetch(g,{method:"POST",headers:M()(M()({},t._n,(0,j.c)()),"Content-Type","application/json"),body:JSON.stringify(V)});case 4:W=R.sent,J=W==null||(Z=W.body)===null||Z===void 0?void 0:Z.pipeThrough(new TextDecoderStream).pipeThrough(new A.m).getReader();case 6:return R.next=9,J==null?void 0:J.read();case 9:if(Q=R.sent,!Q){R.next=16;break}q=Q.done,X=Q.value;try{Y=JSON.parse((X==null?void 0:X.data)||""),x=Y==null?void 0:Y.data,typeof x!="boolean"&&(console.info("data:",x),m(x))}catch(ee){console.warn(ee)}if(!q){R.next=16;break}return console.info("done"),R.abrupt("break",18);case 16:R.next=6;break;case 18:return console.info("done?"),k(!0),R.abrupt("return",W);case 23:R.prev=23,R.t0=R.catch(0),k(!0),console.warn(R.t0);case 27:case"end":return R.stop()}},H,null,[[0,23]])}));return function(H){return $.apply(this,arguments)}}(),[g]);return{send:G,answer:D,done:b}}},65534:function(B,P,e){"use strict";e.d(P,{HK:function(){return t},Uu:function(){return u},nT:function(){return j},pE:function(){return S},wy:function(){return T}});var I=e(5574),M=e.n(I),y=e(96330),h=e(62435),d=e(6589),i=function(U){return U.Second="2",U.Third="3",U}({}),f=function(A){var E=(0,d.useLocation)(),w=E.pathname,F=w.split("/");return F[A]||""},u=function(){return f(i.Second)},t=function(){return f(i.Third)},S=function(){var A=(0,d.useSearchParams)(),E=M()(A,1),w=E[0];return{documentId:w.get(y.ld.DocumentId)||"",knowledgeId:w.get(y.ld.KnowledgeId)||""}},T=function(){var A=(0,d.useNavigate)();return(0,h.useCallback)(function(E){A(E,{state:{from:E}})},[A])},j=function(){var A=(0,d.useNavigate)(),E=S(),w=E.knowledgeId;return(0,h.useCallback)(function(){A("/knowledge/".concat(y.Rx.Dataset,"?id=").concat(w))},[w,A])}},25194:function(B,P,e){"use strict";e.d(P,{q:function(){return h}});var I=function(i,f,u){return u.some(function(t){return f["".concat(i,"/").concat(t)]})},M=function(i){return new Promise(function(f){setTimeout(f,i)})},y=e(6589),h=function(i,f){var u=(0,y.useSelector)(function(t){return t.loading.effects});return I(i,u,f)}},79495:function(B,P,e){"use strict";e.d(P,{Jf:function(){return N},WH:function(){return F},XH:function(){return E},Zl:function(){return U},aU:function(){return w},fS:function(){return A},jd:function(){return T},ml:function(){return j},nv:function(){return z}});var I=e(5574),M=e.n(I),y=e(15009),h=e.n(y),d=e(99289),i=e.n(d),f=e(85162),u=e(32358),t=e(62435),S=e(6589),T=function(){var s=(0,S.useDispatch)(),n=(0,t.useCallback)(function(){s({type:"settingModel/getUserInfo"})},[s]);(0,t.useEffect)(function(){n()},[n])},j=function(){var s=(0,S.useSelector)(function(n){return n.settingModel.userInfo});return s},U=function(){var s=(0,S.useSelector)(function(n){return n.settingModel.tenantIfo});return s},A=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=(0,S.useDispatch)(),a=(0,t.useCallback)(function(){n({type:"settingModel/getTenantInfo"})},[n]);return(0,t.useEffect)(function(){s&&a()},[a,s]),a},E=function(){var s=U(),n=(0,t.useMemo)(function(){var a,r=(a=s==null?void 0:s.parser_ids.split(","))!==null&&a!==void 0?a:[];return r.map(function(l){var o=l.split(":");return{value:o[0],label:o[1]}})},[s]);return n},w=function(){var s=(0,S.useDispatch)(),n=(0,t.useCallback)(i()(h()().mark(function a(){var r;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s({type:"loginModel/logout"});case 2:r=o.sent,r===0&&(u.Z.removeAll(),S.history.push("/login"));case 4:case"end":return o.stop()}},a)})),[s]);return n},F=function(){var s=(0,S.useDispatch)(),n=(0,t.useCallback)(function(a){return s({type:"settingModel/setting",payload:a})},[s]);return n},z=function(){var s=(0,t.useState)(""),n=M()(s,2),a=n[0],r=n[1],l=(0,t.useState)(!1),o=M()(l,2),p=o[0],O=o[1],L=(0,t.useCallback)(i()(h()().mark(function g(){var c,_;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return O(!0),m.next=3,f.Z.getSystemVersion();case 3:c=m.sent,_=c.data,_.retcode===0&&(r(_.data),O(!1));case 6:case"end":return m.stop()}},g)})),[]);return{fetchSystemVersion:L,version:a,loading:p}},N=function(){var s=(0,t.useState)({}),n=M()(s,2),a=n[0],r=n[1],l=(0,t.useState)(!1),o=M()(l,2),p=o[0],O=o[1],L=(0,t.useCallback)(i()(h()().mark(function g(){var c,_;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return O(!0),m.next=3,f.Z.getSystemStatus();case 3:c=m.sent,_=c.data,_.retcode===0&&(r(_.data),O(!1));case 6:case"end":return m.stop()}},g)})),[]);return{systemStatus:a,fetchSystemStatus:L,loading:p}}},65400:function(B,P,e){"use strict";e.d(P,{RT:function(){return h},Re:function(){return y},YC:function(){return i},Ze:function(){return d},q1:function(){return M}});var I=e(57632),M=function(u,t){var S;return Array.isArray(u==null?void 0:u.positions)&&u.positions.every(function(T){return Array.isArray(T)})?u==null||(S=u.positions)===null||S===void 0?void 0:S.map(function(T){var j={width:t.width,height:t.height,x1:T[1],x2:T[2],y1:T[3],y2:T[4]};return{id:(0,I.Z)(),comment:{text:"",emoji:""},content:{text:u.content_with_weight},position:{boundingRect:j,rects:[j],pageNumber:T[0]}}}):[]},y=function(u){return u.status==="done"},h=function(u){var t;return(t=u==null?void 0:u.slice(u.lastIndexOf(".")+1).toLowerCase())!==null&&t!==void 0?t:""},d=function(u){return h(u)==="pdf"},i=function(u){return u.split(`
`).length}},86635:function(B){function P(e){return Promise.resolve().then(function(){var I=new Error("Cannot find module '"+e+"'");throw I.code="MODULE_NOT_FOUND",I})}P.keys=function(){return[]},P.resolve=P,P.id=86635,B.exports=P}}]);

//# sourceMappingURL=8725.d7a0cc15.async.js.map