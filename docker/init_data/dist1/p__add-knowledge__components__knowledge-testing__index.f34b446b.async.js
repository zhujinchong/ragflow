(self.webpackChunk=self.webpackChunk||[]).push([[3884],{94194:function(E,m,e){"use strict";var g=e(97857),c=e.n(g),p=e(13769),d=e.n(p),i=e(60806),s=e(86074),r=["id","className"],l=function(h){var D=h.id,M=h.className,L=d()(h,r);return(0,s.jsx)("img",c()(c()({},L),{},{src:"".concat(i.N,"/document/image/").concat(D),alt:"",className:M}))};m.Z=l},18334:function(E,m,e){"use strict";var g=e(62435),c=e(86074),p=function(i){var s=i.children,r=i.link,l=i.preventDefault,a=l===void 0?!1:l,h=i.color,D=h===void 0?"rgb(15, 79, 170)":h;return(0,c.jsx)("a",{target:"_blank",onClick:a?function(M){return M.preventDefault()}:void 0,href:r,rel:"noreferrer",style:{color:D,wordBreak:"break-all"},children:s})};m.Z=p},77567:function(E,m,e){"use strict";var g=e(96330),c=e(2039),p=e(11754),d=e(99859),i=e(20652),s=e(71338),r=e(86074),l=function(){var D=(0,c.qM)("knowledgeDetails"),M=D.t,L=(0,p.hl)();return(0,r.jsx)(d.Z.Item,{label:M("rerankModel"),name:"rerank_id",tooltip:M("rerankTip"),children:(0,r.jsx)(i.Z,{options:L[g.Vr.Rerank],allowClear:!0,placeholder:M("rerankPlaceholder")})})},a=function(){var D=(0,c.qM)("knowledgeDetails"),M=D.t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{}),(0,r.jsx)(d.Z.Item,{noStyle:!0,dependencies:["rerank_id"],children:function(b){var A=b.getFieldValue,w=A("rerank_id");return w&&(0,r.jsx)(d.Z.Item,{label:M("topK"),name:"top_k",initialValue:1024,tooltip:M("topKTip"),children:(0,r.jsx)(s.Z,{max:2048,min:1})})}})]})};m.Z=a},32739:function(E,m,e){"use strict";var g=e(2039),c=e(99859),p=e(71338),d=e(86074),i=function(r){var l=r.isTooltipShown,a=l===void 0?!1:l,h=(0,g.qM)("knowledgeDetails"),D=h.t;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.Z.Item,{label:D("similarityThreshold"),name:"similarity_threshold",tooltip:a&&D("similarityThresholdTip"),initialValue:.2,children:(0,d.jsx)(p.Z,{max:1,step:.01})}),(0,d.jsx)(c.Z.Item,{label:D("vectorSimilarityWeight"),name:"vector_similarity_weight",initialValue:1-.3,tooltip:a&&D("vectorSimilarityWeightTip"),children:(0,d.jsx)(p.Z,{max:1,step:.01})})]})};m.Z=i},96330:function(E,m,e){"use strict";e.d(m,{Rx:function(){return p},S8:function(){return s},Vr:function(){return r},cG:function(){return d},ld:function(){return l},oQ:function(){return i}});var g=e(9783),c=e.n(g),p=function(a){return a.Dataset="dataset",a.Testing="testing",a.Configuration="configuration",a}({}),d=function(a){return a.UNSTART="0",a.RUNNING="1",a.CANCEL="2",a.DONE="3",a.FAIL="4",a}({}),i=function(a){return a.Improvise="Improvise",a.Precise="Precise",a.Balance="Balance",a}({}),s=c()(c()(c()({},i.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),i.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),i.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),r=function(a){return a.Embedding="embedding",a.Chat="chat",a.Image2text="image2text",a.Speech2text="speech2text",a.Rerank="rerank",a}({}),l=function(a){return a.DocumentId="doc_id",a.KnowledgeId="id",a}({})},2039:function(E,m,e){"use strict";e.d(m,{I3:function(){return B},pG:function(){return b},qM:function(){return z}});var g=e(15009),c=e.n(g),p=e(99289),d=e.n(p),i=e(5574),s=e.n(i),r=e(21640),l=e(3321),a=e(18446),h=e.n(a),D=e(62435),M=e(67421),L=e(86074),b=function(){var P=(0,D.useState)(!1),_=s()(P,2),v=_[0],t=_[1],n=function(){t(!0)},o=function(){t(!1)},u=function(){t(!v)};return{visible:v,showModal:n,hideModal:o,switchVisible:u}},A=function(P,_){var v=useRef(),t=function(){};isEqual(_,v.current)||(t=P(),v.current=_),useEffect(function(){return function(){t&&t()}},[])};function w(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=useRef(),v=useState(!1),t=_slicedToArray(v,2),n=t[0],o=t[1],u=useState(),f=_slicedToArray(u,2),j=f[0],I=f[1],S=P.onCompleted,O=P.onError;return useEffect(function(){o(!0);var W=function(){var Q=_asyncToGenerator(_regeneratorRuntime().mark(function U(){return _regeneratorRuntime().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,e(86635)(k);case 3:_.current=R.sent.ReactComponent,S==null||S(k,_.current),R.next=11;break;case 7:R.prev=7,R.t0=R.catch(0),O==null||O(R.t0),I(R.t0);case 11:return R.prev=11,o(!1),R.finish(11);case 14:case"end":return R.stop()}},U,null,[[0,7,11,14]])}));return function(){return Q.apply(this,arguments)}}();W()},[k,S,O]),{error:j,loading:n,SvgIcon:_.current}}var B=function(){var P=l.Z.useApp(),_=P.modal,v=(0,M.$G)(),t=v.t,n=(0,D.useCallback)(function(o){var u=o.onOk,f=o.onCancel;return new Promise(function(j,I){_.confirm({title:t("common.deleteModalTitle"),icon:(0,L.jsx)(r.Z,{}),okText:t("common.ok"),okType:"danger",cancelText:t("common.cancel"),onOk:function(){return d()(c()().mark(function O(){var W;return c()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.prev=0,U.next=3,u==null?void 0:u();case 3:W=U.sent,j(W),console.info(W),U.next=11;break;case 8:U.prev=8,U.t0=U.catch(0),I(U.t0);case 11:case"end":return U.stop()}},O,null,[[0,8]])}))()},onCancel:function(){f==null||f()}})})},[t,_]);return n},z=function(P){return(0,M.$G)("translation",{keyPrefix:P})},Z=function(){return useTranslation("translation",{keyPrefix:"common"})}},49468:function(E,m,e){"use strict";e.d(m,{B3:function(){return D},B4:function(){return B},OB:function(){return L},PE:function(){return M},TO:function(){return z},W2:function(){return A},Zd:function(){return b},cG:function(){return Z},p6:function(){return k},pC:function(){return a},tl:function(){return h},xp:function(){return w}});var g=e(5574),c=e.n(g),p=e(60806),d=e(65400),i=e(62435),s=e(6589),r=e(65534),l=e(25194),a=function(_){var v=(0,i.useCallback)(function(t){return"".concat(p.N,"/document/get/").concat(_||t)},[_]);return v},h=function(_){var v=(0,i.useState)({width:849,height:1200}),t=c()(v,2),n=t[0],o=t[1],u=(0,i.useMemo)(function(){return(0,d.q1)(_,n)},[_,n]),f=function(I,S){o(function(O){return O.height!==S||O.width!==I?{height:S,width:I}:O})};return{highlights:u,setWidthAndHeight:f}},D=function(){var _=(0,r.pE)(),v=_.knowledgeId,t=(0,s.useDispatch)(),n=(0,i.useCallback)(function(){return t({type:"kFModel/getKfList",payload:{kb_id:v}})},[t,v]);return n},M=function(){var _=(0,s.useDispatch)(),v=(0,r.pE)(),t=v.knowledgeId,n=(0,i.useCallback)(function(o,u){_({type:"kFModel/updateDocumentStatus",payload:{doc_id:u,status:Number(o),kb_id:t}})},[_,t]);return n},L=function(){var _=(0,s.useSelector)(function(v){return v.kFModel.data});return _},b=function(){var _=(0,s.useDispatch)(),v=(0,r.pE)(),t=v.knowledgeId,n=(0,i.useCallback)(function(o,u){return _({type:"kFModel/document_rename",payload:{doc_id:o,name:u,kb_id:t}})},[_,t]);return n},A=function(){var _=(0,s.useDispatch)(),v=(0,r.pE)(),t=v.knowledgeId,n=(0,i.useCallback)(function(o){try{return _({type:"kFModel/document_create",payload:{name:o,kb_id:t}})}catch(u){console.log("Failed:",u)}},[_,t]);return n},w=function(){var _=(0,s.useDispatch)(),v=(0,r.pE)(),t=v.knowledgeId,n=(0,i.useCallback)(function(o,u,f){try{return _({type:"kFModel/document_change_parser",payload:{parser_id:o,doc_id:u,kb_id:t,parser_config:f}})}catch(j){console.log("Failed:",j)}},[_,t]);return n},B=function(){var _=(0,s.useDispatch)(),v=(0,r.pE)(),t=v.knowledgeId,n=(0,i.useCallback)(function(o){try{return _({type:"kFModel/document_rm",payload:{doc_id:o,kb_id:t}})}catch(u){console.log("Failed:",u)}},[_,t]);return n},z=function(){var _=(0,s.useDispatch)(),v=(0,r.pE)(),t=v.knowledgeId,n=(0,i.useCallback)(function(o){try{return _({type:"kFModel/upload_document",payload:{fileList:o,kb_id:t}})}catch(u){console.log("Failed:",u)}},[_,t]);return n},Z=function(){var _=(0,s.useDispatch)(),v=(0,i.useCallback)(function(t){try{return _({type:"kFModel/document_run",payload:t})}catch(n){console.log("Failed:",n)}},[_]);return v},k=function(){var _=(0,l.q)("kFModel",["document_run"]);return _}},82182:function(E,m,e){"use strict";e.d(m,{K2:function(){return _},MA:function(){return P},PX:function(){return w},SD:function(){return M},VJ:function(){return z},aX:function(){return v},l5:function(){return Z},qH:function(){return A},tP:function(){return B},w9:function(){return h},wK:function(){return D}});var g=e(97857),c=e.n(g),p=e(5574),d=e.n(p),i=e(2039),s=e(62435),r=e(6589),l=e(65534),a=e(25194),h=function(){var n=(0,r.useSearchParams)(),o=d()(n,1),u=o[0],f=u.get("id");return f||""},D=function(){var n=(0,r.useDispatch)(),o=h(),u=(0,i.I3)(),f=function(S){return function(){return n({type:"kFModel/document_rm",payload:{doc_id:S,kb_id:o}})}},j=function(S){return u({onOk:f(S)})};return{removeDocument:j}},M=function(){var n=(0,r.useDispatch)(),o=(0,l.pE)(),u=o.knowledgeId,f=(0,s.useCallback)(function(j){n({type:"knowledgeModel/getKnowledgeDetail",payload:{kb_id:j}})},[n]);return(0,s.useEffect)(function(){f(u)},[f,u]),f},L=function(){var n=useSelector(function(o){return o.knowledgeModel.knowledge});return n},b=function(){var n,o,u=L();return{defaultParserId:(n=u==null?void 0:u.parser_id)!==null&&n!==void 0?n:"",parserConfig:(o=u==null?void 0:u.parser_config)!==null&&o!==void 0?o:""}},A=function(){var n=(0,r.useDispatch)(),o=(0,i.I3)(),u=(0,s.useCallback)(function(j,I){return function(){return n({type:"chunkModel/rm_chunk",payload:{chunk_ids:j,doc_id:I}})}},[n]),f=(0,s.useCallback)(function(j,I){return o({onOk:u(j,I)})},[u,o]);return{removeChunk:f}},w=function(){var n=(0,r.useDispatch)(),o=h(),u=(0,s.useCallback)(function(){n({type:"kSModel/getKbDetail",payload:{kb_id:o}})},[n,o]);(0,s.useEffect)(function(){u()},[u])},B=function(){var n=(0,r.useSelector)(function(f){return f.knowledgeModel}),o=n.data,u=o===void 0?[]:o;return u},z=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=(0,r.useDispatch)(),u=(0,a.q)("knowledgeModel",["getList"]),f=(0,r.useSelector)(function(W){return W.knowledgeModel}),j=f.data,I=j===void 0?[]:j,S=(0,s.useMemo)(function(){return n?I.filter(function(W){return W.chunk_num>0}):I},[I,n]),O=(0,s.useCallback)(function(){o({type:"knowledgeModel/getList"})},[o]);return(0,s.useEffect)(function(){O()},[O]),{list:S,loading:u,fetchList:O}},Z=function(){var n=(0,r.useSelector)(function(o){return o.kFModel.fileThumbnails});return n},k=function(n){var o=useDispatch(),u=Z(),f=useCallback(function(j){o({type:"kFModel/fetch_document_thumbnails",payload:{doc_ids:j.join(",")}})},[o]);return useEffect(function(){n&&f(n)},[n,f]),{fileThumbnails:u,fetchFileThumbnails:f}},P=function(){var n=(0,r.useDispatch)(),o=(0,s.useCallback)(function(u){n({type:"kSModel/updateKb",payload:u})},[n]);return o},_=function(){var n=(0,r.useSelector)(function(o){return o.kSModel.knowledgeDetails});return n},v=function(){var n=(0,r.useDispatch)(),o=h(),u=(0,s.useCallback)(function(f){n({type:"testingModel/testDocumentChunk",payload:c()(c()({},f),{},{kb_id:o})})},[n,o]);return u}},11754:function(E,m,e){"use strict";e.d(m,{Ju:function(){return _},OR:function(){return k},SL:function(){return B},at:function(){return D},hl:function(){return b},ki:function(){return z},mT:function(){return L},uZ:function(){return P},ux:function(){return Z}});var g=e(97857),c=e.n(g),p=e(9783),d=e.n(p),i=e(5574),s=e.n(i),r=e(96330),l=e(52043),a=e(62435),h=e(6589),D=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=(0,h.useDispatch)(),u=(0,a.useCallback)(function(){o({type:"settingModel/llm_list",payload:{model_type:t}})},[o,t]);return(0,a.useEffect)(function(){n&&u()},[u,n]),u},M=function(){var t=(0,h.useSelector)(function(n){return n.settingModel.llmInfo});return t},L=function(){var t=M(),n=(0,a.useMemo)(function(){return Object.entries(t).map(function(o){var u=s()(o,2),f=u[0],j=u[1];return{label:f,options:j.map(function(I){return{label:I.llm_name,value:I.llm_name,disabled:!I.available}})}})},[t]);return n},b=function(){var t=M(),n=function(u){return Object.entries(t).filter(function(f){var j=s()(f,2),I=j[1];return u?I.some(function(S){return S.model_type.includes(u)}):!0}).map(function(f){var j=s()(f,2),I=j[0],S=j[1];return{label:I,options:S.filter(function(O){return u?O.model_type.includes(u):!0}).map(function(O){return{label:O.llm_name,value:O.llm_name,disabled:!O.available}})}})};return d()(d()(d()(d()(d()({},r.Vr.Chat,n(r.Vr.Chat)),r.Vr.Embedding,n(r.Vr.Embedding)),r.Vr.Image2text,n(r.Vr.Image2text)),r.Vr.Speech2text,n(r.Vr.Speech2text)),r.Vr.Rerank,n(r.Vr.Rerank))},A=function(){var t=(0,h.useSelector)(function(n){return n.settingModel.factoryList});return t},w=function(){var t=(0,h.useSelector)(function(n){return n.settingModel.myLlmList});return t},B=function(){var t=(0,h.useDispatch)(),n=A(),o=w(),u=(0,a.useMemo)(function(){var j=n.filter(function(I){return Object.keys(o).every(function(S){return S!==I.name})});return(0,l.tJ)(j)},[n,o]),f=(0,a.useCallback)(function(){t({type:"settingModel/factories_list"})},[t]);return(0,a.useEffect)(function(){f()},[f]),u},z=function(){var t=(0,h.useDispatch)(),n=w(),o=A(),u=(0,a.useMemo)(function(){return Object.entries(n).map(function(j){var I,S,O=s()(j,2),W=O[0],Q=O[1];return c()({name:W,logo:(I=(S=o.find(function(U){return U.name===W}))===null||S===void 0?void 0:S.logo)!==null&&I!==void 0?I:""},Q)})},[n,o]),f=(0,a.useCallback)(function(){t({type:"settingModel/my_llm"})},[t]);return(0,a.useEffect)(function(){f()},[f]),u},Z=function(){var t=(0,h.useDispatch)(),n=(0,a.useCallback)(function(o){return t({type:"settingModel/set_api_key",payload:o})},[t]);return n},k=function(){var t=(0,h.useDispatch)(),n=(0,a.useCallback)(function(o){return t({type:"settingModel/set_tenant_info",payload:o})},[t]);return n},P=function(){var t=(0,h.useDispatch)(),n=(0,a.useCallback)(function(o){return t({type:"settingModel/add_llm",payload:o})},[t]);return n},_=function(){var t=(0,h.useDispatch)(),n=(0,a.useCallback)(function(o){return t({type:"settingModel/delete_llm",payload:o})},[t]);return n}},65534:function(E,m,e){"use strict";e.d(m,{HK:function(){return a},Uu:function(){return l},nT:function(){return M},pE:function(){return h},wy:function(){return D}});var g=e(5574),c=e.n(g),p=e(96330),d=e(62435),i=e(6589),s=function(L){return L.Second="2",L.Third="3",L}({}),r=function(b){var A=(0,i.useLocation)(),w=A.pathname,B=w.split("/");return B[b]||""},l=function(){return r(s.Second)},a=function(){return r(s.Third)},h=function(){var b=(0,i.useSearchParams)(),A=c()(b,1),w=A[0];return{documentId:w.get(p.ld.DocumentId)||"",knowledgeId:w.get(p.ld.KnowledgeId)||""}},D=function(){var b=(0,i.useNavigate)();return(0,d.useCallback)(function(A){b(A,{state:{from:A}})},[b])},M=function(){var b=(0,i.useNavigate)(),A=h(),w=A.knowledgeId;return(0,d.useCallback)(function(){b("/knowledge/".concat(p.Rx.Dataset,"?id=").concat(w))},[w,b])}},25194:function(E,m,e){"use strict";e.d(m,{q:function(){return d}});var g=function(s,r,l){return l.some(function(a){return r["".concat(s,"/").concat(a)]})},c=function(s){return new Promise(function(r){setTimeout(r,s)})},p=e(6589),d=function(s,r){var l=(0,p.useSelector)(function(a){return a.loading.effects});return g(s,l,r)}},70521:function(E,m,e){"use strict";e.r(m),e.d(m,{default:function(){return Le}});var g=e(15009),c=e.n(g),p=e(97857),d=e.n(p),i=e(99289),s=e.n(i),r=e(5574),l=e.n(r),a=e(82182),h=e(99859),D=e(86250),M=e(62435),L=e(6589),b=e(32739),A=e(96074),w=e(4393),B=e(79531),z=e(15867),Z=e(77567),k=e(2039),P=e(11754),_=e(25194),v={testingControlWrapper:"testingControlWrapper___p4CKW",historyTitle:"historyTitle___xzO3Q",historyIcon:"historyIcon___cC0xi",historyCardWrapper:"historyCardWrapper___U6MLX",historyCard:"historyCard___iTsCa",historyText:"historyText____3RVU"},t=e(86074),n=function(y){var C=y.form,G=y.handleTesting,N=h.Z.useWatch("question",{form:C,preserve:!0}),F=(0,_.q)("testingModel",["testDocumentChunk"]),J=(0,k.qM)("knowledgeDetails"),H=J.t,K=(0,P.at)();(0,M.useEffect)(function(){K()},[K]);var x=!N||typeof N=="string"&&N.trim()==="";return(0,t.jsxs)("section",{className:v.testingControlWrapper,children:[(0,t.jsx)("div",{children:(0,t.jsx)("b",{children:H("testing")})}),(0,t.jsx)("p",{children:H("testingDescription")}),(0,t.jsx)(A.Z,{}),(0,t.jsx)("section",{children:(0,t.jsxs)(h.Z,{name:"testing",layout:"vertical",form:C,children:[(0,t.jsx)(b.Z,{isTooltipShown:!0}),(0,t.jsx)(Z.Z,{}),(0,t.jsxs)(w.Z,{size:"small",title:H("testText"),children:[(0,t.jsx)(h.Z.Item,{name:"question",rules:[{required:!0,message:H("testTextPlaceholder")}],children:(0,t.jsx)(B.Z.TextArea,{autoSize:{minRows:8}})}),(0,t.jsx)(D.Z,{justify:"end",children:(0,t.jsx)(z.ZP,{type:"primary",size:"small",onClick:G,disabled:x,loading:F,children:H("testingLabel")})})]})]})})]})},o=n,u=Object.defineProperty,f=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,S=(T,y,C)=>y in T?u(T,y,{enumerable:!0,configurable:!0,writable:!0,value:C}):T[y]=C,O=(T,y)=>{for(var C in y||(y={}))j.call(y,C)&&S(T,C,y[C]);if(f)for(var C of f(y))I.call(y,C)&&S(T,C,y[C]);return T};const W=T=>M.createElement("svg",O({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},T),M.createElement("path",{d:"M6.667 10h6.666M6.5 17.5h7c1.4 0 2.1 0 2.635-.273a2.5 2.5 0 0 0 1.092-1.092c.273-.535.273-1.235.273-2.635v-7c0-1.4 0-2.1-.273-2.635a2.5 2.5 0 0 0-1.092-1.093C15.6 2.5 14.9 2.5 13.5 2.5h-7c-1.4 0-2.1 0-2.635.272a2.5 2.5 0 0 0-1.093 1.093C2.5 4.4 2.5 5.1 2.5 6.5v7c0 1.4 0 2.1.272 2.635a2.5 2.5 0 0 0 1.093 1.092C4.4 17.5 5.1 17.5 6.5 17.5Z",stroke:"#7F56D9",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));var Q="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYuNjY3IDEwaDYuNjY2TTYuNSAxNy41aDdjMS40IDAgMi4xIDAgMi42MzUtLjI3M2EyLjUgMi41IDAgMCAwIDEuMDkyLTEuMDkyYy4yNzMtLjUzNS4yNzMtMS4yMzUuMjczLTIuNjM1di03YzAtMS40IDAtMi4xLS4yNzMtMi42MzVhMi41IDIuNSAwIDAgMC0xLjA5Mi0xLjA5M0MxNS42IDIuNSAxNC45IDIuNSAxMy41IDIuNWgtN2MtMS40IDAtMi4xIDAtMi42MzUuMjcyYTIuNSAyLjUgMCAwIDAtMS4wOTMgMS4wOTNDMi41IDQuNCAyLjUgNS4xIDIuNSA2LjV2N2MwIDEuNCAwIDIuMS4yNzIgMi42MzVhMi41IDIuNSAwIDAgMCAxLjA5MyAxLjA5MkM0LjQgMTcuNSA1LjEgMTcuNSA2LjUgMTcuNVoiIHN0cm9rZT0iIzdGNTZEOSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=",U=e(94194),ee=e(42075),R=e(47221),oe=e(74627),se=e(11980),ie=e(68929),ue=e.n(ie),le=Object.defineProperty,te=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ne=(T,y,C)=>y in T?le(T,y,{enumerable:!0,configurable:!0,writable:!0,value:C}):T[y]=C,_e=(T,y)=>{for(var C in y||(y={}))ce.call(y,C)&&ne(T,C,y[C]);if(te)for(var C of te(y))de.call(y,C)&&ne(T,C,y[C]);return T};const me=T=>M.createElement("svg",_e({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},T),M.createElement("g",{clipPath:"url(#navigation-pointer_svg__a)"},M.createElement("path",{d:"M2.845 8.954c-.497-.193-.745-.29-.817-.429a.417.417 0 0 1 0-.384c.072-.14.32-.236.816-.43L16.917 2.22c.448-.174.671-.262.814-.214a.416.416 0 0 1 .264.263c.047.143-.04.367-.215.815l-5.492 14.073c-.193.496-.29.744-.429.816a.416.416 0 0 1-.385 0c-.139-.073-.235-.32-.428-.817l-2.19-5.632a.895.895 0 0 0-.09-.193.416.416 0 0 0-.096-.097.9.9 0 0 0-.194-.09l-5.631-2.19Z",stroke:"#475467",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),M.createElement("defs",null,M.createElement("clipPath",{id:"navigation-pointer_svg__a"},M.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"}))));var Se="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBkPSJNMi44NDUgOC45NTRjLS40OTctLjE5My0uNzQ1LS4yOS0uODE3LS40MjlhLjQxNy40MTcgMCAwIDEgMC0uMzg0Yy4wNzItLjE0LjMyLS4yMzYuODE2LS40M0wxNi45MTcgMi4yMmMuNDQ4LS4xNzQuNjcxLS4yNjIuODE0LS4yMTRhLjQxNi40MTYgMCAwIDEgLjI2NC4yNjNjLjA0Ny4xNDMtLjA0LjM2Ny0uMjE1LjgxNWwtNS40OTIgMTQuMDczYy0uMTkzLjQ5Ni0uMjkuNzQ0LS40MjkuODE2YS40MTYuNDE2IDAgMCAxLS4zODUgMGMtLjEzOS0uMDczLS4yMzUtLjMyLS40MjgtLjgxN2wtMi4xOS01LjYzMmEuODk1Ljg5NSAwIDAgMC0uMDktLjE5My40MTYuNDE2IDAgMCAwLS4wOTYtLjA5Ny45LjkgMCAwIDAtLjE5NC0uMDlsLTUuNjMxLTIuMTlaIiBzdHJva2U9IiM0NzU0NjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9nPjxkZWZzPjxjbGlwUGF0aCBpZD0iYSI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTAgMGgyMHYyMEgweiIvPjwvY2xpcFBhdGg+PC9kZWZzPjwvc3ZnPg==",ve=e(18334),fe=e(49468),ge=e(65400),pe=e(41978),he=function(y){var C=y.handleTesting,G=(0,L.useSelector)(function(K){return K.testingModel.documents}),N=(0,L.useDispatch)(),F=(0,fe.pC)(),J=[{title:"Name",dataIndex:"doc_name",key:"doc_name",render:function(x){return(0,t.jsx)("p",{children:x})}},{title:"Hits",dataIndex:"count",key:"count",width:80},{title:"View",key:"view",width:50,render:function(x,X){var Y=X.doc_id,q=X.doc_name;return(0,t.jsx)(ve.Z,{link:F(Y),preventDefault:!(0,ge.Ze)(q),children:(0,t.jsx)(me,{})})}}],H={onChange:function(x){N({type:"testingModel/setSelectedDocumentIds",payload:x}),C()},getCheckboxProps:function(x){return{disabled:x.doc_name==="Disabled User",name:x.doc_name}}};return(0,t.jsx)(pe.Z,{columns:J,dataSource:G,showHeader:!1,rowSelection:H,rowKey:"doc_id"})},De=he,$={testingResultWrapper:"testingResultWrapper____vEJI",selectFilesCollapse:"selectFilesCollapse___WeBtG",selectFilesTitle:"selectFilesTitle___nknYG",similarityCircle:"similarityCircle___aWv8z",similarityText:"similarityText___sA5SL",image:"image___FOh9e",imagePreview:"imagePreview___n8h43"},Me=[{field:"similarity",label:"Hybrid Similarity"},{field:"term_similarity",label:"Term Similarity"},{field:"vector_similarity",label:"Vector Similarity"}],Ee=function(y){var C=y.item,G=(0,k.qM)("knowledgeDetails"),N=G.t;return(0,t.jsx)(D.Z,{gap:10,children:Me.map(function(F){return(0,t.jsxs)(ee.Z,{children:[(0,t.jsx)("span",{className:$.similarityCircle,children:(C[F.field]*100).toFixed(2)}),(0,t.jsx)("span",{className:$.similarityText,children:N(ue()(F.field))})]},F.field)})})},ye=function(y){var C,G=y.handleTesting,N=(0,L.useSelector)(function(V){return V.testingModel}),F=N.documents,J=N.chunks,H=N.total,K=N.pagination,x=N.selectedDocumentIds,X=(0,L.useDispatch)(),Y=(0,k.qM)("knowledgeDetails"),q=Y.t,Pe=function(re,ae){console.log("Page: ",re,ae),X({type:"testingModel/setPagination",payload:{current:re,pageSize:ae}}),G()};return(0,t.jsxs)("section",{className:$.testingResultWrapper,children:[(0,t.jsx)(R.Z,{expandIcon:function(){return(0,t.jsx)(W,{})},className:$.selectFilesCollapse,items:[{key:"1",label:(0,t.jsxs)(D.Z,{justify:"space-between",align:"center",className:$.selectFilesTitle,children:[(0,t.jsxs)(ee.Z,{children:[(0,t.jsxs)("span",{children:[(C=x==null?void 0:x.length)!==null&&C!==void 0?C:0,"/",F.length]}),q("filesSelected")]}),(0,t.jsxs)(ee.Z,{size:52,children:[(0,t.jsx)("b",{children:q("hits")}),(0,t.jsx)("b",{children:q("view")})]})]}),children:(0,t.jsx)("div",{children:(0,t.jsx)(De,{handleTesting:G})})}]}),(0,t.jsx)(D.Z,{gap:"large",vertical:!0,flex:1,className:$.selectFilesCollapse,children:J.map(function(V){return(0,t.jsx)(w.Z,{title:(0,t.jsx)(Ee,{item:V}),children:(0,t.jsxs)(D.Z,{gap:"middle",children:[V.img_id&&(0,t.jsx)(oe.Z,{placement:"left",content:(0,t.jsx)(U.Z,{id:V.img_id,className:$.imagePreview}),children:(0,t.jsx)(U.Z,{id:V.img_id,className:$.image})}),(0,t.jsx)("div",{children:V.content_with_weight})]})},V.chunk_id)})}),(0,t.jsx)(se.Z,{size:"small",showQuickJumper:!0,current:K.current,pageSize:K.pageSize,total:H,showSizeChanger:!0,onChange:Pe})]})},Ce=ye,je={testingWrapper:"testingWrapper___w_vXb"},Ie=function(){var y=h.Z.useForm(),C=l()(y,1),G=C[0],N=(0,a.aX)(),F=(0,L.useDispatch)(),J=function(){var H=s()(c()().mark(function K(){var x;return c()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,G.validateFields();case 2:x=Y.sent,N(d()(d()({},x),{},{vector_similarity_weight:1-x.vector_similarity_weight}));case 4:case"end":return Y.stop()}},K)}));return function(){return H.apply(this,arguments)}}();return(0,M.useEffect)(function(){return function(){F({type:"testingModel/reset"})}},[F]),(0,t.jsxs)(D.Z,{className:je.testingWrapper,gap:16,children:[(0,t.jsx)(o,{form:G,handleTesting:J}),(0,t.jsx)(Ce,{handleTesting:J})]})},Le=Ie},65400:function(E,m,e){"use strict";e.d(m,{RT:function(){return d},Re:function(){return p},YC:function(){return s},Ze:function(){return i},q1:function(){return c}});var g=e(57632),c=function(l,a){var h;return Array.isArray(l==null?void 0:l.positions)&&l.positions.every(function(D){return Array.isArray(D)})?l==null||(h=l.positions)===null||h===void 0?void 0:h.map(function(D){var M={width:a.width,height:a.height,x1:D[1],x2:D[2],y1:D[3],y2:D[4]};return{id:(0,g.Z)(),comment:{text:"",emoji:""},content:{text:l.content_with_weight},position:{boundingRect:M,rects:[M],pageNumber:D[0]}}}):[]},p=function(l){return l.status==="done"},d=function(l){var a;return(a=l==null?void 0:l.slice(l.lastIndexOf(".")+1).toLowerCase())!==null&&a!==void 0?a:""},i=function(l){return d(l)==="pdf"},s=function(l){return l.split(`
`).length}},49867:function(E,m,e){"use strict";e.d(m,{N:function(){return g}});const g=c=>({color:c.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${c.motionDurationSlow}`,"&:focus, &:hover":{color:c.colorLinkHover},"&:active":{color:c.colorLinkActive}})},44286:function(E){function m(e){return e.split("")}E.exports=m},40180:function(E,m,e){var g=e(14259);function c(p,d,i){var s=p.length;return i=i===void 0?s:i,!d&&i>=s?p:g(p,d,i)}E.exports=c},98805:function(E,m,e){var g=e(40180),c=e(62689),p=e(83140),d=e(79833);function i(s){return function(r){r=d(r);var l=c(r)?p(r):void 0,a=l?l[0]:r.charAt(0),h=l?g(l,1).join(""):r.slice(1);return a[s]()+h}}E.exports=i},62689:function(E){var m="\\ud800-\\udfff",e="\\u0300-\\u036f",g="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",p=e+g+c,d="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+m+p+d+"]");function r(l){return s.test(l)}E.exports=r},83140:function(E,m,e){var g=e(44286),c=e(62689),p=e(676);function d(i){return c(i)?p(i):g(i)}E.exports=d},676:function(E){var m="\\ud800-\\udfff",e="\\u0300-\\u036f",g="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",p=e+g+c,d="\\ufe0e\\ufe0f",i="["+m+"]",s="["+p+"]",r="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+r+")",a="[^"+m+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",D="[\\ud800-\\udbff][\\udc00-\\udfff]",M="\\u200d",L=l+"?",b="["+d+"]?",A="(?:"+M+"(?:"+[a,h,D].join("|")+")"+b+L+")*",w=b+L+A,B="(?:"+[a+s+"?",s,h,D,i].join("|")+")",z=RegExp(r+"(?="+r+")|"+B+w,"g");function Z(k){return k.match(z)||[]}E.exports=Z},68929:function(E,m,e){var g=e(48403),c=e(35393),p=c(function(d,i,s){return i=i.toLowerCase(),d+(s?g(i):i)});E.exports=p},48403:function(E,m,e){var g=e(79833),c=e(11700);function p(d){return c(g(d).toLowerCase())}E.exports=p},11700:function(E,m,e){var g=e(98805),c=g("toUpperCase");E.exports=c},79370:function(E,m,e){"use strict";e.d(m,{G:function(){return d}});var g=e(98924),c=function(s){if((0,g.Z)()&&window.document.documentElement){var r=Array.isArray(s)?s:[s],l=window.document.documentElement;return r.some(function(a){return a in l.style})}return!1},p=function(s,r){if(!c(s))return!1;var l=document.createElement("div"),a=l.style[s];return l.style[s]=r,l.style[s]!==a};function d(i,s){return!Array.isArray(i)&&s!==void 0?p(i,s):c(i)}},86635:function(E){function m(e){return Promise.resolve().then(function(){var g=new Error("Cannot find module '"+e+"'");throw g.code="MODULE_NOT_FOUND",g})}m.keys=function(){return[]},m.resolve=m,m.id=86635,E.exports=m}}]);

//# sourceMappingURL=p__add-knowledge__components__knowledge-testing__index.f34b446b.async.js.map