(self.webpackChunk=self.webpackChunk||[]).push([[7510],{96330:function($,g,e){"use strict";e.d(g,{Rx:function(){return S},S8:function(){return d},Vr:function(){return c},cG:function(){return M},ld:function(){return k},oQ:function(){return h}});var w=e(9783),f=e.n(w),S=function(a){return a.Dataset="dataset",a.Testing="testing",a.Configuration="configuration",a}({}),M=function(a){return a.UNSTART="0",a.RUNNING="1",a.CANCEL="2",a.DONE="3",a.FAIL="4",a}({}),h=function(a){return a.Improvise="Improvise",a.Precise="Precise",a.Balance="Balance",a}({}),d=f()(f()(f()({},h.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),h.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),h.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),c=function(a){return a.Embedding="embedding",a.Chat="chat",a.Image2text="image2text",a.Speech2text="speech2text",a.Rerank="rerank",a}({}),k=function(a){return a.DocumentId="doc_id",a.KnowledgeId="id",a}({})},2039:function($,g,e){"use strict";e.d(g,{I3:function(){return R},pG:function(){return O},qM:function(){return J}});var w=e(15009),f=e.n(w),S=e(99289),M=e.n(S),h=e(5574),d=e.n(h),c=e(21640),k=e(3321),a=e(18446),j=e.n(a),B=e(62435),x=e(67421),y=e(86074),O=function(){var u=(0,B.useState)(!1),i=d()(u,2),m=i[0],o=i[1],r=function(){o(!0)},n=function(){o(!1)},s=function(){o(!m)};return{visible:m,showModal:r,hideModal:n,switchVisible:s}},K=function(u,i){var m=useRef(),o=function(){};isEqual(i,m.current)||(o=u(),m.current=i),useEffect(function(){return function(){o&&o()}},[])};function A(D){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=useRef(),m=useState(!1),o=_slicedToArray(m,2),r=o[0],n=o[1],s=useState(),l=_slicedToArray(s,2),p=l[0],P=l[1],C=u.onCompleted,E=u.onError;return useEffect(function(){n(!0);var U=function(){var b=_asyncToGenerator(_regeneratorRuntime().mark(function I(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(86635)(D);case 3:i.current=t.sent.ReactComponent,C==null||C(D,i.current),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),E==null||E(t.t0),P(t.t0);case 11:return t.prev=11,n(!1),t.finish(11);case 14:case"end":return t.stop()}},I,null,[[0,7,11,14]])}));return function(){return b.apply(this,arguments)}}();U()},[D,C,E]),{error:p,loading:r,SvgIcon:i.current}}var R=function(){var u=k.Z.useApp(),i=u.modal,m=(0,x.$G)(),o=m.t,r=(0,B.useCallback)(function(n){var s=n.onOk,l=n.onCancel;return new Promise(function(p,P){i.confirm({title:o("common.deleteModalTitle"),icon:(0,y.jsx)(c.Z,{}),okText:o("common.ok"),okType:"danger",cancelText:o("common.cancel"),onOk:function(){return M()(f()().mark(function E(){var U;return f()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,s==null?void 0:s();case 3:U=I.sent,p(U),console.info(U),I.next=11;break;case 8:I.prev=8,I.t0=I.catch(0),P(I.t0);case 11:case"end":return I.stop()}},E,null,[[0,8]])}))()},onCancel:function(){l==null||l()}})})},[o,i]);return r},J=function(u){return(0,x.$G)("translation",{keyPrefix:u})},Y=function(){return useTranslation("translation",{keyPrefix:"common"})}},82182:function($,g,e){"use strict";e.d(g,{K2:function(){return i},MA:function(){return u},PX:function(){return A},SD:function(){return x},VJ:function(){return J},aX:function(){return m},l5:function(){return Y},qH:function(){return K},tP:function(){return R},w9:function(){return j},wK:function(){return B}});var w=e(97857),f=e.n(w),S=e(5574),M=e.n(S),h=e(2039),d=e(62435),c=e(6589),k=e(65534),a=e(25194),j=function(){var r=(0,c.useSearchParams)(),n=M()(r,1),s=n[0],l=s.get("id");return l||""},B=function(){var r=(0,c.useDispatch)(),n=j(),s=(0,h.I3)(),l=function(C){return function(){return r({type:"kFModel/document_rm",payload:{doc_id:C,kb_id:n}})}},p=function(C){return s({onOk:l(C)})};return{removeDocument:p}},x=function(){var r=(0,c.useDispatch)(),n=(0,k.pE)(),s=n.knowledgeId,l=(0,d.useCallback)(function(p){r({type:"knowledgeModel/getKnowledgeDetail",payload:{kb_id:p}})},[r]);return(0,d.useEffect)(function(){l(s)},[l,s]),l},y=function(){var r=useSelector(function(n){return n.knowledgeModel.knowledge});return r},O=function(){var r,n,s=y();return{defaultParserId:(r=s==null?void 0:s.parser_id)!==null&&r!==void 0?r:"",parserConfig:(n=s==null?void 0:s.parser_config)!==null&&n!==void 0?n:""}},K=function(){var r=(0,c.useDispatch)(),n=(0,h.I3)(),s=(0,d.useCallback)(function(p,P){return function(){return r({type:"chunkModel/rm_chunk",payload:{chunk_ids:p,doc_id:P}})}},[r]),l=(0,d.useCallback)(function(p,P){return n({onOk:s(p,P)})},[s,n]);return{removeChunk:l}},A=function(){var r=(0,c.useDispatch)(),n=j(),s=(0,d.useCallback)(function(){r({type:"kSModel/getKbDetail",payload:{kb_id:n}})},[r,n]);(0,d.useEffect)(function(){s()},[s])},R=function(){var r=(0,c.useSelector)(function(l){return l.knowledgeModel}),n=r.data,s=n===void 0?[]:n;return s},J=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=(0,c.useDispatch)(),s=(0,a.q)("knowledgeModel",["getList"]),l=(0,c.useSelector)(function(U){return U.knowledgeModel}),p=l.data,P=p===void 0?[]:p,C=(0,d.useMemo)(function(){return r?P.filter(function(U){return U.chunk_num>0}):P},[P,r]),E=(0,d.useCallback)(function(){n({type:"knowledgeModel/getList"})},[n]);return(0,d.useEffect)(function(){E()},[E]),{list:C,loading:s,fetchList:E}},Y=function(){var r=(0,c.useSelector)(function(n){return n.kFModel.fileThumbnails});return r},D=function(r){var n=useDispatch(),s=Y(),l=useCallback(function(p){n({type:"kFModel/fetch_document_thumbnails",payload:{doc_ids:p.join(",")}})},[n]);return useEffect(function(){r&&l(r)},[r,l]),{fileThumbnails:s,fetchFileThumbnails:l}},u=function(){var r=(0,c.useDispatch)(),n=(0,d.useCallback)(function(s){r({type:"kSModel/updateKb",payload:s})},[r]);return n},i=function(){var r=(0,c.useSelector)(function(n){return n.kSModel.knowledgeDetails});return r},m=function(){var r=(0,c.useDispatch)(),n=j(),s=(0,d.useCallback)(function(l){r({type:"testingModel/testDocumentChunk",payload:f()(f()({},l),{},{kb_id:n})})},[r,n]);return s}},65534:function($,g,e){"use strict";e.d(g,{HK:function(){return a},Uu:function(){return k},nT:function(){return x},pE:function(){return j},wy:function(){return B}});var w=e(5574),f=e.n(w),S=e(96330),M=e(62435),h=e(6589),d=function(y){return y.Second="2",y.Third="3",y}({}),c=function(O){var K=(0,h.useLocation)(),A=K.pathname,R=A.split("/");return R[O]||""},k=function(){return c(d.Second)},a=function(){return c(d.Third)},j=function(){var O=(0,h.useSearchParams)(),K=f()(O,1),A=K[0];return{documentId:A.get(S.ld.DocumentId)||"",knowledgeId:A.get(S.ld.KnowledgeId)||""}},B=function(){var O=(0,h.useNavigate)();return(0,M.useCallback)(function(K){O(K,{state:{from:K}})},[O])},x=function(){var O=(0,h.useNavigate)(),K=j(),A=K.knowledgeId;return(0,M.useCallback)(function(){O("/knowledge/".concat(S.Rx.Dataset,"?id=").concat(A))},[A,O])}},25194:function($,g,e){"use strict";e.d(g,{q:function(){return M}});var w=function(d,c,k){return k.some(function(a){return c["".concat(d,"/").concat(a)]})},f=function(d){return new Promise(function(c){setTimeout(c,d)})},S=e(6589),M=function(d,c){var k=(0,S.useSelector)(function(a){return a.loading.effects});return w(d,k,c)}},79495:function($,g,e){"use strict";e.d(g,{Jf:function(){return Y},WH:function(){return R},XH:function(){return K},Zl:function(){return y},aU:function(){return A},fS:function(){return O},jd:function(){return B},ml:function(){return x},nv:function(){return J}});var w=e(5574),f=e.n(w),S=e(15009),M=e.n(S),h=e(99289),d=e.n(h),c=e(85162),k=e(32358),a=e(62435),j=e(6589),B=function(){var u=(0,j.useDispatch)(),i=(0,a.useCallback)(function(){u({type:"settingModel/getUserInfo"})},[u]);(0,a.useEffect)(function(){i()},[i])},x=function(){var u=(0,j.useSelector)(function(i){return i.settingModel.userInfo});return u},y=function(){var u=(0,j.useSelector)(function(i){return i.settingModel.tenantIfo});return u},O=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=(0,j.useDispatch)(),m=(0,a.useCallback)(function(){i({type:"settingModel/getTenantInfo"})},[i]);return(0,a.useEffect)(function(){u&&m()},[m,u]),m},K=function(){var u=y(),i=(0,a.useMemo)(function(){var m,o=(m=u==null?void 0:u.parser_ids.split(","))!==null&&m!==void 0?m:[];return o.map(function(r){var n=r.split(":");return{value:n[0],label:n[1]}})},[u]);return i},A=function(){var u=(0,j.useDispatch)(),i=(0,a.useCallback)(d()(M()().mark(function m(){var o;return M()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u({type:"loginModel/logout"});case 2:o=n.sent,o===0&&(k.Z.removeAll(),j.history.push("/login"));case 4:case"end":return n.stop()}},m)})),[u]);return i},R=function(){var u=(0,j.useDispatch)(),i=(0,a.useCallback)(function(m){return u({type:"settingModel/setting",payload:m})},[u]);return i},J=function(){var u=(0,a.useState)(""),i=f()(u,2),m=i[0],o=i[1],r=(0,a.useState)(!1),n=f()(r,2),s=n[0],l=n[1],p=(0,a.useCallback)(d()(M()().mark(function P(){var C,E;return M()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return l(!0),b.next=3,c.Z.getSystemVersion();case 3:C=b.sent,E=C.data,E.retcode===0&&(o(E.data),l(!1));case 6:case"end":return b.stop()}},P)})),[]);return{fetchSystemVersion:p,version:m,loading:s}},Y=function(){var u=(0,a.useState)({}),i=f()(u,2),m=i[0],o=i[1],r=(0,a.useState)(!1),n=f()(r,2),s=n[0],l=n[1],p=(0,a.useCallback)(d()(M()().mark(function P(){var C,E;return M()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return l(!0),b.next=3,c.Z.getSystemStatus();case 3:C=b.sent,E=C.data,E.retcode===0&&(o(E.data),l(!1));case 6:case"end":return b.stop()}},P)})),[]);return{systemStatus:m,fetchSystemStatus:p,loading:s}}},88087:function($,g,e){"use strict";e.r(g),e.d(g,{default:function(){return Ce}});var w=e(5574),f=e.n(w),S=e(62435),M=function(v){var _=v.children,W=(0,S.useState)(!1),F=f()(W,2),V=F[0],N=F[1],Z=function(){N(!0)},X=function(){N(!1)};return _({visible:V,showModal:Z,hideModal:X})},h=M,d=e(82182),c=e(79495),k=e(68795),a=e(24969),j=e(86250),B=e(42075),x=e(79531),y=e(15867),O=e(75081),K=e(32983),A=Object.defineProperty,R=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,D=(L,v,_)=>v in L?A(L,v,{enumerable:!0,configurable:!0,writable:!0,value:_}):L[v]=_,u=(L,v)=>{for(var _ in v||(v={}))J.call(v,_)&&D(L,_,v[_]);if(R)for(var _ of R(v))Y.call(v,_)&&D(L,_,v[_]);return L};const i=L=>S.createElement("svg",u({width:24,height:6,fill:"none",xmlns:"http://www.w3.org/2000/svg"},L),S.createElement("path",{d:"M12 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5ZM20.75 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5ZM3.25 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z",stroke:"#98A2B3",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round"}));var m="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgNC4yNWExLjI1IDEuMjUgMCAxIDAgMC0yLjUgMS4yNSAxLjI1IDAgMCAwIDAgMi41Wk0yMC43NSA0LjI1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjVaTTMuMjUgNC4yNWExLjI1IDEuMjUgMCAxIDAgMC0yLjUgMS4yNSAxLjI1IDAgMCAwIDAgMi41WiIgc3Ryb2tlPSIjOThBMkIzIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+",o=e(96330),r=e(2039),n=e(28382),s=e(48689),l=e(87547),p=e(15360),P=e(20841),C=e(4393),E=e(7134),U=e(85418),b=e(67421),I=e(6589),T={container:"container___eQyW8",delete:"delete___IVvZv",content:"content___BVb9e",context:"context___rx_ll",footerTop:"footerTop___zv8Sq",card:"card___m1xzY",titleWrapper:"titleWrapper___f7thW",title:"title___rMM_S",description:"description___G_6nv",bottom:"bottom___oTHOs",bottomLeft:"bottomLeft___d92Vz",leftIcon:"leftIcon___nOsbs",rightText:"rightText___N4_qm"},t=e(86074),de=function(v){var _=v.item,W=(0,I.useNavigate)(),F=(0,I.useDispatch)(),V=(0,r.I3)(),N=(0,b.$G)(),Z=N.t,X=function(){return F({type:"knowledgeModel/rmKb",payload:{kb_id:_.id}})},z=function(){V({onOk:X})},q=[{key:"1",label:(0,t.jsxs)(B.Z,{children:[Z("common.delete"),(0,t.jsx)(s.Z,{})]})}],G=function(te){var se=te.domEvent,H=te.key;se.preventDefault(),se.stopPropagation(),H==="1"&&z()},re=function(){W("/knowledge/".concat(o.Rx.Dataset,"?id=").concat(_.id),{state:{from:"list"}})};return(0,t.jsx)(C.Z,{className:T.card,onClick:re,children:(0,t.jsxs)("div",{className:T.container,children:[(0,t.jsxs)("div",{className:T.content,children:[(0,t.jsx)(E.C,{size:34,icon:(0,t.jsx)(l.Z,{}),src:_.avatar}),(0,t.jsx)(U.Z,{menu:{items:q,onClick:G},children:(0,t.jsx)("span",{className:T.delete,children:(0,t.jsx)(i,{})})})]}),(0,t.jsxs)("div",{className:T.titleWrapper,children:[(0,t.jsx)("span",{className:T.title,children:_.name}),(0,t.jsx)("p",{children:_.description})]}),(0,t.jsxs)("div",{className:T.footer,children:[(0,t.jsx)("div",{className:T.footerTop,children:(0,t.jsxs)("div",{className:T.bottomLeft,children:[(0,t.jsx)(p.Z,{className:T.leftIcon}),(0,t.jsx)("span",{className:T.rightText,children:(0,t.jsxs)(B.Z,{children:[_.doc_num,Z("knowledgeList.doc")]})})]})}),(0,t.jsx)("div",{className:T.bottom,children:(0,t.jsxs)("div",{className:T.bottomLeft,children:[(0,t.jsx)(P.Z,{className:T.leftIcon}),(0,t.jsx)("span",{className:T.rightText,children:(0,n.p6)(_.update_time)})]})})]})]})})},ce=de,_e=e(15009),ie=e.n(_e),me=e(99289),ve=e.n(me),oe=e(99859),fe=e(85576),ge=function(v){var _=v.visible,W=v.hideModal,F=oe.Z.useForm(),V=f()(F,1),N=V[0],Z=(0,I.useDispatch)(),X=(0,I.useSelector)(function(H){return H.loading.effects["kSModel/createKb"]}),z=(0,I.useNavigate)(),q=(0,b.$G)("translation",{keyPrefix:"knowledgeList"}),G=q.t,re=function(){var H=ve()(ie()().mark(function ae(){var le,ue;return ie()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,N.validateFields();case 2:return le=ne.sent,ne.next=5,Z({type:"kSModel/createKb",payload:{name:le.name}});case 5:ue=ne.sent,ue.retcode===0&&(z("/knowledge/".concat(o.Rx.Configuration,"?id=").concat(ue.data.kb_id)),W());case 7:case"end":return ne.stop()}},ae)}));return function(){return H.apply(this,arguments)}}(),ee=function(){W()},te=function(ae){console.log("Success:",ae)},se=function(ae){console.log("Failed:",ae)};return(0,t.jsx)(fe.Z,{title:G("createKnowledgeBase"),open:_,onOk:re,onCancel:ee,okButtonProps:{loading:X},children:(0,t.jsx)(oe.Z,{name:"Create",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},onFinish:te,onFinishFailed:se,autoComplete:"off",form:N,children:(0,t.jsx)(oe.Z.Item,{label:G("name"),name:"name",rules:[{required:!0,message:G("namePlaceholder")}],children:(0,t.jsx)(x.Z,{placeholder:G("namePlaceholder")})})})})},he=ge,pe=function(){var v=(0,S.useState)(""),_=f()(v,2),W=_[0],F=_[1],V=function(Z){F(Z.target.value)};return{searchString:W,handleInputChange:V}},De=function(v){var _=(0,d.tP)();return _.filter(function(W){return W.name.includes(v)})},Q={knowledge:"knowledge___CaWP3",topWrapper:"topWrapper___wSBFd",title:"title___K81Cs",description:"description___r7Ii4",topButton:"topButton___AGnXw",filterButton:"filterButton___asdet",knowledgeCardContainer:"knowledgeCardContainer___ouwmb",knowledgeEmpty:"knowledgeEmpty___YQOlB"},Me=function(){var v=pe(),_=v.searchString,W=v.handleInputChange,F=(0,d.VJ)(),V=F.loading,N=De(_),Z=(0,c.ml)(),X=(0,b.$G)("translation",{keyPrefix:"knowledgeList"}),z=X.t;return(0,t.jsxs)(j.Z,{className:Q.knowledge,vertical:!0,flex:1,children:[(0,t.jsxs)("div",{className:Q.topWrapper,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:Q.title,children:[z("welcome"),", ",Z.nickname]}),(0,t.jsx)("p",{className:Q.description,children:z("description")})]}),(0,t.jsxs)(B.Z,{size:"large",children:[(0,t.jsx)(x.Z,{placeholder:z("searchKnowledgePlaceholder"),value:_,style:{width:220},allowClear:!0,onChange:W,prefix:(0,t.jsx)(k.Z,{})}),(0,t.jsx)(h,{children:function(G){var re=G.visible,ee=G.hideModal,te=G.showModal;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.ZP,{type:"primary",icon:(0,t.jsx)(a.Z,{}),onClick:function(){te()},className:Q.topButton,children:z("createKnowledgeBase")}),(0,t.jsx)(he,{visible:re,hideModal:ee})]})}})]})]}),(0,t.jsx)(O.Z,{spinning:V,children:(0,t.jsx)(j.Z,{gap:"large",wrap:"wrap",className:Q.knowledgeCardContainer,children:N.length>0?N.map(function(q){return(0,t.jsx)(ce,{item:q},q.name)}):(0,t.jsx)(K.Z,{className:Q.knowledgeEmpty})})})]})},Ce=Me},28382:function($,g,e){"use strict";e.d(g,{p6:function(){return d}});var w=e(27484),f=e.n(w);function S(){return d(dayjs())}function M(){return d(dayjs().subtract(1,"days"))}function h(){return d(dayjs().subtract(1,"weeks"))}function d(c){return c?f()(c).format("DD/MM/YYYY HH:mm:ss"):""}},86635:function($){function g(e){return Promise.resolve().then(function(){var w=new Error("Cannot find module '"+e+"'");throw w.code="MODULE_NOT_FOUND",w})}g.keys=function(){return[]},g.resolve=g,g.id=86635,$.exports=g}}]);

//# sourceMappingURL=p__knowledge__index.c09d6e6c.async.js.map