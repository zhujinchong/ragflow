{"version":3,"file":"p__document-viewer__index.379b0895.async.js","mappings":"mTAMaA,EAAmB,UAAM,CACpC,IAAAC,KAA8BC,EAAAA,UAAS,EAAK,EAACC,EAAAC,EAAAA,EAAAH,EAAA,GAAtCI,EAAOF,EAAA,GAAEG,EAAUH,EAAA,GAEpBI,EAAY,UAAM,CACtBD,EAAW,EAAI,CACjB,EACME,EAAY,UAAM,CACtBF,EAAW,EAAK,CAClB,EAEMG,EAAgB,UAAM,CAC1BH,EAAW,CAACD,CAAO,CACrB,EAEA,MAAO,CAAEA,QAAAA,EAASE,UAAAA,EAAWC,UAAAA,EAAWC,cAAAA,CAAc,CACxD,EAEaC,EAAuB,SAClCC,EACAC,EACG,CACH,IAAMC,EAAMC,OAA6B,EACrCC,EAA6C,UAAM,CAAC,EACnDC,QAAQJ,EAAMC,EAAII,OAAO,IAC5BF,EAAWJ,EAAO,EAClBE,EAAII,QAAUL,GAEhBM,UAAU,UAAM,CACd,OAAO,UAAM,CACPH,GACFA,EAAS,CAEb,CACF,EAAG,CAAC,CAAC,CACP,EAUO,SAASI,GACdC,EAEA,KADAC,EAAmCC,UAAAC,OAAA,GAAAD,UAAA,KAAAE,OAAAF,UAAA,GAAG,CAAC,EAEjCG,EAAkBX,OAAgD,EACxEY,EAA8BxB,SAAS,EAAK,EAACyB,EAAAvB,eAAAsB,EAAA,GAAtCE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GAC1BG,EAA0B5B,SAAgB,EAAC6B,EAAA3B,eAAA0B,EAAA,GAApCE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GAEdG,EAAyBb,EAAzBa,YAAaC,EAAYd,EAAZc,QACrBjB,iBAAU,UAAM,CACdW,EAAW,EAAI,EACf,IAAMO,EAAU,eAAAC,EAAAC,kBAAAC,oBAAA,EAAAC,KAAG,SAAAC,GAAA,QAAAF,oBAAA,EAAAG,KAAA,SAAAC,EAAA,eAAAA,EAAAC,KAAAD,EAAAE,KAAA,QAAAF,OAAAA,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEkB,SAAOzB,CAAI,EAAC,OAA7CK,EAAgBR,QAAO0B,EAAAG,KAAwBC,eAC/Cb,GAAW,MAAXA,EAAcd,EAAMK,EAAgBR,OAAO,EAAE0B,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAK,GAAAL,EAAA,SAE7CR,GAAO,MAAPA,EAAOQ,EAAAK,EAAM,EACbf,EAAQU,EAAAK,EAAI,EAAE,QAAAL,OAAAA,EAAAC,KAAA,GAEdf,EAAW,EAAK,EAAEc,EAAAM,OAAA,6BAAAN,EAAAO,KAAA,IAAAT,EAAA,oBAErB,oBAVe,QAAAJ,EAAAc,MAAA,KAAA7B,SAAA,MAWhBc,EAAW,CACb,EAAG,CAAChB,EAAMc,EAAaC,CAAO,CAAC,EAExB,CAAEH,MAAAA,EAAOJ,QAAAA,EAASwB,QAAS3B,EAAgBR,OAAQ,CAC5D,CAOO,IAAMoC,EAAuB,UAAM,CACxC,IAAAC,EAAkBC,EAAAA,EAAIC,OAAO,EAArBC,EAAKH,EAALG,MACRC,KAAcC,EAAAA,IAAe,EAArBC,EAACF,EAADE,EAEFC,KAAoBC,EAAAA,aACxB,SAAAC,EAAiD,KAA9CC,EAAID,EAAJC,KAAMC,EAAQF,EAARE,SACP,OAAO,IAAIC,QAAQ,SAACC,EAASC,EAAW,CACtCX,EAAMY,QAAQ,CACZC,MAAOV,EAAE,yBAAyB,EAClCW,QAAMC,EAAAA,KAACC,EAAAA,EAAuB,EAAE,EAEhCC,OAAQd,EAAE,WAAW,EACrBe,OAAQ,SACRC,WAAYhB,EAAE,eAAe,EACvBI,KAAI,UAAG,QAAA1B,EAAAA,EAAAC,EAAAA,EAAA,EAAAC,KAAA,SAAAqC,GAAA,KAAAC,EAAA,OAAAvC,EAAAA,EAAA,EAAAG,KAAA,SAAAqC,EAAA,eAAAA,EAAAnC,KAAAmC,EAAAlC,KAAA,QAAAkC,OAAAA,EAAAnC,KAAA,EAAAmC,EAAAlC,KAAA,EAESmB,GAAI,YAAJA,EAAO,EAAC,OAApBc,EAAGC,EAAAjC,KACTqB,EAAQW,CAAG,EACXE,QAAQC,KAAKH,CAAG,EAAEC,EAAAlC,KAAA,gBAAAkC,EAAAnC,KAAA,EAAAmC,EAAA/B,GAAA+B,EAAA,SAElBX,EAAMW,EAAA/B,EAAM,EAAE,yBAAA+B,EAAA7B,KAAA,IAAA2B,EAAA,kBAElB,EACAZ,SAAQ,UAAG,CACTA,GAAQ,MAARA,EAAW,CACb,CACF,CAAC,CACH,CAAC,CACH,EACA,CAACL,EAAGH,CAAK,CACX,EAEA,OAAOI,CACT,EAEaqB,EAAe,SAACC,EAAsB,CACjD,SAAOxB,EAAAA,IAAe,cAAe,CAAEwB,UAAAA,CAAU,CAAC,CACpD,EAEaC,EAAuB,UAAM,CACxC,OAAOzB,eAAe,cAAe,CAAEwB,UAAW,QAAS,CAAC,CAC9D,C,mHC3HA,EAAe,CAAC,aAAe,sBAAsB,E,WCK/CE,EAAY,SAAHhD,EAA8C,KAAxCiD,EAAQjD,EAARiD,SACnBC,KAAcL,EAAAA,IAAa,aAAa,EAAhCtB,EAAC2B,EAAD3B,EACR,SACEY,EAAAA,KAACgB,EAAAA,EAAI,CAACC,MAAM,SAASC,QAAQ,SAASC,UAAWC,EAAOC,aAAaP,YACnEd,EAAAA,KAACsB,EAAAA,EAAK,CACJC,KAAK,QACLC,WAASxB,EAAAA,KAAA,MAAAc,SAAKA,GAAY1B,EAAE,WAAW,CAAC,CAAK,CAAE,CACzC,CAAC,CACL,CAEV,EAEA,EAAeyB,C,wQCbFY,EAAgB,SAACC,EAAgB,CAC5C,IAAAjG,KAA0BC,EAAAA,UAAS,EAAE,EAACC,EAAAC,EAAAA,EAAAH,EAAA,GAA/B+B,EAAK7B,EAAA,GAAE8B,EAAQ9B,EAAA,GAChBgG,KAAgBrC,EAAAA,aAAWxB,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAAC,SAAAC,GAAA,KAAAqC,EAAAsB,EAAA,OAAA7D,EAAAA,EAAA,EAAAG,KAAA,SAAAC,EAAA,eAAAA,EAAAC,KAAAD,EAAAE,KAAA,QAAAF,OAAAA,EAAAE,KAAA,EACdwD,EAAAA,EAAMC,IAAIJ,CAAG,EAAC,OAA1BpB,OAAAA,EAAGnC,EAAAG,KACDsD,EAAStB,EAATsB,KACJ,EAAEA,aAAgBG,cAAgBH,EAAKI,UAAY,GACrDvE,EAASmE,EAAKK,MAAM,EACrB9D,EAAA+D,OAAA,SACM5B,CAAG,0BAAAnC,EAAAO,KAAA,IAAAT,CAAA,EACX,GAAE,CAACyD,CAAG,CAAC,EAERhF,SAAAA,EAAAA,WAAU,UAAM,CACdiF,EAAc,CAChB,EAAG,CAACA,CAAa,CAAC,EAEX,CAAEA,cAAAA,EAAenE,MAAAA,CAAM,CAChC,EAEa2E,EAAmB,UAAM,CACpC,IAAMR,KAAgBrC,EAAAA,aAAW,eAAAC,EAAAzB,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAAC,SAAAqC,EAAOqB,EAAa,CAAF,IAAApB,EAAA,OAAAvC,EAAAA,EAAA,EAAAG,KAAA,SAAAqC,EAAE,CAAF,cAAAA,EAAAnC,KAAAmC,EAAAlC,KAAE,CAAF,OAAAkC,OAAAA,EAAAlC,KAAA,EAChCwD,EAAAA,EAAMC,IAAIJ,EAAK,CAAEU,aAAc,aAAc,CAAC,EAAC,OAA3D9B,OAAAA,EAAGC,EAAAjC,KAAAiC,EAAA2B,OAAA,SACF5B,CAAG,0BAAAC,EAAA7B,KAAA,IAAA2B,CAAA,EACX,mBAAAgC,EAAA,QAAA9C,EAAAZ,MAAA,KAAA7B,SAAA,MAAE,CAAC,CAAC,EAEL,MAAO,CAAE6E,cAAAA,CAAc,CACzB,EAEaW,EAAgB,SAACC,EAAqB,CACjD,IAAArF,KAA4BxB,EAAAA,UAAS,EAAI,EAACyB,EAAAvB,EAAAA,EAAAsB,EAAA,GAAnCsF,EAAMrF,EAAA,GAAEsF,EAAStF,EAAA,GACxBuF,EAA0BP,EAAiB,EAAnCR,EAAae,EAAbf,cACFgB,KAAerG,EAAAA,QAAuB,IAAI,EAChDsG,EAAkBnB,EAAcc,CAAQ,EAAhC/E,EAAKoF,EAALpF,MAEFqF,KAAqBvD,EAAAA,aAAWxB,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAAC,SAAA8E,IAAA,KAAAC,EAAAC,EAAAC,EAAA,OAAAlF,EAAAA,EAAA,EAAAG,KAAA,SAAAgF,EAAA,eAAAA,EAAA9E,KAAA8E,EAAA7E,KAAA,QAErC,OAAIsE,EAAalG,UACfuG,EAAmBG,EAAAA,EAAeC,KAAKT,EAAalG,OAAO,GAC5DyG,EAAA7E,KAAA,EACsBsD,EAAcY,CAAQ,EAAC,OAAxCU,EAAQC,EAAA5E,MACdyE,EAAAC,KAAgB,MAAAD,IAAA,QAAhBA,EACIM,QAAQJ,EAASrB,IAAI,EACtB0B,KAAK,UAAM,CACV9C,QAAQ+C,IAAI,SAAS,EACrBd,EAAU,EAAI,CAChB,CAAC,EAAC,MACK,SAACe,EAAM,CACZhD,QAAQiD,KAAK,SAAUD,CAAC,EACxBR,EAAiBU,QAAQ,EACzBjB,EAAU,EAAK,CACjB,CAAC,EAAE,wBAAAS,EAAAxE,KAAA,IAAAoE,EAAA,EACN,GAAE,CAACP,EAAUZ,CAAa,CAAC,EAE5BjF,SAAAA,EAAAA,WAAU,UAAM,CACdmG,EAAmB,CACrB,EAAG,CAACA,CAAkB,CAAC,EAEhB,CAAEL,OAAAA,EAAQG,aAAAA,EAAcnF,MAAAA,CAAM,CACvC,EAEamG,EAAe,SAACpB,EAAqB,CAChD,IAAAjF,KAA8B5B,EAAAA,UAAS,EAAI,EAAC6B,EAAA3B,EAAAA,EAAA0B,EAAA,GAArCsG,EAAOrG,EAAA,GAAEsG,EAAUtG,EAAA,GAC1BuG,EAA0B3B,EAAiB,EAAnCR,EAAamC,EAAbnC,cACFgB,KAAerG,EAAAA,QAAuB,IAAI,EAChDyH,EAAkBtC,EAAcc,CAAQ,EAAhC/E,EAAKuG,EAALvG,MAEFqF,KAAqBvD,EAAAA,aAAWxB,EAAAA,EAAAC,EAAAA,EAAC,EAADC,KAAC,SAAAgG,IAAA,KAAAf,EAAA,OAAAlF,EAAAA,EAAA,EAAAG,KAAA,SAAA+F,EAAA,eAAAA,EAAA7F,KAAA6F,EAAA5F,KAAA,QAAA4F,OAAAA,EAAA5F,KAAA,EACdsD,EAAcY,CAAQ,EAAC,OAAxCU,EAAQgB,EAAA3F,KACd4F,GAAAA,cAEI,CAAEC,YAAalB,EAASrB,IAAK,EAC7B,CAAEwC,uBAAwB,EAAK,CACjC,EACCd,KAAK,SAACe,GAAW,CAChBR,EAAW,EAAI,EACf,IAAMS,EAAQC,SAASC,cAAc,KAAK,EAC1CF,EAAMnD,UAAY,qBAClBmD,EAAMG,UAAYJ,GAAOK,MACzB,IAAMC,EAAYhC,EAAalG,QAC3BkI,IACFA,EAAUF,UAAYH,EAAMM,UAEhC,CAAC,EAAC,MACK,UAAM,CACXf,EAAW,EAAK,CAClB,CAAC,EAAE,wBAAAI,EAAAvF,KAAA,IAAAsF,EAAA,EACN,GAAE,CAACzB,EAAUZ,CAAa,CAAC,EAE5BjF,SAAAA,EAAAA,WAAU,UAAM,CACdmG,EAAmB,CACrB,EAAG,CAACA,CAAkB,CAAC,EAEhB,CAAEe,QAAAA,EAASjB,aAAAA,EAAcnF,MAAAA,CAAM,CACxC,EChGA,EAAe,CAAC,kBAAoB,4BAA4B,IAAM,aAAa,E,WCK7EqH,EAAO,SAAHhH,EAA2C,KAArC0E,EAAQ1E,EAAR0E,SACduC,EAAyCnB,EAAapB,CAAQ,EAAtDqB,EAAOkB,EAAPlB,QAASjB,EAAYmC,EAAZnC,aAAcnF,EAAKsH,EAALtH,MAE/B,SACEwC,EAAAA,KAAA+E,EAAAA,SAAA,CAAAjE,SACG8C,KACC5D,EAAAA,KAAA,WAASmB,UAAWC,EAAO4D,kBAAkBlE,YAC3Cd,EAAAA,KAAA,OAAKiF,GAAG,OAAO5I,IAAKsG,EAAcxB,UAAWC,EAAO8D,IAAIpE,YACtDd,EAAAA,KAACmF,EAAAA,EAAI,EAAE,CAAC,CACL,CAAC,CACC,KAETnF,EAAAA,KAACa,EAAAA,EAAS,CAAAC,SAAEtD,CAAK,CAAY,CAC9B,CACD,CAEN,EAEA,EAAeqH,E,WCpBTO,EAAQ,SAAHvH,EAA2C,KAArC0E,EAAQ1E,EAAR0E,SACf8C,EAAwC/C,EAAcC,CAAQ,EAAtDC,EAAM6C,EAAN7C,OAAQG,EAAY0C,EAAZ1C,aAAcnF,EAAK6H,EAAL7H,MAE9B,SACEwC,EAAAA,KAAA,OACEiF,GAAG,QACH5I,IAAKsG,EACL2C,MAAO,CAAEC,OAAQ,OAAQC,MAAO,MAAO,EAAE1E,SAExC0B,MAAUxC,EAAAA,KAACa,EAAAA,EAAS,CAAAC,SAAEtD,CAAK,CAAY,CAAC,CACtC,CAET,EAEA,EAAe4H,E,sBCTTK,EAAe,SAAH5H,EAAwB,KAAlB6H,EAAG7H,EAAH6H,IACtB9C,EAAkBnB,EAAciE,CAAG,EAA3BlI,EAAKoF,EAALpF,MACFmI,EAAY,UAAM,CAAC,EAEzB,SACE3F,EAAAA,KAAA,OAAKsF,MAAO,CAAEE,MAAO,OAAQD,OAAQ,MAAO,EAAEzE,YAC5Cd,EAAAA,KAAC4F,EAAAA,GAAS,CACRF,IAAKA,EACLG,cAAY7F,EAAAA,KAAC8F,EAAAA,EAAQ,CAACC,OAAM,GAAE,EAC9BC,UAAU,gCACVC,gBAAcjG,EAAAA,KAACa,EAAAA,EAAS,CAAAC,SAAEtD,CAAK,CAAY,EAC3CG,QAAS,SAAC6F,EAAM,CACdhD,QAAQiD,KAAKD,CAAC,CAChB,EAAE1C,SAED,SAACoF,EAAgB,CAChB,SACElG,EAAAA,KAACmG,EAAAA,GAAc,CACbD,YAAaA,EACbE,oBAAqB,SAACC,EAAO,CAAF,OAAKA,EAAMC,MAAM,EAC5CC,eAAgBZ,EAChBa,UAAW,UAAM,CAAC,EAClBC,oBAAqB,kBAAM,IAAI,EAC/BC,mBAAoB,UAAM,CACxB,SAAO1G,EAAAA,KAAA,QAAU,CACnB,EACA2G,WAAY,CAAC,CAAE,CAChB,CAEL,CAAC,CACQ,CAAC,CACT,CAET,EAEA,EAAelB,EC3Cf,EAAe,CAAC,cAAgB,wBAAwB,MAAQ,eAAe,ECWzEmB,EAAiB,UAAM,CAC3B,IAAAC,KAA2BC,EAAAA,WAAU,EAAzBC,EAAUF,EAAd5B,GACFvD,EAAM,GAAHsF,OAAMC,EAAAA,EAAQ,cAAAD,OAAaD,CAAU,EAC9CG,KAAiCC,EAAAA,iBAAgB,EAACC,EAAAxL,EAAAA,EAAAsL,EAAA,GAA3CG,EAAsBD,EAAA,GACvBE,EAAMD,EAAuBvF,IAAI,KAAK,EAE5C,SACEyF,EAAAA,MAAA,WAASpG,UAAWC,EAAOoG,cAAc1G,SAAA,CACtC2G,EAAAA,GAAOC,SAASJ,CAAI,MACnBtH,EAAAA,KAACgB,EAAAA,EAAI,CAACG,UAAWC,EAAOuG,MAAO1G,MAAM,SAASC,QAAQ,SAAQJ,YAC5Dd,EAAAA,KAAC4H,EAAAA,EAAK,CAACC,IAAKnG,EAAK2B,QAAS,EAAM,CAAQ,CAAC,CACrC,EAEPiE,IAAQ,UAAStH,EAAAA,KAAC8H,EAAG,CAACpC,IAAKhE,CAAI,CAAM,GACpC4F,IAAQ,QAAUA,IAAQ,WAAUtH,EAAAA,KAACoF,EAAK,CAAC7C,SAAUb,CAAI,CAAQ,EAElE4F,IAAQ,WAAUtH,EAAAA,KAAC6E,EAAI,CAACtC,SAAUb,CAAI,CAAO,CAAC,EACxC,CAEb,EAEA,EAAekF,C,oBCjCf,SAASmB,EAAyBC,EAAK,CAGtC,OAAO,QAAQ,QAAQ,EAAE,KAAK,UAAW,CACxC,IAAIxE,EAAI,IAAI,MAAM,uBAAyBwE,EAAM,GAAG,EACpD,MAAAxE,EAAE,KAAO,mBACHA,CACP,CAAC,CACF,CACAuE,EAAyB,KAAO,UAAW,CAAE,MAAO,CAAC,CAAG,EACxDA,EAAyB,QAAUA,EACnCA,EAAyB,GAAK,MAC9BE,EAAO,QAAUF,C","sources":["webpack:///./src/hooks/commonHooks.tsx","webpack:///./src/pages/document-viewer/file-error/index.less?9a0d","webpack:///./src/pages/document-viewer/file-error/index.tsx","webpack:///./src/pages/document-viewer/hooks.ts","webpack:///./src/pages/document-viewer/docx/index.less?800f","webpack:///./src/pages/document-viewer/docx/index.tsx","webpack:///./src/pages/document-viewer/excel/index.tsx","webpack:///./src/pages/document-viewer/pdf/index.tsx","webpack:///./src/pages/document-viewer/index.less?1e43","webpack:///./src/pages/document-viewer/index.tsx","webpack:///./src/hooks/ lazy namespace object"],"sourcesContent":["import { ExclamationCircleFilled } from '@ant-design/icons';\nimport { App } from 'antd';\nimport isEqual from 'lodash/isEqual';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport const useSetModalState = () => {\n  const [visible, setVisible] = useState(false);\n\n  const showModal = () => {\n    setVisible(true);\n  };\n  const hideModal = () => {\n    setVisible(false);\n  };\n\n  const switchVisible = () => {\n    setVisible(!visible);\n  };\n\n  return { visible, showModal, hideModal, switchVisible };\n};\n\nexport const useDeepCompareEffect = (\n  effect: React.EffectCallback,\n  deps: React.DependencyList,\n) => {\n  const ref = useRef<React.DependencyList>();\n  let callback: ReturnType<React.EffectCallback> = () => {};\n  if (!isEqual(deps, ref.current)) {\n    callback = effect();\n    ref.current = deps;\n  }\n  useEffect(() => {\n    return () => {\n      if (callback) {\n        callback();\n      }\n    };\n  }, []);\n};\n\nexport interface UseDynamicSVGImportOptions {\n  onCompleted?: (\n    name: string,\n    SvgIcon: React.FC<React.SVGProps<SVGSVGElement>> | undefined,\n  ) => void;\n  onError?: (err: Error) => void;\n}\n\nexport function useDynamicSVGImport(\n  name: string,\n  options: UseDynamicSVGImportOptions = {},\n) {\n  const ImportedIconRef = useRef<React.FC<React.SVGProps<SVGSVGElement>>>();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error>();\n\n  const { onCompleted, onError } = options;\n  useEffect(() => {\n    setLoading(true);\n    const importIcon = async (): Promise<void> => {\n      try {\n        ImportedIconRef.current = (await import(name)).ReactComponent;\n        onCompleted?.(name, ImportedIconRef.current);\n      } catch (err: any) {\n        onError?.(err);\n        setError(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    importIcon();\n  }, [name, onCompleted, onError]);\n\n  return { error, loading, SvgIcon: ImportedIconRef.current };\n}\n\ninterface IProps {\n  onOk?: (...args: any[]) => any;\n  onCancel?: (...args: any[]) => any;\n}\n\nexport const useShowDeleteConfirm = () => {\n  const { modal } = App.useApp();\n  const { t } = useTranslation();\n\n  const showDeleteConfirm = useCallback(\n    ({ onOk, onCancel }: IProps): Promise<number> => {\n      return new Promise((resolve, reject) => {\n        modal.confirm({\n          title: t('common.deleteModalTitle'),\n          icon: <ExclamationCircleFilled />,\n          // content: 'Some descriptions',\n          okText: t('common.ok'),\n          okType: 'danger',\n          cancelText: t('common.cancel'),\n          async onOk() {\n            try {\n              const ret = await onOk?.();\n              resolve(ret);\n              console.info(ret);\n            } catch (error) {\n              reject(error);\n            }\n          },\n          onCancel() {\n            onCancel?.();\n          },\n        });\n      });\n    },\n    [t, modal],\n  );\n\n  return showDeleteConfirm;\n};\n\nexport const useTranslate = (keyPrefix: string) => {\n  return useTranslation('translation', { keyPrefix });\n};\n\nexport const useCommonTranslation = () => {\n  return useTranslation('translation', { keyPrefix: 'common' });\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"errorWrapper\":\"errorWrapper___QfVXQ\"};","import { Alert, Flex } from 'antd';\n\nimport { useTranslate } from '@/hooks/commonHooks';\nimport React from 'react';\nimport styles from './index.less';\n\nconst FileError = ({ children }: React.PropsWithChildren) => {\n  const { t } = useTranslate('fileManager');\n  return (\n    <Flex align=\"center\" justify=\"center\" className={styles.errorWrapper}>\n      <Alert\n        type=\"error\"\n        message={<h2>{children || t('fileError')}</h2>}\n      ></Alert>\n    </Flex>\n  );\n};\n\nexport default FileError;\n","import jsPreviewExcel from '@js-preview/excel';\nimport axios from 'axios';\nimport mammoth from 'mammoth';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nexport const useCatchError = (api: string) => {\n  const [error, setError] = useState('');\n  const fetchDocument = useCallback(async () => {\n    const ret = await axios.get(api);\n    const { data } = ret;\n    if (!(data instanceof ArrayBuffer) && data.retcode !== 0) {\n      setError(data.retmsg);\n    }\n    return ret;\n  }, [api]);\n\n  useEffect(() => {\n    fetchDocument();\n  }, [fetchDocument]);\n\n  return { fetchDocument, error };\n};\n\nexport const useFetchDocument = () => {\n  const fetchDocument = useCallback(async (api: string) => {\n    const ret = await axios.get(api, { responseType: 'arraybuffer' });\n    return ret;\n  }, []);\n\n  return { fetchDocument };\n};\n\nexport const useFetchExcel = (filePath: string) => {\n  const [status, setStatus] = useState(true);\n  const { fetchDocument } = useFetchDocument();\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { error } = useCatchError(filePath);\n\n  const fetchDocumentAsync = useCallback(async () => {\n    let myExcelPreviewer;\n    if (containerRef.current) {\n      myExcelPreviewer = jsPreviewExcel.init(containerRef.current);\n    }\n    const jsonFile = await fetchDocument(filePath);\n    myExcelPreviewer\n      ?.preview(jsonFile.data)\n      .then(() => {\n        console.log('succeed');\n        setStatus(true);\n      })\n      .catch((e) => {\n        console.warn('failed', e);\n        myExcelPreviewer.destroy();\n        setStatus(false);\n      });\n  }, [filePath, fetchDocument]);\n\n  useEffect(() => {\n    fetchDocumentAsync();\n  }, [fetchDocumentAsync]);\n\n  return { status, containerRef, error };\n};\n\nexport const useFetchDocx = (filePath: string) => {\n  const [succeed, setSucceed] = useState(true);\n  const { fetchDocument } = useFetchDocument();\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { error } = useCatchError(filePath);\n\n  const fetchDocumentAsync = useCallback(async () => {\n    const jsonFile = await fetchDocument(filePath);\n    mammoth\n      .convertToHtml(\n        { arrayBuffer: jsonFile.data },\n        { includeDefaultStyleMap: true },\n      )\n      .then((result) => {\n        setSucceed(true);\n        const docEl = document.createElement('div');\n        docEl.className = 'document-container';\n        docEl.innerHTML = result.value;\n        const container = containerRef.current;\n        if (container) {\n          container.innerHTML = docEl.outerHTML;\n        }\n      })\n      .catch(() => {\n        setSucceed(false);\n      });\n  }, [filePath, fetchDocument]);\n\n  useEffect(() => {\n    fetchDocumentAsync();\n  }, [fetchDocumentAsync]);\n\n  return { succeed, containerRef, error };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"docxViewerWrapper\":\"docxViewerWrapper___bSxaq\",\"box\":\"box___sXFPE\"};","import { Spin } from 'antd';\nimport FileError from '../file-error';\n\nimport { useFetchDocx } from '../hooks';\nimport styles from './index.less';\n\nconst Docx = ({ filePath }: { filePath: string }) => {\n  const { succeed, containerRef, error } = useFetchDocx(filePath);\n\n  return (\n    <>\n      {succeed ? (\n        <section className={styles.docxViewerWrapper}>\n          <div id=\"docx\" ref={containerRef} className={styles.box}>\n            <Spin />\n          </div>\n        </section>\n      ) : (\n        <FileError>{error}</FileError>\n      )}\n    </>\n  );\n};\n\nexport default Docx;\n","import '@js-preview/excel/lib/index.css';\nimport FileError from '../file-error';\nimport { useFetchExcel } from '../hooks';\n\nconst Excel = ({ filePath }: { filePath: string }) => {\n  const { status, containerRef, error } = useFetchExcel(filePath);\n\n  return (\n    <div\n      id=\"excel\"\n      ref={containerRef}\n      style={{ height: '100%', width: '100%' }}\n    >\n      {status || <FileError>{error}</FileError>}\n    </div>\n  );\n};\n\nexport default Excel;\n","import { Skeleton } from 'antd';\nimport { PdfHighlighter, PdfLoader } from 'react-pdf-highlighter';\nimport FileError from '../file-error';\nimport { useCatchError } from '../hooks';\n\ninterface IProps {\n  url: string;\n}\n\nconst PdfPreviewer = ({ url }: IProps) => {\n  const { error } = useCatchError(url);\n  const resetHash = () => {};\n\n  return (\n    <div style={{ width: '100%', height: '100%' }}>\n      <PdfLoader\n        url={url}\n        beforeLoad={<Skeleton active />}\n        workerSrc=\"/pdfjs-dist/pdf.worker.min.js\"\n        errorMessage={<FileError>{error}</FileError>}\n        onError={(e) => {\n          console.warn(e);\n        }}\n      >\n        {(pdfDocument) => {\n          return (\n            <PdfHighlighter\n              pdfDocument={pdfDocument}\n              enableAreaSelection={(event) => event.altKey}\n              onScrollChange={resetHash}\n              scrollRef={() => {}}\n              onSelectionFinished={() => null}\n              highlightTransform={() => {\n                return <div></div>;\n              }}\n              highlights={[]}\n            />\n          );\n        }}\n      </PdfLoader>\n    </div>\n  );\n};\n\nexport default PdfPreviewer;\n","// extracted by mini-css-extract-plugin\nexport default {\"viewerWrapper\":\"viewerWrapper___Hh0uK\",\"image\":\"image___OwcS1\"};","import { Images } from '@/constants/common';\nimport { api_host } from '@/utils/api';\nimport { Flex, Image } from 'antd';\nimport { useParams, useSearchParams } from 'umi';\nimport Docx from './docx';\nimport Excel from './excel';\nimport Pdf from './pdf';\n\nimport styles from './index.less';\n\n// TODO: The interface returns an incorrect content-type for the SVG.\n\nconst DocumentViewer = () => {\n  const { id: documentId } = useParams();\n  const api = `${api_host}/file/get/${documentId}`;\n  const [currentQueryParameters] = useSearchParams();\n  const ext = currentQueryParameters.get('ext');\n\n  return (\n    <section className={styles.viewerWrapper}>\n      {Images.includes(ext!) && (\n        <Flex className={styles.image} align=\"center\" justify=\"center\">\n          <Image src={api} preview={false}></Image>\n        </Flex>\n      )}\n      {ext === 'pdf' && <Pdf url={api}></Pdf>}\n      {(ext === 'xlsx' || ext === 'xls') && <Excel filePath={api}></Excel>}\n\n      {ext === 'docx' && <Docx filePath={api}></Docx>}\n    </section>\n  );\n};\n\nexport default DocumentViewer;\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 86635;\nmodule.exports = webpackEmptyAsyncContext;"],"names":["useSetModalState","_useState","useState","_useState2","_slicedToArray","visible","setVisible","showModal","hideModal","switchVisible","useDeepCompareEffect","effect","deps","ref","useRef","callback","isEqual","current","useEffect","useDynamicSVGImport","name","options","arguments","length","undefined","ImportedIconRef","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","onCompleted","onError","importIcon","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sent","ReactComponent","t0","finish","stop","apply","SvgIcon","useShowDeleteConfirm","_App$useApp","App","useApp","modal","_useTranslation","useTranslation","t","showDeleteConfirm","useCallback","_ref2","onOk","onCancel","Promise","resolve","reject","confirm","title","icon","_jsx","ExclamationCircleFilled","okText","okType","cancelText","_callee2","ret","_context2","console","info","useTranslate","keyPrefix","useCommonTranslation","FileError","children","_useTranslate","Flex","align","justify","className","styles","errorWrapper","Alert","type","message","useCatchError","api","fetchDocument","data","axios","get","ArrayBuffer","retcode","retmsg","abrupt","useFetchDocument","responseType","_x","useFetchExcel","filePath","status","setStatus","_useFetchDocument","containerRef","_useCatchError","fetchDocumentAsync","_callee3","_myExcelPreviewer","myExcelPreviewer","jsonFile","_context3","jsPreviewExcel","init","preview","then","log","e","warn","destroy","useFetchDocx","succeed","setSucceed","_useFetchDocument2","_useCatchError2","_callee4","_context4","mammoth","arrayBuffer","includeDefaultStyleMap","result","docEl","document","createElement","innerHTML","value","container","outerHTML","Docx","_useFetchDocx","_Fragment","docxViewerWrapper","id","box","Spin","Excel","_useFetchExcel","style","height","width","PdfPreviewer","url","resetHash","PdfLoader","beforeLoad","Skeleton","active","workerSrc","errorMessage","pdfDocument","PdfHighlighter","enableAreaSelection","event","altKey","onScrollChange","scrollRef","onSelectionFinished","highlightTransform","highlights","DocumentViewer","_useParams","useParams","documentId","concat","api_host","_useSearchParams","useSearchParams","_useSearchParams2","currentQueryParameters","ext","_jsxs","viewerWrapper","Images","includes","image","Image","src","Pdf","webpackEmptyAsyncContext","req","module"],"sourceRoot":""}