(self.webpackChunk=self.webpackChunk||[]).push([[8725],{96330:function(B,P,e){"use strict";e.d(P,{Rx:function(){return U},S8:function(){return i},Vr:function(){return f},cG:function(){return h},ld:function(){return o},oQ:function(){return d}});var I=e(9783),M=e.n(I),U=function(t){return t.Dataset="dataset",t.Testing="testing",t.Configuration="configuration",t}({}),h=function(t){return t.UNSTART="0",t.RUNNING="1",t.CANCEL="2",t.DONE="3",t.FAIL="4",t}({}),d=function(t){return t.Improvise="Improvise",t.Precise="Precise",t.Balance="Balance",t}({}),i=M()(M()(M()({},d.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),d.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),d.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),f=function(t){return t.Embedding="embedding",t.Chat="chat",t.Image2text="image2text",t.Speech2text="speech2text",t.Rerank="rerank",t}({}),o=function(t){return t.DocumentId="doc_id",t.KnowledgeId="id",t}({})},2039:function(B,P,e){"use strict";e.d(P,{I3:function(){return F},pG:function(){return y},qM:function(){return z}});var I=e(15009),M=e.n(I),U=e(99289),h=e.n(U),d=e(5574),i=e.n(d),f=e(21640),o=e(3321),t=e(18446),S=e.n(t),w=e(62435),j=e(67421),T=e(86074),y=function(){var s=(0,w.useState)(!1),n=i()(s,2),a=n[0],r=n[1],c=function(){r(!0)},u=function(){r(!1)},p=function(){r(!a)};return{visible:a,showModal:c,hideModal:u,switchVisible:p}},E=function(s,n){var a=useRef(),r=function(){};isEqual(n,a.current)||(r=s(),a.current=n),useEffect(function(){return function(){r&&r()}},[])};function R(C){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=useRef(),a=useState(!1),r=_slicedToArray(a,2),c=r[0],u=r[1],p=useState(),O=_slicedToArray(p,2),A=O[0],g=O[1],l=s.onCompleted,_=s.onError;return useEffect(function(){u(!0);var D=function(){var m=_asyncToGenerator(_regeneratorRuntime().mark(function v(){return _regeneratorRuntime().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,e(86635)(C);case 3:n.current=b.sent.ReactComponent,l==null||l(C,n.current),b.next=11;break;case 7:b.prev=7,b.t0=b.catch(0),_==null||_(b.t0),g(b.t0);case 11:return b.prev=11,u(!1),b.finish(11);case 14:case"end":return b.stop()}},v,null,[[0,7,11,14]])}));return function(){return m.apply(this,arguments)}}();D()},[C,l,_]),{error:A,loading:c,SvgIcon:n.current}}var F=function(){var s=o.Z.useApp(),n=s.modal,a=(0,j.$G)(),r=a.t,c=(0,w.useCallback)(function(u){var p=u.onOk,O=u.onCancel;return new Promise(function(A,g){n.confirm({title:r("common.deleteModalTitle"),icon:(0,T.jsx)(f.Z,{}),okText:r("common.ok"),okType:"danger",cancelText:r("common.cancel"),onOk:function(){return h()(M()().mark(function _(){var D;return M()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,p==null?void 0:p();case 3:D=v.sent,A(D),console.info(D),v.next=11;break;case 8:v.prev=8,v.t0=v.catch(0),g(v.t0);case 11:case"end":return v.stop()}},_,null,[[0,8]])}))()},onCancel:function(){O==null||O()}})})},[r,n]);return c},z=function(s){return(0,j.$G)("translation",{keyPrefix:s})},N=function(){return useTranslation("translation",{keyPrefix:"common"})}},49468:function(B,P,e){"use strict";e.d(P,{B3:function(){return w},B4:function(){return F},OB:function(){return T},PE:function(){return j},TO:function(){return z},W2:function(){return E},Zd:function(){return y},cG:function(){return N},p6:function(){return C},pC:function(){return t},tl:function(){return S},xp:function(){return R}});var I=e(5574),M=e.n(I),U=e(60806),h=e(65400),d=e(62435),i=e(6589),f=e(65534),o=e(25194),t=function(n){var a=(0,d.useCallback)(function(r){return"".concat(U.N,"/document/get/").concat(n||r)},[n]);return a},S=function(n){var a=(0,d.useState)({width:849,height:1200}),r=M()(a,2),c=r[0],u=r[1],p=(0,d.useMemo)(function(){return(0,h.q1)(n,c)},[n,c]),O=function(g,l){u(function(_){return _.height!==l||_.width!==g?{height:l,width:g}:_})};return{highlights:p,setWidthAndHeight:O}},w=function(){var n=(0,f.pE)(),a=n.knowledgeId,r=(0,i.useDispatch)(),c=(0,d.useCallback)(function(){return r({type:"kFModel/getKfList",payload:{kb_id:a}})},[r,a]);return c},j=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,c=(0,d.useCallback)(function(u,p){n({type:"kFModel/updateDocumentStatus",payload:{doc_id:p,status:Number(u),kb_id:r}})},[n,r]);return c},T=function(){var n=(0,i.useSelector)(function(a){return a.kFModel.data});return n},y=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,c=(0,d.useCallback)(function(u,p){return n({type:"kFModel/document_rename",payload:{doc_id:u,name:p,kb_id:r}})},[n,r]);return c},E=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,c=(0,d.useCallback)(function(u){try{return n({type:"kFModel/document_create",payload:{name:u,kb_id:r}})}catch(p){console.log("Failed:",p)}},[n,r]);return c},R=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,c=(0,d.useCallback)(function(u,p,O){try{return n({type:"kFModel/document_change_parser",payload:{parser_id:u,doc_id:p,kb_id:r,parser_config:O}})}catch(A){console.log("Failed:",A)}},[n,r]);return c},F=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,c=(0,d.useCallback)(function(u){try{return n({type:"kFModel/document_rm",payload:{doc_id:u,kb_id:r}})}catch(p){console.log("Failed:",p)}},[n,r]);return c},z=function(){var n=(0,i.useDispatch)(),a=(0,f.pE)(),r=a.knowledgeId,c=(0,d.useCallback)(function(u){try{return n({type:"kFModel/upload_document",payload:{fileList:u,kb_id:r}})}catch(p){console.log("Failed:",p)}},[n,r]);return c},N=function(){var n=(0,i.useDispatch)(),a=(0,d.useCallback)(function(r){try{return n({type:"kFModel/document_run",payload:r})}catch(c){console.log("Failed:",c)}},[n]);return a},C=function(){var n=(0,o.q)("kFModel",["document_run"]);return n}},38725:function(B,P,e){"use strict";e.d(P,{$0:function(){return n},H0:function(){return O},IV:function(){return p},Kx:function(){return u},UL:function(){return r},cE:function(){return a},y$:function(){return c}});var I=e(9783),M=e.n(I),U=e(5574),h=e.n(U),d=e(15009),i=e.n(d),f=e(99289),o=e.n(f),t=e(39918),S=e(40169),w=e(60806),j=e(32358),T=e(5121),y=e(24809),E=e(62435),R=e(67421),F=e(6589),z=e(2039),N=e(49468),C=e(25194),s=e(79495),n=function(g){var l=(0,N.xp)(),_=(0,z.pG)(),D=_.visible,m=_.hideModal,v=_.showModal,K=(0,C.q)("kFModel",["document_change_parser"]),b=(0,E.useCallback)(function(){var k=o()(i()().mark(function G($,H){var V;return i()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,l($,g,H);case 2:V=W.sent,V===0&&m();case 4:case"end":return W.stop()}},G)}));return function(G,$){return k.apply(this,arguments)}}(),[m,l,g]);return{changeParserLoading:K,onChangeParserOk:b,changeParserVisible:D,hideChangeParserModal:m,showChangeParserModal:v}},a=function(){var g=(0,E.useState)({}),l=h()(g,2),_=l[0],D=l[1],m=function(K){D(K)};return{currentRecord:_,setRecord:m}},r=function(){var g=(0,R.$G)(),l=g.i18n,_=(0,s.WH)(),D=function(v){l.changeLanguage(S.Kj[v]),_({language:v})};return D},c=function(g,l,_,D){var m=(0,z.qM)("common"),v=m.t,K=(0,E.useMemo)(function(){return{showQuickJumper:!0,total:g,showSizeChanger:!0,current:l,pageSize:_,pageSizeOptions:[1,2,10,20,50,100],onChange:D,showTotal:function(k){return"".concat(v("total")," ").concat(k)}}},[v,D,l,_,g]);return{pagination:K}},u=function(g){var l=(0,F.useDispatch)(),_=(0,E.useCallback)(function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,m=arguments.length>1?arguments[1]:void 0,v={current:D};m&&(v.pageSize=m),l({type:"".concat(g,"/setPagination"),payload:v})},[l,g]);return _},p=function(){var g=(0,E.useState)({}),l=h()(g,2),_=l[0],D=l[1],m=(0,E.useCallback)(o()(i()().mark(function v(){var K;return i()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,T.Z.get("/conf.json");case 2:K=k.sent,D(K.data);case 4:case"end":return k.stop()}},v)})),[]);return(0,E.useEffect)(function(){m()},[m]),_},O=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.Z.completeConversation,l=(0,E.useState)({}),_=h()(l,2),D=_[0],m=_[1],v=(0,E.useState)(!0),K=h()(v,2),b=K[0],k=K[1],G=(0,E.useCallback)(function(){var $=o()(i()().mark(function H(V){var Z,W,J,Q,q,X,Y,x;return i()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,k(!1),L.next=4,fetch(g,{method:"POST",headers:M()(M()({},t._n,(0,j.c)()),"Content-Type","application/json"),body:JSON.stringify(V)});case 4:W=L.sent,J=W==null||(Z=W.body)===null||Z===void 0?void 0:Z.pipeThrough(new TextDecoderStream).pipeThrough(new y.m).getReader();case 6:return L.next=9,J==null?void 0:J.read();case 9:if(Q=L.sent,!Q){L.next=16;break}q=Q.done,X=Q.value;try{Y=JSON.parse((X==null?void 0:X.data)||""),x=Y==null?void 0:Y.data,typeof x!="boolean"&&(console.info("data:",x),m(x))}catch(ee){console.warn(ee)}if(!q){L.next=16;break}return console.info("done"),L.abrupt("break",18);case 16:L.next=6;break;case 18:return console.info("done?"),k(!0),L.abrupt("return",W);case 23:L.prev=23,L.t0=L.catch(0),k(!0),console.warn(L.t0);case 27:case"end":return L.stop()}},H,null,[[0,23]])}));return function(H){return $.apply(this,arguments)}}(),[g]);return{send:G,answer:D,done:b}}},65534:function(B,P,e){"use strict";e.d(P,{HK:function(){return t},Uu:function(){return o},nT:function(){return j},pE:function(){return S},wy:function(){return w}});var I=e(5574),M=e.n(I),U=e(96330),h=e(62435),d=e(6589),i=function(T){return T.Second="2",T.Third="3",T}({}),f=function(y){var E=(0,d.useLocation)(),R=E.pathname,F=R.split("/");return F[y]||""},o=function(){return f(i.Second)},t=function(){return f(i.Third)},S=function(){var y=(0,d.useSearchParams)(),E=M()(y,1),R=E[0];return{documentId:R.get(U.ld.DocumentId)||"",knowledgeId:R.get(U.ld.KnowledgeId)||""}},w=function(){var y=(0,d.useNavigate)();return(0,h.useCallback)(function(E){y(E,{state:{from:E}})},[y])},j=function(){var y=(0,d.useNavigate)(),E=S(),R=E.knowledgeId;return(0,h.useCallback)(function(){y("/knowledge/".concat(U.Rx.Dataset,"?id=").concat(R))},[R,y])}},25194:function(B,P,e){"use strict";e.d(P,{q:function(){return h}});var I=function(i,f,o){return o.some(function(t){return f["".concat(i,"/").concat(t)]})},M=function(i){return new Promise(function(f){setTimeout(f,i)})},U=e(6589),h=function(i,f){var o=(0,U.useSelector)(function(t){return t.loading.effects});return I(i,o,f)}},79495:function(B,P,e){"use strict";e.d(P,{Jf:function(){return N},WH:function(){return F},XH:function(){return E},Zl:function(){return T},aU:function(){return R},fS:function(){return y},jd:function(){return w},ml:function(){return j},nv:function(){return z}});var I=e(5574),M=e.n(I),U=e(15009),h=e.n(U),d=e(99289),i=e.n(d),f=e(85162),o=e(32358),t=e(62435),S=e(6589),w=function(){var s=(0,S.useDispatch)(),n=(0,t.useCallback)(function(){s({type:"settingModel/getUserInfo"})},[s]);(0,t.useEffect)(function(){n()},[n])},j=function(){var s=(0,S.useSelector)(function(n){return n.settingModel.userInfo});return s},T=function(){var s=(0,S.useSelector)(function(n){return n.settingModel.tenantIfo});return s},y=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=(0,S.useDispatch)(),a=(0,t.useCallback)(function(){n({type:"settingModel/getTenantInfo"})},[n]);return(0,t.useEffect)(function(){s&&a()},[a,s]),a},E=function(){var s=T(),n=(0,t.useMemo)(function(){var a,r=(a=s==null?void 0:s.parser_ids.split(","))!==null&&a!==void 0?a:[];return r.map(function(c){var u=c.split(":");return{value:u[0],label:u[1]}})},[s]);return n},R=function(){var s=(0,S.useDispatch)(),n=(0,t.useCallback)(i()(h()().mark(function a(){var r;return h()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,s({type:"loginModel/logout"});case 2:r=u.sent,r===0&&(o.Z.removeAll(),S.history.push("/login"));case 4:case"end":return u.stop()}},a)})),[s]);return n},F=function(){var s=(0,S.useDispatch)(),n=(0,t.useCallback)(function(a){return s({type:"settingModel/setting",payload:a})},[s]);return n},z=function(){var s=(0,t.useState)(""),n=M()(s,2),a=n[0],r=n[1],c=(0,t.useState)(!1),u=M()(c,2),p=u[0],O=u[1],A=(0,t.useCallback)(i()(h()().mark(function g(){var l,_;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return O(!0),m.next=3,f.Z.getSystemVersion();case 3:l=m.sent,_=l.data,_.retcode===0&&(r(_.data),O(!1));case 6:case"end":return m.stop()}},g)})),[]);return{fetchSystemVersion:A,version:a,loading:p}},N=function(){var s=(0,t.useState)({}),n=M()(s,2),a=n[0],r=n[1],c=(0,t.useState)(!1),u=M()(c,2),p=u[0],O=u[1],A=(0,t.useCallback)(i()(h()().mark(function g(){var l,_;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return O(!0),m.next=3,f.Z.getSystemStatus();case 3:l=m.sent,_=l.data,_.retcode===0&&(r(_.data),O(!1));case 6:case"end":return m.stop()}},g)})),[]);return{systemStatus:a,fetchSystemStatus:A,loading:p}}},65400:function(B,P,e){"use strict";e.d(P,{RT:function(){return h},Re:function(){return U},YC:function(){return i},Ze:function(){return d},q1:function(){return M}});var I=e(57632),M=function(o,t){var S;return Array.isArray(o==null?void 0:o.positions)&&o.positions.every(function(w){return Array.isArray(w)})?o==null||(S=o.positions)===null||S===void 0?void 0:S.map(function(w){var j={width:t.width,height:t.height,x1:w[1],x2:w[2],y1:w[3],y2:w[4]};return{id:(0,I.Z)(),comment:{text:"",emoji:""},content:{text:o.content_with_weight},position:{boundingRect:j,rects:[j],pageNumber:w[0]}}}):[]},U=function(o){return o.status==="done"},h=function(o){var t;return(t=o==null?void 0:o.slice(o.lastIndexOf(".")+1).toLowerCase())!==null&&t!==void 0?t:""},d=function(o){return h(o)==="pdf"},i=function(o){return o.split(`
`).length}},86635:function(B){function P(e){return Promise.resolve().then(function(){var I=new Error("Cannot find module '"+e+"'");throw I.code="MODULE_NOT_FOUND",I})}P.keys=function(){return[]},P.resolve=P,P.id=86635,B.exports=P}}]);

//# sourceMappingURL=8725.5446dd55.async.js.map