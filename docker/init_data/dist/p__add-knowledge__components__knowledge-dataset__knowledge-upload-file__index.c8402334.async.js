"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7903],{86548:function(ie,G,e){e.d(G,{Z:function(){return r}});var p=e(87462),y=e(62435),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},A=B,P=e(84089),f=function(Z,D){return y.createElement(P.Z,(0,p.Z)({},Z,{ref:D,icon:A}))},r=y.forwardRef(f)},82182:function(ie,G,e){e.d(G,{K2:function(){return u},MA:function(){return s},PX:function(){return S},SD:function(){return b},VJ:function(){return m},aX:function(){return I},l5:function(){return v},qH:function(){return W},tP:function(){return N},w9:function(){return D},wK:function(){return n}});var p=e(97857),y=e.n(p),B=e(5574),A=e.n(B),P=e(2039),f=e(62435),r=e(6589),j=e(65534),Z=e(25194),D=function(){var t=(0,r.useSearchParams)(),a=A()(t,1),i=a[0],g=i.get("id");return g||""},n=function(){var t=(0,r.useDispatch)(),a=D(),i=(0,P.I3)(),g=function(L){return function(){return t({type:"kFModel/document_rm",payload:{doc_id:L,kb_id:a}})}},x=function(L){return i({onOk:g(L)})};return{removeDocument:x}},b=function(){var t=(0,r.useDispatch)(),a=(0,j.pE)(),i=a.knowledgeId,g=(0,f.useCallback)(function(x){t({type:"knowledgeModel/getKnowledgeDetail",payload:{kb_id:x}})},[t]);return(0,f.useEffect)(function(){g(i)},[g,i]),g},U=function(){var t=useSelector(function(a){return a.knowledgeModel.knowledge});return t},K=function(){var t,a,i=U();return{defaultParserId:(t=i==null?void 0:i.parser_id)!==null&&t!==void 0?t:"",parserConfig:(a=i==null?void 0:i.parser_config)!==null&&a!==void 0?a:""}},W=function(){var t=(0,r.useDispatch)(),a=(0,P.I3)(),i=(0,f.useCallback)(function(x,C){return function(){return t({type:"chunkModel/rm_chunk",payload:{chunk_ids:x,doc_id:C}})}},[t]),g=(0,f.useCallback)(function(x,C){return a({onOk:i(x,C)})},[i,a]);return{removeChunk:g}},S=function(){var t=(0,r.useDispatch)(),a=D(),i=(0,f.useCallback)(function(){t({type:"kSModel/getKbDetail",payload:{kb_id:a}})},[t,a]);(0,f.useEffect)(function(){i()},[i])},N=function(){var t=(0,r.useSelector)(function(g){return g.knowledgeModel}),a=t.data,i=a===void 0?[]:a;return i},m=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=(0,r.useDispatch)(),i=(0,Z.q)("knowledgeModel",["getList"]),g=(0,r.useSelector)(function(O){return O.knowledgeModel}),x=g.data,C=x===void 0?[]:x,L=(0,f.useMemo)(function(){return t?C.filter(function(O){return O.chunk_num>0}):C},[C,t]),R=(0,f.useCallback)(function(){a({type:"knowledgeModel/getList"})},[a]);return(0,f.useEffect)(function(){R()},[R]),{list:L,loading:i,fetchList:R}},v=function(){var t=(0,r.useSelector)(function(a){return a.kFModel.fileThumbnails});return t},E=function(t){var a=useDispatch(),i=v(),g=useCallback(function(x){a({type:"kFModel/fetch_document_thumbnails",payload:{doc_ids:x.join(",")}})},[a]);return useEffect(function(){t&&g(t)},[t,g]),{fileThumbnails:i,fetchFileThumbnails:g}},s=function(){var t=(0,r.useDispatch)(),a=(0,f.useCallback)(function(i){t({type:"kSModel/updateKb",payload:i})},[t]);return a},u=function(){var t=(0,r.useSelector)(function(a){return a.kSModel.knowledgeDetails});return t},I=function(){var t=(0,r.useDispatch)(),a=D(),i=(0,f.useCallback)(function(g){t({type:"testingModel/testDocumentChunk",payload:y()(y()({},g),{},{kb_id:a})})},[t,a]);return i}},75166:function(ie,G,e){e.r(G),e.d(G,{default:function(){return Be}});var p=e(97857),y=e.n(p),B=e(9783),A=e.n(B),P=e(5574),f=e.n(P),r=e(15009),j=e.n(r),Z=e(99289),D=e.n(Z),n=e(62435),b=Object.defineProperty,U=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,S=(h,o,d)=>o in h?b(h,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):h[o]=d,N=(h,o)=>{for(var d in o||(o={}))K.call(o,d)&&S(h,d,o[d]);if(U)for(var d of U(o))W.call(o,d)&&S(h,d,o[d]);return h};const m=h=>n.createElement("svg",N({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg"},h),n.createElement("g",{clipPath:"url(#select-files-end_svg__a)"},n.createElement("path",{d:"M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16Z",fill:"#F9F5FF"}),n.createElement("path",{d:"M1 16C1 7.716 7.716 1 16 1c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-8.284 0-15-6.716-15-15Z",fill:"#7F56D9"}),n.createElement("path",{d:"M1 16C1 7.716 7.716 1 16 1c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-8.284 0-15-6.716-15-15Z",stroke:"#7F56D9",strokeWidth:2}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m22.795 9.853-9.547 9.214-2.533-2.707c-.467-.44-1.2-.467-1.733-.093-.52.386-.667 1.066-.347 1.613l3 4.88c.293.453.8.733 1.373.733a1.63 1.63 0 0 0 1.36-.733c.48-.627 9.64-11.547 9.64-11.547 1.2-1.226-.253-2.306-1.213-1.373v.013Z",fill:"#fff"})),n.createElement("defs",null,n.createElement("clipPath",{id:"select-files-end_svg__a"},n.createElement("path",{d:"M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16Z",fill:"#fff"}))));var v="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBkPSJNMCAxNkMwIDcuMTYzIDcuMTYzIDAgMTYgMHMxNiA3LjE2MyAxNiAxNi03LjE2MyAxNi0xNiAxNlMwIDI0LjgzNyAwIDE2WiIgZmlsbD0iI0Y5RjVGRiIvPjxwYXRoIGQ9Ik0xIDE2QzEgNy43MTYgNy43MTYgMSAxNiAxYzguMjg0IDAgMTUgNi43MTYgMTUgMTUgMCA4LjI4NC02LjcxNiAxNS0xNSAxNS04LjI4NCAwLTE1LTYuNzE2LTE1LTE1WiIgZmlsbD0iIzdGNTZEOSIvPjxwYXRoIGQ9Ik0xIDE2QzEgNy43MTYgNy43MTYgMSAxNiAxYzguMjg0IDAgMTUgNi43MTYgMTUgMTUgMCA4LjI4NC02LjcxNiAxNS0xNSAxNS04LjI4NCAwLTE1LTYuNzE2LTE1LTE1WiIgc3Ryb2tlPSIjN0Y1NkQ5IiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTIyLjc5NSA5Ljg1My05LjU0NyA5LjIxNC0yLjUzMy0yLjcwN2MtLjQ2Ny0uNDQtMS4yLS40NjctMS43MzMtLjA5My0uNTIuMzg2LS42NjcgMS4wNjYtLjM0NyAxLjYxM2wzIDQuODhjLjI5My40NTMuOC43MzMgMS4zNzMuNzMzYTEuNjMgMS42MyAwIDAgMCAxLjM2LS43MzNjLjQ4LS42MjcgOS42NC0xMS41NDcgOS42NC0xMS41NDcgMS4yLTEuMjI2LS4yNTMtMi4zMDYtMS4yMTMtMS4zNzN2LjAxM1oiIGZpbGw9IiNmZmYiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBkPSJNMCAxNkMwIDcuMTYzIDcuMTYzIDAgMTYgMHMxNiA3LjE2MyAxNiAxNi03LjE2MyAxNi0xNiAxNlMwIDI0LjgzNyAwIDE2WiIgZmlsbD0iI2ZmZiIvPjwvY2xpcFBhdGg+PC9kZWZzPjwvc3ZnPg==",E=Object.defineProperty,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,c=(h,o,d)=>o in h?E(h,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):h[o]=d,t=(h,o)=>{for(var d in o||(o={}))u.call(o,d)&&c(h,d,o[d]);if(s)for(var d of s(o))I.call(o,d)&&c(h,d,o[d]);return h};const a=h=>n.createElement("svg",t({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg"},h),n.createElement("g",{filter:"url(#select-files-start_svg__a)"},n.createElement("g",{clipPath:"url(#select-files-start_svg__b)"},n.createElement("path",{d:"M4 20c0-8.837 7.163-16 16-16s16 7.163 16 16-7.163 16-16 16S4 28.837 4 20Z",fill:"#F9F5FF"}),n.createElement("path",{d:"M5 20c0-8.284 6.716-15 15-15 8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-8.284 0-15-6.716-15-15Z",fill:"#7F56D9"}),n.createElement("path",{d:"M5 20c0-8.284 6.716-15 15-15 8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-8.284 0-15-6.716-15-15Z",stroke:"#7F56D9",strokeWidth:2}),n.createElement("circle",{cx:20,cy:20,r:5,fill:"#fff"}))),n.createElement("defs",null,n.createElement("clipPath",{id:"select-files-start_svg__b"},n.createElement("path",{d:"M4 20c0-8.837 7.163-16 16-16s16 7.163 16 16-7.163 16-16 16S4 28.837 4 20Z",fill:"#fff"})),n.createElement("filter",{id:"select-files-start_svg__a",x:0,y:0,width:40,height:40,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feMorphology",{radius:4,operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_304_382"}),n.createElement("feOffset",null),n.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),n.createElement("feColorMatrix",{values:"0 0 0 0 0.619152 0 0 0 0 0.465529 0 0 0 0 0.930549 0 0 0 0.24 0"}),n.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_304_382"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_304_382",result:"shape"}))));var i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsdGVyPSJ1cmwoI2EpIj48ZyBjbGlwLXBhdGg9InVybCgjYikiPjxwYXRoIGQ9Ik00IDIwYzAtOC44MzcgNy4xNjMtMTYgMTYtMTZzMTYgNy4xNjMgMTYgMTYtNy4xNjMgMTYtMTYgMTZTNCAyOC44MzcgNCAyMFoiIGZpbGw9IiNGOUY1RkYiLz48cGF0aCBkPSJNNSAyMGMwLTguMjg0IDYuNzE2LTE1IDE1LTE1IDguMjg0IDAgMTUgNi43MTYgMTUgMTUgMCA4LjI4NC02LjcxNiAxNS0xNSAxNS04LjI4NCAwLTE1LTYuNzE2LTE1LTE1WiIgZmlsbD0iIzdGNTZEOSIvPjxwYXRoIGQ9Ik01IDIwYzAtOC4yODQgNi43MTYtMTUgMTUtMTUgOC4yODQgMCAxNSA2LjcxNiAxNSAxNSAwIDguMjg0LTYuNzE2IDE1LTE1IDE1LTguMjg0IDAtMTUtNi43MTYtMTUtMTVaIiBzdHJva2U9IiM3RjU2RDkiIHN0cm9rZS13aWR0aD0iMiIvPjxjaXJjbGUgY3g9IjIwIiBjeT0iMjAiIHI9IjUiIGZpbGw9IiNmZmYiLz48L2c+PC9nPjxkZWZzPjxjbGlwUGF0aCBpZD0iYiI+PHBhdGggZD0iTTQgMjBjMC04LjgzNyA3LjE2My0xNiAxNi0xNnMxNiA3LjE2MyAxNiAxNi03LjE2MyAxNi0xNiAxNlM0IDI4LjgzNyA0IDIwWiIgZmlsbD0iI2ZmZiIvPjwvY2xpcFBhdGg+PGZpbHRlciBpZD0iYSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+PGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz48ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+PGZlTW9ycGhvbG9neSByYWRpdXM9IjQiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzA0XzM4MiIvPjxmZU9mZnNldC8+PGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuNjE5MTUyIDAgMCAwIDAgMC40NjU1MjkgMCAwIDAgMCAwLjkzMDU0OSAwIDAgMCAwLjI0IDAiLz48ZmVCbGVuZCBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzA0XzM4MiIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18zMDRfMzgyIiByZXN1bHQ9InNoYXBlIi8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPg==",g=e(82897),x=e(96330),C=e(49468),L=e(82182),R=e(38725),O=e(79495),X=e(65400),ce=e(87462),me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},ve=me,J=e(84089),q=function(o,d){return n.createElement(J.Z,(0,ce.Z)({},o,{ref:d,icon:ve}))},Ne=n.forwardRef(q),Ce=e(48689),ye=e(86548),Pe=e(82826),Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},Se=Ee,Te=function(o,d){return n.createElement(J.Z,(0,ce.Z)({},o,{ref:d,icon:Se}))},we=n.forwardRef(Te),Ae=e(31365),Ze=e(4393),de=e(86250),Ie=e(38703),Le=e(42075),Me=e(15867),Oe=e(93967),be=e.n(Oe),je=e(6589),ze=e(2039),M={uploadWrapper:"uploadWrapper___lI_Uj",backToList:"backToList___OSBoP",footer:"footer___mu5Ql",nextButton:"nextButton___H_c7u",uploadContent:"uploadContent___H2UOT",uploader:"uploader___J_kY5",hiddenUploader:"hiddenUploader___eVP6R",fileIcon:"fileIcon___MNG5b",uploaderButton:"uploaderButton___nrZBj",uploaderIcon:"uploaderIcon___pon6k",deleteIcon:"deleteIcon___RARFL",uploaderItem:"uploaderItem___wWr9h",uploaderItemProgress:"uploaderItemProgress___FUj_L",uploaderItemTextWrapper:"uploaderItemTextWrapper___bTzTB",progressWrapper:"progressWrapper___j7RXP",progress:"progress___zSrYV",selectFilesText:"selectFilesText___Wvg63",changeSpecificCategoryText:"changeSpecificCategoryText___vAhN8"},l=e(86074),Ge=Ae.Z.Dragger,Fe=function(o){var d,F=o.file,H=o.isUpload,ue=o.remove,ge=o.handleEdit,fe=(0,L.wK)(),ee=fe.removeDocument,V=F==null||(d=F.response)===null||d===void 0?void 0:d.id,te=function(){var ne=D()(j()().mark(function _(){var Q;return j()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(F.status!=="error"){Y.next=4;break}ue(V),Y.next=8;break;case 4:return Y.next=6,ee(V);case 6:Q=Y.sent,Q===0&&ue(V);case 8:case"end":return Y.stop()}},_)}));return function(){return ne.apply(this,arguments)}}(),he=function(){F.status==="done"&&ge(V)};return(0,l.jsxs)(Ze.Z,{className:M.uploaderItem,children:[(0,l.jsxs)(de.Z,{justify:"space-between",children:[(0,l.jsx)(Ne,{className:M.fileIcon}),(0,l.jsxs)("section",{className:M.uploaderItemTextWrapper,children:[(0,l.jsx)("div",{children:(0,l.jsx)("b",{children:F.name})}),(0,l.jsx)("span",{children:F.size})]}),H?(0,l.jsx)(Ce.Z,{className:M.deleteIcon,onClick:te}):(0,l.jsx)(ye.Z,{onClick:he})]}),(0,l.jsxs)(de.Z,{children:[(0,l.jsx)(Ie.Z,{showInfo:!1,percent:100,className:M.uploaderItemProgress,strokeColor:" rgba(127, 86, 217, 1) "}),(0,l.jsx)("span",{children:"100%"})]})]})},ke=function(){var o=(0,L.w9)(),d=(0,n.useState)(!0),F=f()(d,2),H=F[0],ue=F[1],ge=(0,n.useState)([]),fe=f()(ge,2),ee=fe[0],V=fe[1],te=(0,n.useRef)([]),he=(0,je.useNavigate)(),ne=(0,R.cE)(),_=ne.currentRecord,Q=ne.setRecord,$=(0,R.$0)(_.id),Y=$.changeParserLoading,Ue=$.onChangeParserOk,Re=$.changeParserVisible,Ye=$.hideChangeParserModal,pe=$.showChangeParserModal,De=(0,C.OB)(),_e=(0,C.cG)(),We=(0,C.TO)(),He=(0,ze.qM)("knowledgeDetails"),ae=He.t,Ve=(0,n.useMemo)(function(){return H?ee.length>0&&te.current.filter(function(z){return(0,X.Re)(z)}).length===ee.length:!0},[ee,H]),Ke=function(){var z=D()(j()().mark(function T(w){var re,le,oe,k;return j()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return re=w.file,le=w.onSuccess,oe=w.onError,se.next=3,We(re);case 3:k=se.sent,(k==null?void 0:k.retcode)===0?(V(function(et){return et.concat(k.data.id)}),le&&le(k.data)):oe&&oe(k==null?void 0:k.data);case 5:case"end":return se.stop()}},T)}));return function(w){return z.apply(this,arguments)}}(),Xe=(0,n.useCallback)(function(z){V(function(T){return T.filter(function(w){return w!==z})})},[]),Je=(0,n.useCallback)(function(z){var T=De.find(function(w){return w.id===z});T&&Q(T),pe()},[De,pe,Q]),Qe={name:"file",multiple:!0,itemRender:function(T,w,re,le){te.current=re;var oe=function(xe){(0,X.Re)(w)&&Xe(xe),le.remove()};return(0,l.jsx)(Fe,{isUpload:H,file:w,fileList:re,originNode:T,remove:oe,showModal:pe,setRecord:Q,handleEdit:Je})},customRequest:Ke,onDrop:function(T){console.log("Dropped files",T.dataTransfer.files)}},$e=function(){var T=te.current.map(function(w){return w.response.id});_e({doc_ids:T,run:1})},qe=function(){H?ue(!1):($e(),he("/knowledge/".concat(x.Rx.Dataset,"?id=").concat(o)))};return(0,O.fS)(),(0,L.SD)(),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:M.uploadWrapper,children:[(0,l.jsxs)("section",{children:[(0,l.jsxs)(Le.Z,{className:M.backToList,children:[(0,l.jsx)(Pe.Z,{}),(0,l.jsx)(je.Link,{to:"/knowledge/dataset?id=".concat(o),children:"Back to select files"})]}),(0,l.jsxs)("div",{className:M.progressWrapper,children:[(0,l.jsxs)(de.Z,{align:"center",justify:"center",children:[(0,l.jsx)(a,{}),(0,l.jsx)(Ie.Z,{percent:100,showInfo:!1,className:M.progress,strokeColor:" rgba(127, 86, 217, 1) "}),(0,l.jsx)(m,{})]}),(0,l.jsxs)(de.Z,{justify:"space-around",children:[(0,l.jsx)("p",{className:M.selectFilesText,children:(0,l.jsx)("b",{children:ae("selectFiles")})}),(0,l.jsx)("p",{className:M.changeSpecificCategoryText,children:(0,l.jsx)("b",{children:ae("changeSpecificCategory")})})]})]})]}),(0,l.jsx)("section",{className:M.uploadContent,children:(0,l.jsxs)(Ge,y()(y()({},Qe),{},{className:be()(M.uploader,A()({},M.hiddenUploader,!H)),children:[(0,l.jsx)(Me.ZP,{className:M.uploaderButton,children:(0,l.jsx)(we,{className:M.uploaderIcon})}),(0,l.jsx)("p",{className:"ant-upload-text",children:ae("uploadTitle")}),(0,l.jsx)("p",{className:"ant-upload-hint",children:ae("uploadDescription")})]}))}),(0,l.jsx)("section",{className:M.footer,children:(0,l.jsx)(Me.ZP,{type:"primary",className:M.nextButton,onClick:qe,disabled:!Ve,size:"large",children:ae("next",{keyPrefix:"common"})})})]}),(0,l.jsx)(g.Z,{documentId:_.id,parserId:_.parser_id,parserConfig:_.parser_config,documentExtension:(0,X.RT)(_.name),onOk:Ue,visible:Re,hideModal:Ye,loading:Y})]})},Be=ke},85576:function(ie,G,e){e.d(G,{Z:function(){return E}});var p=e(56080),y=e(38657),B=e(56745),A=e(62435),P=e(93967),f=e.n(P),r=e(40974),j=e(8745),Z=e(53124),D=e(57134),n=e(4941),b=e(71194),U=e(35792),K=function(s,u){var I={};for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&u.indexOf(c)<0&&(I[c]=s[c]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,c=Object.getOwnPropertySymbols(s);t<c.length;t++)u.indexOf(c[t])<0&&Object.prototype.propertyIsEnumerable.call(s,c[t])&&(I[c[t]]=s[c[t]]);return I};const W=s=>{const{prefixCls:u,className:I,closeIcon:c,closable:t,type:a,title:i,children:g,footer:x}=s,C=K(s,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:L}=A.useContext(Z.E_),R=L(),O=u||L("modal"),X=(0,U.Z)(R),[ce,me,ve]=(0,b.ZP)(O,X),J=`${O}-confirm`;let q={};return a?q={closable:t!=null?t:!1,title:"",footer:"",children:A.createElement(D.O,Object.assign({},s,{prefixCls:O,confirmPrefixCls:J,rootPrefixCls:R,content:g}))}:q={closable:t!=null?t:!0,title:i,footer:x!==null&&A.createElement(n.$,Object.assign({},s)),children:g},ce(A.createElement(r.s,Object.assign({prefixCls:O,className:f()(me,`${O}-pure-panel`,a&&J,a&&`${J}-${a}`,I,ve,X)},C,{closeIcon:(0,n.b)(O,c),closable:t},q)))};var S=(0,j.i)(W),N=e(94423);function m(s){return(0,p.ZP)((0,p.uW)(s))}const v=B.Z;v.useModal=N.Z,v.info=function(u){return(0,p.ZP)((0,p.cw)(u))},v.success=function(u){return(0,p.ZP)((0,p.vq)(u))},v.error=function(u){return(0,p.ZP)((0,p.AQ)(u))},v.warning=m,v.warn=m,v.confirm=function(u){return(0,p.ZP)((0,p.Au)(u))},v.destroyAll=function(){for(;y.Z.length;){const u=y.Z.pop();u&&u()}},v.config=p.ai,v._InternalPanelDoNotUseOrYouWillBeFired=S;var E=v},24809:function(ie,G,e){e.d(G,{m:function(){return A}});function p(P){let f,r,j,Z,D,n,b;return U(),{feed:K,reset:U};function U(){f=!0,r="",j=0,Z=-1,D=void 0,n=void 0,b=""}function K(S){r=r?r+S:S,f&&B(r)&&(r=r.slice(y.length)),f=!1;const N=r.length;let m=0,v=!1;for(;m<N;){v&&(r[m]===`
`&&++m,v=!1);let E=-1,s=Z,u;for(let I=j;E<0&&I<N;++I)u=r[I],u===":"&&s<0?s=I-m:u==="\r"?(v=!0,E=I-m):u===`
`&&(E=I-m);if(E<0){j=N-m,Z=s;break}else j=0,Z=-1;W(r,m,s,E),m+=E+1}m===N?r="":m>0&&(r=r.slice(m))}function W(S,N,m,v){if(v===0){b.length>0&&(P({type:"event",id:D,event:n||void 0,data:b.slice(0,-1)}),b="",D=void 0),n=void 0;return}const E=m<0,s=S.slice(N,N+(E?v:m));let u=0;E?u=v:S[N+m+1]===" "?u=m+2:u=m+1;const I=N+u,c=v-u,t=S.slice(I,I+c).toString();if(s==="data")b+=t?"".concat(t,`
`):`
`;else if(s==="event")n=t;else if(s==="id"&&!t.includes("\0"))D=t;else if(s==="retry"){const a=parseInt(t,10);Number.isNaN(a)||P({type:"reconnect-interval",value:a})}}}const y=[239,187,191];function B(P){return y.every((f,r)=>P.charCodeAt(r)===f)}class A extends TransformStream{constructor(){let f;super({start(r){f=p(j=>{j.type==="event"&&r.enqueue(j)})},transform(r){f.feed(r)}})}}}}]);

//# sourceMappingURL=p__add-knowledge__components__knowledge-dataset__knowledge-upload-file__index.c8402334.async.js.map