{"version":3,"file":"p__chat__index.72aa528b.async.js","mappings":"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","sources":["webpack:///./src/components/pdf-previewer/hooks.ts","webpack:///./src/components/rename-modal/index.tsx","webpack:///./src/components/rerank.tsx","webpack:///./src/components/similarity-slider/index.tsx","webpack:///./src/constants/knowledge.ts","webpack:///./src/hooks/commonHooks.tsx","webpack:///./src/hooks/documentHooks.ts","webpack:///./src/hooks/llmHooks.ts","webpack:///./src/hooks/logicHooks.ts","webpack:///./src/hooks/routeHook.ts","webpack:///./src/utils/storeUtil.ts","webpack:///./src/hooks/storeHooks.ts","webpack:///./src/hooks/userSettingHook.ts","webpack:///./src/assets/svg/chat-app-cube.svg","webpack:///./src/assets/svg/chat-configuration-atom.svg","webpack:///./src/pages/chat/chat-configuration-modal/index.less?3283","webpack:///./src/pages/chat/chat-configuration-modal/assistant-setting.tsx","webpack:///./src/pages/chat/chat-configuration-modal/hooks.ts","webpack:///./src/pages/chat/chat-configuration-modal/model-setting.tsx","webpack:///./src/pages/chat/chat-configuration-modal/editable-cell.tsx","webpack:///./src/pages/chat/chat-configuration-modal/prompt-engine.tsx","webpack:///./src/pages/chat/chat-configuration-modal/index.tsx","webpack:///./src/components/pdf-previewer/index.less?80cf","webpack:///./src/components/pdf-previewer/index.tsx","webpack:///./src/pages/chat/chat-container/index.less?a72e","webpack:///./src/pages/chat/chat-container/index.tsx","webpack:///./src/components/line-chart/index.tsx","webpack:///./src/components/copy-to-clipboard.tsx","webpack:///./src/pages/chat/chat-api-key-modal/index.tsx","webpack:///./src/components/highlight-markdown/index.tsx","webpack:///./src/pages/chat/embed-modal/index.less?ee4d","webpack:///./src/pages/chat/embed-modal/index.tsx","webpack:///./src/pages/chat/chat-overview-modal/index.less?d748","webpack:///./src/pages/chat/chat-overview-modal/index.tsx","webpack:///./src/pages/chat/index.less?fa52","webpack:///./src/pages/chat/index.tsx","webpack:///./src/pages/document-viewer/file-error/index.less?9a0d","webpack:///./src/pages/document-viewer/file-error/index.tsx","webpack:///./src/utils/date.ts","webpack:///./src/utils/documentUtils.ts","webpack:///./src/hooks/ lazy namespace object"],"sourcesContent":["import axios from 'axios';\nimport { useCallback, useEffect, useState } from 'react';\n\nexport const useCatchDocumentError = (url: string) => {\n  const [error, setError] = useState<string>('');\n\n  const fetchDocument = useCallback(async () => {\n    const { data } = await axios.get(url);\n    if (data.retcode !== 0) {\n      setError(data?.retmsg);\n    }\n  }, [url]);\n  useEffect(() => {\n    fetchDocument();\n  }, [fetchDocument]);\n\n  return error;\n};\n","import { useTranslate } from '@/hooks/commonHooks';\nimport { Form, Input, Modal } from 'antd';\nimport { useEffect } from 'react';\nimport { IModalManagerChildrenProps } from '../modal-manager';\n\ninterface IProps extends Omit<IModalManagerChildrenProps, 'showModal'> {\n  loading: boolean;\n  initialName: string;\n  onOk: (name: string) => void;\n  showModal?(): void;\n}\n\nconst RenameModal = ({\n  visible,\n  hideModal,\n  loading,\n  initialName,\n  onOk,\n}: IProps) => {\n  const [form] = Form.useForm();\n  const { t } = useTranslate('common');\n\n  type FieldType = {\n    name?: string;\n  };\n\n  const handleOk = async () => {\n    const ret = await form.validateFields();\n\n    return onOk(ret.name);\n  };\n\n  const handleCancel = () => {\n    hideModal();\n  };\n\n  const onFinish = (values: any) => {\n    console.log('Success:', values);\n  };\n\n  const onFinishFailed = (errorInfo: any) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  useEffect(() => {\n    if (visible) {\n      form.setFieldValue('name', initialName);\n    }\n  }, [initialName, form, visible]);\n\n  return (\n    <Modal\n      title={t('rename')}\n      open={visible}\n      onOk={handleOk}\n      onCancel={handleCancel}\n      okButtonProps={{ loading }}\n      confirmLoading={loading}\n    >\n      <Form\n        name=\"basic\"\n        labelCol={{ span: 4 }}\n        wrapperCol={{ span: 20 }}\n        style={{ maxWidth: 600 }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n        autoComplete=\"off\"\n        form={form}\n      >\n        <Form.Item<FieldType>\n          label={t('name')}\n          name=\"name\"\n          rules={[{ required: true, message: t('namePlaceholder') }]}\n        >\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default RenameModal;\n","import { LlmModelType } from '@/constants/knowledge';\nimport { useTranslate } from '@/hooks/commonHooks';\nimport { useSelectLlmOptionsByModelType } from '@/hooks/llmHooks';\nimport { Form, Select, Slider } from 'antd';\n\ntype FieldType = {\n  rerank_id?: string;\n  top_k?: number;\n};\n\nexport const RerankItem = () => {\n  const { t } = useTranslate('knowledgeDetails');\n  const allOptions = useSelectLlmOptionsByModelType();\n\n  return (\n    <Form.Item\n      label={t('rerankModel')}\n      name={'rerank_id'}\n      tooltip={t('rerankTip')}\n    >\n      <Select\n        options={allOptions[LlmModelType.Rerank]}\n        allowClear\n        placeholder={t('rerankPlaceholder')}\n      />\n    </Form.Item>\n  );\n};\n\nconst Rerank = () => {\n  const { t } = useTranslate('knowledgeDetails');\n\n  return (\n    <>\n      <RerankItem></RerankItem>\n      <Form.Item noStyle dependencies={['rerank_id']}>\n        {({ getFieldValue }) => {\n          const rerankId = getFieldValue('rerank_id');\n          return (\n            rerankId && (\n              <Form.Item<FieldType>\n                label={t('topK')}\n                name={'top_k'}\n                initialValue={1024}\n                tooltip={t('topKTip')}\n              >\n                <Slider max={2048} min={1} />\n              </Form.Item>\n            )\n          );\n        }}\n      </Form.Item>\n    </>\n  );\n};\n\nexport default Rerank;\n","import { useTranslate } from '@/hooks/commonHooks';\nimport { Form, Slider } from 'antd';\n\ntype FieldType = {\n  similarity_threshold?: number;\n  vector_similarity_weight?: number;\n};\n\ninterface IProps {\n  isTooltipShown?: boolean;\n}\n\nconst SimilaritySlider = ({ isTooltipShown = false }: IProps) => {\n  const { t } = useTranslate('knowledgeDetails');\n\n  return (\n    <>\n      <Form.Item<FieldType>\n        label={t('similarityThreshold')}\n        name={'similarity_threshold'}\n        tooltip={isTooltipShown && t('similarityThresholdTip')}\n        initialValue={0.2}\n      >\n        <Slider max={1} step={0.01} />\n      </Form.Item>\n      <Form.Item<FieldType>\n        label={t('vectorSimilarityWeight')}\n        name={'vector_similarity_weight'}\n        initialValue={1 - 0.3}\n        tooltip={isTooltipShown && t('vectorSimilarityWeightTip')}\n      >\n        <Slider max={1} step={0.01} />\n      </Form.Item>\n    </>\n  );\n};\n\nexport default SimilaritySlider;\n","export enum KnowledgeRouteKey {\n  Dataset = 'dataset',\n  Testing = 'testing',\n  Configuration = 'configuration',\n}\n\nexport enum RunningStatus {\n  UNSTART = '0', // need to run\n  RUNNING = '1', // need to cancel\n  CANCEL = '2', // need to refresh\n  DONE = '3', // need to refresh\n  FAIL = '4', // need to refresh\n}\n\nexport enum ModelVariableType {\n  Improvise = 'Improvise',\n  Precise = 'Precise',\n  Balance = 'Balance',\n}\n\nexport const settledModelVariableMap = {\n  [ModelVariableType.Improvise]: {\n    temperature: 0.9,\n    top_p: 0.9,\n    frequency_penalty: 0.2,\n    presence_penalty: 0.4,\n    max_tokens: 512,\n  },\n  [ModelVariableType.Precise]: {\n    temperature: 0.1,\n    top_p: 0.3,\n    frequency_penalty: 0.7,\n    presence_penalty: 0.4,\n    max_tokens: 512,\n  },\n  [ModelVariableType.Balance]: {\n    temperature: 0.5,\n    top_p: 0.5,\n    frequency_penalty: 0.7,\n    presence_penalty: 0.4,\n    max_tokens: 512,\n  },\n};\n\nexport enum LlmModelType {\n  Embedding = 'embedding',\n  Chat = 'chat',\n  Image2text = 'image2text',\n  Speech2text = 'speech2text',\n  Rerank = 'rerank',\n}\n\nexport enum KnowledgeSearchParams {\n  DocumentId = 'doc_id',\n  KnowledgeId = 'id',\n}\n","import { ExclamationCircleFilled } from '@ant-design/icons';\nimport { App } from 'antd';\nimport isEqual from 'lodash/isEqual';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport const useSetModalState = () => {\n  const [visible, setVisible] = useState(false);\n\n  const showModal = () => {\n    setVisible(true);\n  };\n  const hideModal = () => {\n    setVisible(false);\n  };\n\n  const switchVisible = () => {\n    setVisible(!visible);\n  };\n\n  return { visible, showModal, hideModal, switchVisible };\n};\n\nexport const useDeepCompareEffect = (\n  effect: React.EffectCallback,\n  deps: React.DependencyList,\n) => {\n  const ref = useRef<React.DependencyList>();\n  let callback: ReturnType<React.EffectCallback> = () => {};\n  if (!isEqual(deps, ref.current)) {\n    callback = effect();\n    ref.current = deps;\n  }\n  useEffect(() => {\n    return () => {\n      if (callback) {\n        callback();\n      }\n    };\n  }, []);\n};\n\nexport interface UseDynamicSVGImportOptions {\n  onCompleted?: (\n    name: string,\n    SvgIcon: React.FC<React.SVGProps<SVGSVGElement>> | undefined,\n  ) => void;\n  onError?: (err: Error) => void;\n}\n\nexport function useDynamicSVGImport(\n  name: string,\n  options: UseDynamicSVGImportOptions = {},\n) {\n  const ImportedIconRef = useRef<React.FC<React.SVGProps<SVGSVGElement>>>();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error>();\n\n  const { onCompleted, onError } = options;\n  useEffect(() => {\n    setLoading(true);\n    const importIcon = async (): Promise<void> => {\n      try {\n        ImportedIconRef.current = (await import(name)).ReactComponent;\n        onCompleted?.(name, ImportedIconRef.current);\n      } catch (err: any) {\n        onError?.(err);\n        setError(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    importIcon();\n  }, [name, onCompleted, onError]);\n\n  return { error, loading, SvgIcon: ImportedIconRef.current };\n}\n\ninterface IProps {\n  onOk?: (...args: any[]) => any;\n  onCancel?: (...args: any[]) => any;\n}\n\nexport const useShowDeleteConfirm = () => {\n  const { modal } = App.useApp();\n  const { t } = useTranslation();\n\n  const showDeleteConfirm = useCallback(\n    ({ onOk, onCancel }: IProps): Promise<number> => {\n      return new Promise((resolve, reject) => {\n        modal.confirm({\n          title: t('common.deleteModalTitle'),\n          icon: <ExclamationCircleFilled />,\n          // content: 'Some descriptions',\n          okText: t('common.ok'),\n          okType: 'danger',\n          cancelText: t('common.cancel'),\n          async onOk() {\n            try {\n              const ret = await onOk?.();\n              resolve(ret);\n              console.info(ret);\n            } catch (error) {\n              reject(error);\n            }\n          },\n          onCancel() {\n            onCancel?.();\n          },\n        });\n      });\n    },\n    [t, modal],\n  );\n\n  return showDeleteConfirm;\n};\n\nexport const useTranslate = (keyPrefix: string) => {\n  return useTranslation('translation', { keyPrefix });\n};\n\nexport const useCommonTranslation = () => {\n  return useTranslation('translation', { keyPrefix: 'common' });\n};\n","import { IChunk, IKnowledgeFile } from '@/interfaces/database/knowledge';\nimport { IChangeParserConfigRequestBody } from '@/interfaces/request/document';\nimport { api_host } from '@/utils/api';\nimport { buildChunkHighlights } from '@/utils/documentUtils';\nimport { UploadFile } from 'antd';\nimport { useCallback, useMemo, useState } from 'react';\nimport { IHighlight } from 'react-pdf-highlighter';\nimport { useDispatch, useSelector } from 'umi';\nimport { useGetKnowledgeSearchParams } from './routeHook';\nimport { useOneNamespaceEffectsLoading } from './storeHooks';\n\nexport const useGetDocumentUrl = (documentId?: string) => {\n  const getDocumentUrl = useCallback(\n    (id?: string) => {\n      return `${api_host}/document/get/${documentId || id}`;\n    },\n    [documentId],\n  );\n\n  return getDocumentUrl;\n};\n\nexport const useGetChunkHighlights = (selectedChunk: IChunk) => {\n  const [size, setSize] = useState({ width: 849, height: 1200 });\n\n  const highlights: IHighlight[] = useMemo(() => {\n    return buildChunkHighlights(selectedChunk, size);\n  }, [selectedChunk, size]);\n\n  const setWidthAndHeight = (width: number, height: number) => {\n    setSize((pre) => {\n      if (pre.height !== height || pre.width !== width) {\n        return { height, width };\n      }\n      return pre;\n    });\n  };\n\n  return { highlights, setWidthAndHeight };\n};\n\nexport const useFetchDocumentList = () => {\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const dispatch = useDispatch();\n\n  const fetchKfList = useCallback(() => {\n    return dispatch<any>({\n      type: 'kFModel/getKfList',\n      payload: {\n        kb_id: knowledgeId,\n      },\n    });\n  }, [dispatch, knowledgeId]);\n\n  return fetchKfList;\n};\n\nexport const useSetDocumentStatus = () => {\n  const dispatch = useDispatch();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const setDocumentStatus = useCallback(\n    (status: boolean, documentId: string) => {\n      dispatch({\n        type: 'kFModel/updateDocumentStatus',\n        payload: {\n          doc_id: documentId,\n          status: Number(status),\n          kb_id: knowledgeId,\n        },\n      });\n    },\n    [dispatch, knowledgeId],\n  );\n\n  return setDocumentStatus;\n};\n\nexport const useSelectDocumentList = () => {\n  const list: IKnowledgeFile[] = useSelector(\n    (state: any) => state.kFModel.data,\n  );\n  return list;\n};\n\nexport const useSaveDocumentName = () => {\n  const dispatch = useDispatch();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const saveName = useCallback(\n    (documentId: string, name: string) => {\n      return dispatch<any>({\n        type: 'kFModel/document_rename',\n        payload: {\n          doc_id: documentId,\n          name: name,\n          kb_id: knowledgeId,\n        },\n      });\n    },\n    [dispatch, knowledgeId],\n  );\n\n  return saveName;\n};\n\nexport const useCreateDocument = () => {\n  const dispatch = useDispatch();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const createDocument = useCallback(\n    (name: string) => {\n      try {\n        return dispatch<any>({\n          type: 'kFModel/document_create',\n          payload: {\n            name,\n            kb_id: knowledgeId,\n          },\n        });\n      } catch (errorInfo) {\n        console.log('Failed:', errorInfo);\n      }\n    },\n    [dispatch, knowledgeId],\n  );\n\n  return createDocument;\n};\n\nexport const useSetDocumentParser = () => {\n  const dispatch = useDispatch();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const setDocumentParser = useCallback(\n    (\n      parserId: string,\n      documentId: string,\n      parserConfig: IChangeParserConfigRequestBody,\n    ) => {\n      try {\n        return dispatch<any>({\n          type: 'kFModel/document_change_parser',\n          payload: {\n            parser_id: parserId,\n            doc_id: documentId,\n            kb_id: knowledgeId,\n            parser_config: parserConfig,\n          },\n        });\n      } catch (errorInfo) {\n        console.log('Failed:', errorInfo);\n      }\n    },\n    [dispatch, knowledgeId],\n  );\n\n  return setDocumentParser;\n};\n\nexport const useRemoveDocument = () => {\n  const dispatch = useDispatch();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const removeDocument = useCallback(\n    (documentIds: string[]) => {\n      try {\n        return dispatch<any>({\n          type: 'kFModel/document_rm',\n          payload: {\n            doc_id: documentIds,\n            kb_id: knowledgeId,\n          },\n        });\n      } catch (errorInfo) {\n        console.log('Failed:', errorInfo);\n      }\n    },\n    [dispatch, knowledgeId],\n  );\n\n  return removeDocument;\n};\n\nexport const useUploadDocument = () => {\n  const dispatch = useDispatch();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  const uploadDocument = useCallback(\n    (fileList: UploadFile[]) => {\n      try {\n        return dispatch<any>({\n          type: 'kFModel/upload_document',\n          payload: {\n            fileList,\n            kb_id: knowledgeId,\n          },\n        });\n      } catch (errorInfo) {\n        console.log('Failed:', errorInfo);\n      }\n    },\n    [dispatch, knowledgeId],\n  );\n\n  return uploadDocument;\n};\n\nexport const useRunDocument = () => {\n  const dispatch = useDispatch();\n\n  const runDocumentByIds = useCallback(\n    (payload: any) => {\n      try {\n        return dispatch<any>({\n          type: 'kFModel/document_run',\n          payload,\n        });\n      } catch (errorInfo) {\n        console.log('Failed:', errorInfo);\n      }\n    },\n    [dispatch],\n  );\n\n  return runDocumentByIds;\n};\n\nexport const useSelectRunDocumentLoading = () => {\n  const loading = useOneNamespaceEffectsLoading('kFModel', ['document_run']);\n  return loading;\n};\n","import { LlmModelType } from '@/constants/knowledge';\nimport {\n  IFactory,\n  IMyLlmValue,\n  IThirdOAIModelCollection,\n} from '@/interfaces/database/llm';\nimport {\n  IAddLlmRequestBody,\n  IDeleteLlmRequestBody,\n} from '@/interfaces/request/llm';\nimport { sortLLmFactoryListBySpecifiedOrder } from '@/utils/commonUtil';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'umi';\n\nexport const useFetchLlmList = (\n  modelType?: LlmModelType,\n  isOnMountFetching: boolean = true,\n) => {\n  const dispatch = useDispatch();\n\n  const fetchLlmList = useCallback(() => {\n    dispatch({\n      type: 'settingModel/llm_list',\n      payload: { model_type: modelType },\n    });\n  }, [dispatch, modelType]);\n\n  useEffect(() => {\n    if (isOnMountFetching) {\n      fetchLlmList();\n    }\n  }, [fetchLlmList, isOnMountFetching]);\n\n  return fetchLlmList;\n};\n\nexport const useSelectLlmInfo = () => {\n  const llmInfo: IThirdOAIModelCollection = useSelector(\n    (state: any) => state.settingModel.llmInfo,\n  );\n\n  return llmInfo;\n};\n\nexport const useSelectLlmOptions = () => {\n  const llmInfo: IThirdOAIModelCollection = useSelectLlmInfo();\n\n  const embeddingModelOptions = useMemo(() => {\n    return Object.entries(llmInfo).map(([key, value]) => {\n      return {\n        label: key,\n        options: value.map((x) => ({\n          label: x.llm_name,\n          value: x.llm_name,\n          disabled: !x.available,\n        })),\n      };\n    });\n  }, [llmInfo]);\n\n  return embeddingModelOptions;\n};\n\nexport const useSelectLlmOptionsByModelType = () => {\n  const llmInfo: IThirdOAIModelCollection = useSelectLlmInfo();\n\n  const groupOptionsByModelType = (modelType: LlmModelType) => {\n    return Object.entries(llmInfo)\n      .filter(([, value]) =>\n        modelType ? value.some((x) => x.model_type.includes(modelType)) : true,\n      )\n      .map(([key, value]) => {\n        return {\n          label: key,\n          options: value\n            .filter((x) =>\n              modelType ? x.model_type.includes(modelType) : true,\n            )\n            .map((x) => ({\n              label: x.llm_name,\n              value: x.llm_name,\n              disabled: !x.available,\n            })),\n        };\n      });\n  };\n\n  return {\n    [LlmModelType.Chat]: groupOptionsByModelType(LlmModelType.Chat),\n    [LlmModelType.Embedding]: groupOptionsByModelType(LlmModelType.Embedding),\n    [LlmModelType.Image2text]: groupOptionsByModelType(LlmModelType.Image2text),\n    [LlmModelType.Speech2text]: groupOptionsByModelType(\n      LlmModelType.Speech2text,\n    ),\n    [LlmModelType.Rerank]: groupOptionsByModelType(LlmModelType.Rerank),\n  };\n};\n\nexport const useSelectLlmFactoryList = () => {\n  const factoryList: IFactory[] = useSelector(\n    (state: any) => state.settingModel.factoryList,\n  );\n\n  return factoryList;\n};\n\nexport const useSelectMyLlmList = () => {\n  const myLlmList: Record<string, IMyLlmValue> = useSelector(\n    (state: any) => state.settingModel.myLlmList,\n  );\n\n  return myLlmList;\n};\n\nexport const useFetchLlmFactoryListOnMount = () => {\n  const dispatch = useDispatch();\n  const factoryList = useSelectLlmFactoryList();\n  const myLlmList = useSelectMyLlmList();\n\n  const list = useMemo(() => {\n    const currentList = factoryList.filter((x) =>\n      Object.keys(myLlmList).every((y) => y !== x.name),\n    );\n    return sortLLmFactoryListBySpecifiedOrder(currentList);\n  }, [factoryList, myLlmList]);\n\n  const fetchLlmFactoryList = useCallback(() => {\n    dispatch({\n      type: 'settingModel/factories_list',\n    });\n  }, [dispatch]);\n\n  useEffect(() => {\n    fetchLlmFactoryList();\n  }, [fetchLlmFactoryList]);\n\n  return list;\n};\n\nexport type LlmItem = { name: string; logo: string } & IMyLlmValue;\n\nexport const useFetchMyLlmListOnMount = () => {\n  const dispatch = useDispatch();\n  const llmList = useSelectMyLlmList();\n  const factoryList = useSelectLlmFactoryList();\n\n  const list: Array<LlmItem> = useMemo(() => {\n    return Object.entries(llmList).map(([key, value]) => ({\n      name: key,\n      logo: factoryList.find((x) => x.name === key)?.logo ?? '',\n      ...value,\n    }));\n  }, [llmList, factoryList]);\n\n  const fetchMyLlmList = useCallback(() => {\n    dispatch({\n      type: 'settingModel/my_llm',\n    });\n  }, [dispatch]);\n\n  useEffect(() => {\n    fetchMyLlmList();\n  }, [fetchMyLlmList]);\n\n  return list;\n};\n\nexport interface IApiKeySavingParams {\n  llm_factory: string;\n  api_key: string;\n  llm_name?: string;\n  model_type?: string;\n  base_url?: string;\n}\n\nexport const useSaveApiKey = () => {\n  const dispatch = useDispatch();\n\n  const saveApiKey = useCallback(\n    (savingParams: IApiKeySavingParams) => {\n      return dispatch<any>({\n        type: 'settingModel/set_api_key',\n        payload: savingParams,\n      });\n    },\n    [dispatch],\n  );\n\n  return saveApiKey;\n};\n\nexport interface ISystemModelSettingSavingParams {\n  tenant_id: string;\n  name?: string;\n  asr_id: string;\n  embd_id: string;\n  img2txt_id: string;\n  llm_id: string;\n}\n\nexport const useSaveTenantInfo = () => {\n  const dispatch = useDispatch();\n\n  const saveTenantInfo = useCallback(\n    (savingParams: ISystemModelSettingSavingParams) => {\n      return dispatch<any>({\n        type: 'settingModel/set_tenant_info',\n        payload: savingParams,\n      });\n    },\n    [dispatch],\n  );\n\n  return saveTenantInfo;\n};\n\nexport const useAddLlm = () => {\n  const dispatch = useDispatch();\n\n  const addLlm = useCallback(\n    (requestBody: IAddLlmRequestBody) => {\n      return dispatch<any>({\n        type: 'settingModel/add_llm',\n        payload: requestBody,\n      });\n    },\n    [dispatch],\n  );\n\n  return addLlm;\n};\n\nexport const useDeleteLlm = () => {\n  const dispatch = useDispatch();\n\n  const deleteLlm = useCallback(\n    (requestBody: IDeleteLlmRequestBody) => {\n      return dispatch<any>({\n        type: 'settingModel/delete_llm',\n        payload: requestBody,\n      });\n    },\n    [dispatch],\n  );\n\n  return deleteLlm;\n};\n","import { Authorization } from '@/constants/authorization';\nimport { LanguageTranslationMap } from '@/constants/common';\nimport { Pagination } from '@/interfaces/common';\nimport { IAnswer } from '@/interfaces/database/chat';\nimport { IKnowledgeFile } from '@/interfaces/database/knowledge';\nimport { IChangeParserConfigRequestBody } from '@/interfaces/request/document';\nimport api from '@/utils/api';\nimport { getAuthorization } from '@/utils/authorizationUtil';\nimport { PaginationProps } from 'antd';\nimport axios from 'axios';\nimport { EventSourceParserStream } from 'eventsource-parser/stream';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch } from 'umi';\nimport { useSetModalState, useTranslate } from './commonHooks';\nimport { useSetDocumentParser } from './documentHooks';\nimport { useOneNamespaceEffectsLoading } from './storeHooks';\nimport { useSaveSetting } from './userSettingHook';\n\nexport const useChangeDocumentParser = (documentId: string) => {\n  const setDocumentParser = useSetDocumentParser();\n\n  const {\n    visible: changeParserVisible,\n    hideModal: hideChangeParserModal,\n    showModal: showChangeParserModal,\n  } = useSetModalState();\n  const loading = useOneNamespaceEffectsLoading('kFModel', [\n    'document_change_parser',\n  ]);\n\n  const onChangeParserOk = useCallback(\n    async (parserId: string, parserConfig: IChangeParserConfigRequestBody) => {\n      const ret = await setDocumentParser(parserId, documentId, parserConfig);\n      if (ret === 0) {\n        hideChangeParserModal();\n      }\n    },\n    [hideChangeParserModal, setDocumentParser, documentId],\n  );\n\n  return {\n    changeParserLoading: loading,\n    onChangeParserOk,\n    changeParserVisible,\n    hideChangeParserModal,\n    showChangeParserModal,\n  };\n};\n\nexport const useSetSelectedRecord = <T = IKnowledgeFile>() => {\n  const [currentRecord, setCurrentRecord] = useState<T>({} as T);\n\n  const setRecord = (record: T) => {\n    setCurrentRecord(record);\n  };\n\n  return { currentRecord, setRecord };\n};\n\nexport const useChangeLanguage = () => {\n  const { i18n } = useTranslation();\n  const saveSetting = useSaveSetting();\n\n  const changeLanguage = (lng: string) => {\n    i18n.changeLanguage(\n      LanguageTranslationMap[lng as keyof typeof LanguageTranslationMap],\n    );\n    saveSetting({ language: lng });\n  };\n\n  return changeLanguage;\n};\n\nexport const useGetPagination = (\n  total: number,\n  page: number,\n  pageSize: number,\n  onPageChange: PaginationProps['onChange'],\n) => {\n  const { t } = useTranslate('common');\n\n  const pagination: PaginationProps = useMemo(() => {\n    return {\n      showQuickJumper: true,\n      total,\n      showSizeChanger: true,\n      current: page,\n      pageSize: pageSize,\n      pageSizeOptions: [1, 2, 10, 20, 50, 100],\n      onChange: onPageChange,\n      showTotal: (total) => `${t('total')} ${total}`,\n    };\n  }, [t, onPageChange, page, pageSize, total]);\n\n  return {\n    pagination,\n  };\n};\n\nexport const useSetPagination = (namespace: string) => {\n  const dispatch = useDispatch();\n\n  const setPagination = useCallback(\n    (pageNumber = 1, pageSize?: number) => {\n      const pagination: Pagination = {\n        current: pageNumber,\n      } as Pagination;\n      if (pageSize) {\n        pagination.pageSize = pageSize;\n      }\n      dispatch({\n        type: `${namespace}/setPagination`,\n        payload: pagination,\n      });\n    },\n    [dispatch, namespace],\n  );\n\n  return setPagination;\n};\n\nexport interface AppConf {\n  appName: string;\n}\n\nexport const useFetchAppConf = () => {\n  const [appConf, setAppConf] = useState<AppConf>({} as AppConf);\n  const fetchAppConf = useCallback(async () => {\n    const ret = await axios.get('/conf.json');\n\n    setAppConf(ret.data);\n  }, []);\n\n  useEffect(() => {\n    fetchAppConf();\n  }, [fetchAppConf]);\n\n  return appConf;\n};\n\nexport const useSendMessageWithSse = (\n  url: string = api.completeConversation,\n) => {\n  const [answer, setAnswer] = useState<IAnswer>({} as IAnswer);\n  const [done, setDone] = useState(true);\n\n  const send = useCallback(\n    async (body: any) => {\n      try {\n        setDone(false);\n        const response = await fetch(url, {\n          method: 'POST',\n          headers: {\n            [Authorization]: getAuthorization(),\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(body),\n        });\n\n        const reader = response?.body\n          ?.pipeThrough(new TextDecoderStream())\n          .pipeThrough(new EventSourceParserStream())\n          .getReader();\n\n        while (true) {\n          const x = await reader?.read();\n          if (x) {\n            const { done, value } = x;\n            try {\n              const val = JSON.parse(value?.data || '');\n              const d = val?.data;\n              if (typeof d !== 'boolean') {\n                console.info('data:', d);\n                setAnswer(d);\n              }\n            } catch (e) {\n              console.warn(e);\n            }\n            if (done) {\n              console.info('done');\n              break;\n            }\n          }\n        }\n        console.info('done?');\n        setDone(true);\n        return response;\n      } catch (e) {\n        setDone(true);\n        console.warn(e);\n      }\n    },\n    [url],\n  );\n\n  return { send, answer, done };\n};\n","import {\n  KnowledgeRouteKey,\n  KnowledgeSearchParams,\n} from '@/constants/knowledge';\nimport { useCallback } from 'react';\nimport { useLocation, useNavigate, useSearchParams } from 'umi';\n\nexport enum SegmentIndex {\n  Second = '2',\n  Third = '3',\n}\n\nexport const useSegmentedPathName = (index: SegmentIndex) => {\n  const { pathname } = useLocation();\n\n  const pathArray = pathname.split('/');\n  return pathArray[index] || '';\n};\n\nexport const useSecondPathName = () => {\n  return useSegmentedPathName(SegmentIndex.Second);\n};\n\nexport const useThirdPathName = () => {\n  return useSegmentedPathName(SegmentIndex.Third);\n};\n\nexport const useGetKnowledgeSearchParams = () => {\n  const [currentQueryParameters] = useSearchParams();\n\n  return {\n    documentId:\n      currentQueryParameters.get(KnowledgeSearchParams.DocumentId) || '',\n    knowledgeId:\n      currentQueryParameters.get(KnowledgeSearchParams.KnowledgeId) || '',\n  };\n};\n\nexport const useNavigateWithFromState = () => {\n  const navigate = useNavigate();\n  return useCallback(\n    (path: string) => {\n      navigate(path, { state: { from: path } });\n    },\n    [navigate],\n  );\n};\n\nexport const useNavigateToDataset = () => {\n  const navigate = useNavigate();\n  const { knowledgeId } = useGetKnowledgeSearchParams();\n\n  return useCallback(() => {\n    navigate(`/knowledge/${KnowledgeRouteKey.Dataset}?id=${knowledgeId}`);\n  }, [knowledgeId, navigate]);\n};\n","export const getOneNamespaceEffectsLoading = (\n  namespace: string,\n  effects: Record<string, boolean>,\n  effectNames: Array<string>,\n) => {\n  return effectNames.some(\n    (effectName) => effects[`${namespace}/${effectName}`],\n  );\n};\n\nexport const delay = (ms: number) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n","import { getOneNamespaceEffectsLoading } from '@/utils/storeUtil';\nimport { useSelector } from 'umi';\n\n// Get the loading status of given effects under a certain namespace\nexport const useOneNamespaceEffectsLoading = (\n  namespace: string,\n  effectNames: Array<string>,\n) => {\n  const effects = useSelector((state: any) => state.loading.effects);\n  return getOneNamespaceEffectsLoading(namespace, effects, effectNames);\n};\n","import { ITenantInfo } from '@/interfaces/database/knowledge';\nimport { ISystemStatus, IUserInfo } from '@/interfaces/database/userSetting';\nimport userService from '@/services/userService';\nimport authorizationUtil from '@/utils/authorizationUtil';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { history, useDispatch, useSelector } from 'umi';\n\nexport const useFetchUserInfo = () => {\n  const dispatch = useDispatch();\n  const fetchUserInfo = useCallback(() => {\n    dispatch({ type: 'settingModel/getUserInfo' });\n  }, [dispatch]);\n\n  useEffect(() => {\n    fetchUserInfo();\n  }, [fetchUserInfo]);\n};\n\nexport const useSelectUserInfo = () => {\n  const userInfo: IUserInfo = useSelector(\n    (state: any) => state.settingModel.userInfo,\n  );\n\n  return userInfo;\n};\n\nexport const useSelectTenantInfo = () => {\n  const tenantInfo: ITenantInfo = useSelector(\n    (state: any) => state.settingModel.tenantIfo,\n  );\n\n  return tenantInfo;\n};\n\nexport const useFetchTenantInfo = (isOnMountFetching: boolean = true) => {\n  const dispatch = useDispatch();\n\n  const fetchTenantInfo = useCallback(() => {\n    dispatch({\n      type: 'settingModel/getTenantInfo',\n    });\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (isOnMountFetching) {\n      fetchTenantInfo();\n    }\n  }, [fetchTenantInfo, isOnMountFetching]);\n\n  return fetchTenantInfo;\n};\n\nexport const useSelectParserList = (): Array<{\n  value: string;\n  label: string;\n}> => {\n  const tenantInfo: ITenantInfo = useSelectTenantInfo();\n\n  const parserList = useMemo(() => {\n    const parserArray: Array<string> = tenantInfo?.parser_ids.split(',') ?? [];\n    return parserArray.map((x) => {\n      const arr = x.split(':');\n      return { value: arr[0], label: arr[1] };\n    });\n  }, [tenantInfo]);\n\n  return parserList;\n};\n\nexport const useLogout = () => {\n  const dispatch = useDispatch(); // TODO: clear redux state\n\n  const logout = useCallback(async () => {\n    const retcode = await dispatch<any>({ type: 'loginModel/logout' });\n    if (retcode === 0) {\n      authorizationUtil.removeAll();\n      history.push('/login');\n    }\n  }, [dispatch]);\n\n  return logout;\n};\n\nexport const useSaveSetting = () => {\n  const dispatch = useDispatch();\n\n  const saveSetting = useCallback(\n    (userInfo: { new_password: string } | Partial<IUserInfo>): number => {\n      return dispatch<any>({ type: 'settingModel/setting', payload: userInfo });\n    },\n    [dispatch],\n  );\n\n  return saveSetting;\n};\n\nexport const useFetchSystemVersion = () => {\n  const [version, setVersion] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const fetchSystemVersion = useCallback(async () => {\n    setLoading(true);\n    const { data } = await userService.getSystemVersion();\n    if (data.retcode === 0) {\n      setVersion(data.data);\n      setLoading(false);\n    }\n  }, []);\n\n  return { fetchSystemVersion, version, loading };\n};\n\nexport const useFetchSystemStatus = () => {\n  const [systemStatus, setSystemStatus] = useState<ISystemStatus>(\n    {} as ISystemStatus,\n  );\n  const [loading, setLoading] = useState(false);\n\n  const fetchSystemStatus = useCallback(async () => {\n    setLoading(true);\n    const { data } = await userService.getSystemStatus();\n    if (data.retcode === 0) {\n      setSystemStatus(data.data);\n      setLoading(false);\n    }\n  }, []);\n\n  return {\n    systemStatus,\n    fetchSystemStatus,\n    loading,\n  };\n};\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgChatAppCube = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 15, height: 14, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"path\", { d: \"m6.188 12.104.859.478c.165.092.248.138.335.156a.581.581 0 0 0 .236 0c.087-.018.17-.064.335-.156l.86-.478m-5.25-1.458-.833-.462c-.175-.097-.262-.146-.326-.215a.583.583 0 0 1-.125-.212c-.029-.09-.029-.19-.029-.39V8.46m0-2.917v-.91c0-.199 0-.299.03-.388a.583.583 0 0 1 .124-.212c.064-.07.151-.118.326-.215l.833-.463m2.624-1.458.86-.477c.165-.092.248-.138.335-.156a.583.583 0 0 1 .236 0c.087.018.17.064.335.156l.86.477m2.624 1.458.833.463c.175.097.262.146.326.215a.584.584 0 0 1 .125.212c.029.089.029.189.029.389v.909m0 2.917v.909c0 .2 0 .3-.03.389a.584.584 0 0 1-.124.212c-.064.07-.151.118-.326.215l-.832.462m-5.25-4.375 1.312.73m0 0 1.313-.73m-1.313.73v1.458M2.25 4.084l1.313.729m7.874 0 1.313-.73M7.5 11.376v1.459\", stroke: \"#A5A3A9\", strokeWidth: 1.5, strokeLinecap: \"round\", strokeLinejoin: \"round\" }));\nexport { SvgChatAppCube as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYuMTg4IDEyLjEwNC44NTkuNDc4Yy4xNjUuMDkyLjI0OC4xMzguMzM1LjE1NmEuNTgxLjU4MSAwIDAgMCAuMjM2IDBjLjA4Ny0uMDE4LjE3LS4wNjQuMzM1LS4xNTZsLjg2LS40NzhtLTUuMjUtMS40NTgtLjgzMy0uNDYyYy0uMTc1LS4wOTctLjI2Mi0uMTQ2LS4zMjYtLjIxNWEuNTgzLjU4MyAwIDAgMS0uMTI1LS4yMTJjLS4wMjktLjA5LS4wMjktLjE5LS4wMjktLjM5VjguNDZtMC0yLjkxN3YtLjkxYzAtLjE5OSAwLS4yOTkuMDMtLjM4OGEuNTgzLjU4MyAwIDAgMSAuMTI0LS4yMTJjLjA2NC0uMDcuMTUxLS4xMTguMzI2LS4yMTVsLjgzMy0uNDYzbTIuNjI0LTEuNDU4Ljg2LS40NzdjLjE2NS0uMDkyLjI0OC0uMTM4LjMzNS0uMTU2YS41ODMuNTgzIDAgMCAxIC4yMzYgMGMuMDg3LjAxOC4xNy4wNjQuMzM1LjE1NmwuODYuNDc3bTIuNjI0IDEuNDU4LjgzMy40NjNjLjE3NS4wOTcuMjYyLjE0Ni4zMjYuMjE1YS41ODQuNTg0IDAgMCAxIC4xMjUuMjEyYy4wMjkuMDg5LjAyOS4xODkuMDI5LjM4OXYuOTA5bTAgMi45MTd2LjkwOWMwIC4yIDAgLjMtLjAzLjM4OWEuNTg0LjU4NCAwIDAgMS0uMTI0LjIxMmMtLjA2NC4wNy0uMTUxLjExOC0uMzI2LjIxNWwtLjgzMi40NjJtLTUuMjUtNC4zNzUgMS4zMTIuNzNtMCAwIDEuMzEzLS43M20tMS4zMTMuNzN2MS40NThNMi4yNSA0LjA4NGwxLjMxMy43MjltNy44NzQgMCAxLjMxMy0uNzNNNy41IDExLjM3NnYxLjQ1OSIgc3Ryb2tlPSIjQTVBM0E5IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+\";\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgChatConfigurationAtom = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 52, height: 52, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"g\", { filter: \"url(#chat-configuration-atom_svg__a)\" }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M2.5 11A9.5 9.5 0 0 1 12 1.5h28a9.5 9.5 0 0 1 9.5 9.5v28a9.5 9.5 0 0 1-9.5 9.5H12A9.5 9.5 0 0 1 2.5 39V11Z\", stroke: \"#EAECF0\", shapeRendering: \"crispEdges\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M26 25h.01m3.525 3.535c-4.686 4.686-10.068 6.903-12.02 4.95-1.953-1.953.263-7.335 4.949-12.02 4.686-4.687 10.068-6.903 12.02-4.95 1.953 1.952-.263 7.334-4.949 12.02Zm0-7.071c4.686 4.686 6.902 10.068 4.95 12.02-1.953 1.953-7.335-.263-12.021-4.949-4.686-4.686-6.902-10.068-4.95-12.02 1.953-1.953 7.335.263 12.021 4.949ZM26.5 25a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z\", stroke: \"#344054\", strokeWidth: 2, strokeLinecap: \"round\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"filter\", { id: \"chat-configuration-atom_svg__a\", x: 0, y: 0, width: 52, height: 52, filterUnits: \"userSpaceOnUse\", colorInterpolationFilters: \"sRGB\" }, /* @__PURE__ */ React.createElement(\"feFlood\", { floodOpacity: 0, result: \"BackgroundImageFix\" }), /* @__PURE__ */ React.createElement(\"feColorMatrix\", { in: \"SourceAlpha\", values: \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\", result: \"hardAlpha\" }), /* @__PURE__ */ React.createElement(\"feOffset\", { dy: 1 }), /* @__PURE__ */ React.createElement(\"feGaussianBlur\", { stdDeviation: 1 }), /* @__PURE__ */ React.createElement(\"feComposite\", { in2: \"hardAlpha\", operator: \"out\" }), /* @__PURE__ */ React.createElement(\"feColorMatrix\", { values: \"0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.05 0\" }), /* @__PURE__ */ React.createElement(\"feBlend\", { in2: \"BackgroundImageFix\", result: \"effect1_dropShadow_550_8026\" }), /* @__PURE__ */ React.createElement(\"feBlend\", { in: \"SourceGraphic\", in2: \"effect1_dropShadow_550_8026\", result: \"shape\" }))));\nexport { SvgChatConfigurationAtom as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsdGVyPSJ1cmwoI2EpIj48cGF0aCBkPSJNMi41IDExQTkuNSA5LjUgMCAwIDEgMTIgMS41aDI4YTkuNSA5LjUgMCAwIDEgOS41IDkuNXYyOGE5LjUgOS41IDAgMCAxLTkuNSA5LjVIMTJBOS41IDkuNSAwIDAgMSAyLjUgMzlWMTFaIiBzdHJva2U9IiNFQUVDRjAiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwYXRoIGQ9Ik0yNiAyNWguMDFtMy41MjUgMy41MzVjLTQuNjg2IDQuNjg2LTEwLjA2OCA2LjkwMy0xMi4wMiA0Ljk1LTEuOTUzLTEuOTUzLjI2My03LjMzNSA0Ljk0OS0xMi4wMiA0LjY4Ni00LjY4NyAxMC4wNjgtNi45MDMgMTIuMDItNC45NSAxLjk1MyAxLjk1Mi0uMjYzIDcuMzM0LTQuOTQ5IDEyLjAyWm0wLTcuMDcxYzQuNjg2IDQuNjg2IDYuOTAyIDEwLjA2OCA0Ljk1IDEyLjAyLTEuOTUzIDEuOTUzLTcuMzM1LS4yNjMtMTIuMDIxLTQuOTQ5LTQuNjg2LTQuNjg2LTYuOTAyLTEwLjA2OC00Ljk1LTEyLjAyIDEuOTUzLTEuOTUzIDcuMzM1LjI2MyAxMi4wMjEgNC45NDlaTTI2LjUgMjVhLjUuNSAwIDEgMS0xIDAgLjUuNSAwIDAgMSAxIDBaIiBzdHJva2U9IiMzNDQwNTQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9nPjxkZWZzPjxmaWx0ZXIgaWQ9ImEiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSI1MiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPjxmZU9mZnNldCBkeT0iMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiLz48ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz48ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC4wNjI3NDUxIDAgMCAwIDAgMC4wOTQxMTc2IDAgMCAwIDAgMC4xNTY4NjMgMCAwIDAgMC4wNSAwIi8+PGZlQmxlbmQgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzU1MF84MDI2Ii8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzU1MF84MDI2IiByZXN1bHQ9InNoYXBlIi8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPg==\";\n","// extracted by mini-css-extract-plugin\nexport default {\"chatConfigurationDescription\":\"chatConfigurationDescription___Marto\",\"variableContainer\":\"variableContainer___Y8OCn\",\"variableAlign\":\"variableAlign___V0wtR\",\"variableLabel\":\"variableLabel___lux8o\",\"variableIcon\":\"variableIcon___aAfD2\",\"variableTable\":\"variableTable___q3ddB\",\"editableRow\":\"editableRow____LyFZ\",\"segmentedHidden\":\"segmentedHidden___jWNN7\",\"sliderInputNumber\":\"sliderInputNumber___cS3d6\",\"variableSlider\":\"variableSlider___l0sWn\"};","import { useFetchKnowledgeList } from '@/hooks/knowledgeHook';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { Form, Input, Select, Switch, Upload } from 'antd';\nimport classNames from 'classnames';\nimport { ISegmentedContentProps } from '../interface';\n\nimport { useTranslate } from '@/hooks/commonHooks';\nimport styles from './index.less';\n\nconst AssistantSetting = ({ show }: ISegmentedContentProps) => {\n  const { list: knowledgeList } = useFetchKnowledgeList(true);\n  const knowledgeOptions = knowledgeList.map((x) => ({\n    label: x.name,\n    value: x.id,\n  }));\n  const { t } = useTranslate('chat');\n\n  const normFile = (e: any) => {\n    if (Array.isArray(e)) {\n      return e;\n    }\n    return e?.fileList;\n  };\n\n  const uploadButtion = (\n    <button style={{ border: 0, background: 'none' }} type=\"button\">\n            <PlusOutlined />\n            <div style={{ marginTop: 8 }}>\n              {t('upload', { keyPrefix: 'common' })}\n            </div>\n          </button>\n  )\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      <Form.Item\n        name={'name'}\n        label={t('assistantName')}\n        rules={[{ required: true, message: t('assistantNameMessage') }]}\n      >\n        <Input placeholder={t('namePlaceholder')} />\n      </Form.Item>\n      <Form.Item\n        name=\"icon\"\n        label={t('assistantAvatar')}\n        valuePropName=\"fileList\"\n        getValueFromEvent={normFile}\n      >\n        <Upload\n          listType=\"picture-card\"\n          maxCount={1}\n          showUploadList={{ showPreviewIcon: false, showRemoveIcon: false }}\n        >\n          {show ? uploadButtion : null}\n        </Upload>\n      </Form.Item>\n      <Form.Item\n        name={'language'}\n        label={t('language')}\n        initialValue={'English'}\n        tooltip=\"coming soon\"\n        style={{ display: 'none' }}\n      >\n        <Select\n          options={[\n            { value: 'Chinese', label: t('chinese', { keyPrefix: 'common' }) },\n            { value: 'English', label: t('english', { keyPrefix: 'common' }) },\n          ]}\n        />\n      </Form.Item>\n      <Form.Item\n        name={['prompt_config', 'empty_response']}\n        label={t('emptyResponse')}\n        tooltip={t('emptyResponseTip')}\n      >\n        <Input placeholder=\"\" />\n      </Form.Item>\n      <Form.Item\n        name={['prompt_config', 'prologue']}\n        label={t('setAnOpener')}\n        tooltip={t('setAnOpenerTip')}\n        initialValue={t('setAnOpenerInitial')}\n      >\n        <Input.TextArea autoSize={{ minRows: 5 }} />\n      </Form.Item>\n      <Form.Item\n        label={t('quote')}\n        valuePropName=\"checked\"\n        name={['prompt_config', 'quote']}\n        tooltip={t('quoteTip')}\n        initialValue={true}\n      >\n        <Switch />\n      </Form.Item>\n      <Form.Item\n        label={t('knowledgeBases')}\n        name=\"kb_ids\"\n        tooltip={t('knowledgeBasesTip')}\n        rules={[\n          {\n            required: true,\n            message: t('knowledgeBasesMessage'),\n            type: 'array',\n          },\n        ]}\n      >\n        <Select\n          mode=\"multiple\"\n          options={knowledgeOptions}\n          placeholder={t('knowledgeBasesMessage')}\n        ></Select>\n      </Form.Item>\n    </section>\n  );\n};\n\nexport default AssistantSetting;\n","import { useFetchLlmList } from '@/hooks/llmHooks';\nimport {\n  useFetchTenantInfo,\n  useSelectTenantInfo,\n} from '@/hooks/userSettingHook';\nimport { useEffect } from 'react';\n\nexport const useFetchModelId = (visible: boolean) => {\n  const fetchTenantInfo = useFetchTenantInfo(false);\n  const tenantInfo = useSelectTenantInfo();\n\n  useEffect(() => {\n    if (visible) {\n      fetchTenantInfo();\n    }\n  }, [visible, fetchTenantInfo]);\n\n  return tenantInfo?.llm_id ?? '';\n};\n\nexport const useFetchLlmModelOnVisible = (visible: boolean) => {\n  const fetchLlmList = useFetchLlmList();\n\n  useEffect(() => {\n    if (visible) {\n      fetchLlmList();\n    }\n  }, [fetchLlmList, visible]);\n};\n","import {\n  LlmModelType,\n  ModelVariableType,\n  settledModelVariableMap,\n} from '@/constants/knowledge';\nimport { Divider, Flex, Form, InputNumber, Select, Slider, Switch } from 'antd';\nimport classNames from 'classnames';\nimport camelCase from 'lodash/camelCase';\nimport { useEffect } from 'react';\nimport { ISegmentedContentProps } from '../interface';\n\nimport { useTranslate } from '@/hooks/commonHooks';\nimport { useSelectLlmOptionsByModelType } from '@/hooks/llmHooks';\nimport { Variable } from '@/interfaces/database/chat';\nimport { variableEnabledFieldMap } from '../constants';\nimport styles from './index.less';\n\nconst ModelSetting = ({\n  show,\n  form,\n  initialLlmSetting,\n  visible,\n}: ISegmentedContentProps & {\n  initialLlmSetting?: Variable;\n  visible?: boolean;\n}) => {\n  const { t } = useTranslate('chat');\n  const parameterOptions = Object.values(ModelVariableType).map((x) => ({\n    label: t(camelCase(x)),\n    value: x,\n  }));\n\n  const modelOptions = useSelectLlmOptionsByModelType();\n\n  const handleParametersChange = (value: ModelVariableType) => {\n    const variable = settledModelVariableMap[value];\n    form.setFieldsValue({ llm_setting: variable });\n  };\n\n  useEffect(() => {\n    if (visible) {\n      const values = Object.keys(variableEnabledFieldMap).reduce<\n        Record<string, boolean>\n      >((pre, field) => {\n        pre[field] =\n          initialLlmSetting === undefined\n            ? true\n            : !!initialLlmSetting[\n                variableEnabledFieldMap[\n                  field as keyof typeof variableEnabledFieldMap\n                ] as keyof Variable\n              ];\n        return pre;\n      }, {});\n      form.setFieldsValue(values);\n    }\n  }, [form, initialLlmSetting, visible]);\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      <Form.Item\n        label={t('model')}\n        name=\"llm_id\"\n        tooltip={t('modelTip')}\n        rules={[{ required: true, message: t('modelMessage') }]}\n      >\n        <Select options={modelOptions[LlmModelType.Chat]} showSearch />\n      </Form.Item>\n      <Divider></Divider>\n      <Form.Item\n        label={t('freedom')}\n        name=\"parameters\"\n        tooltip={t('freedomTip')}\n        initialValue={ModelVariableType.Precise}\n      >\n        <Select<ModelVariableType>\n          options={parameterOptions}\n          onChange={handleParametersChange}\n        />\n      </Form.Item>\n      <Form.Item label={t('temperature')} tooltip={t('temperatureTip')}>\n        <Flex gap={20} align=\"center\">\n          <Form.Item\n            name={'temperatureEnabled'}\n            valuePropName=\"checked\"\n            noStyle\n          >\n            <Switch size=\"small\" />\n          </Form.Item>\n          <Form.Item noStyle dependencies={['temperatureEnabled']}>\n            {({ getFieldValue }) => {\n              const disabled = !getFieldValue('temperatureEnabled');\n              return (\n                <>\n                  <Flex flex={1}>\n                    <Form.Item name={['llm_setting', 'temperature']} noStyle>\n                      <Slider\n                        className={styles.variableSlider}\n                        max={1}\n                        step={0.01}\n                        disabled={disabled}\n                      />\n                    </Form.Item>\n                  </Flex>\n                  <Form.Item name={['llm_setting', 'temperature']} noStyle>\n                    <InputNumber\n                      className={styles.sliderInputNumber}\n                      max={1}\n                      min={0}\n                      step={0.01}\n                      disabled={disabled}\n                    />\n                  </Form.Item>\n                </>\n              );\n            }}\n          </Form.Item>\n        </Flex>\n      </Form.Item>\n      <Form.Item label={t('topP')} tooltip={t('topPTip')}>\n        <Flex gap={20} align=\"center\">\n          <Form.Item name={'topPEnabled'} valuePropName=\"checked\" noStyle>\n            <Switch size=\"small\" />\n          </Form.Item>\n          <Form.Item noStyle dependencies={['topPEnabled']}>\n            {({ getFieldValue }) => {\n              const disabled = !getFieldValue('topPEnabled');\n              return (\n                <>\n                  <Flex flex={1}>\n                    <Form.Item name={['llm_setting', 'top_p']} noStyle>\n                      <Slider\n                        className={styles.variableSlider}\n                        max={1}\n                        step={0.01}\n                        disabled={disabled}\n                      />\n                    </Form.Item>\n                  </Flex>\n                  <Form.Item name={['llm_setting', 'top_p']} noStyle>\n                    <InputNumber\n                      className={styles.sliderInputNumber}\n                      max={1}\n                      min={0}\n                      step={0.01}\n                      disabled={disabled}\n                    />\n                  </Form.Item>\n                </>\n              );\n            }}\n          </Form.Item>\n        </Flex>\n      </Form.Item>\n      <Form.Item label={t('presencePenalty')} tooltip={t('presencePenaltyTip')}>\n        <Flex gap={20} align=\"center\">\n          <Form.Item\n            name={'presencePenaltyEnabled'}\n            valuePropName=\"checked\"\n            noStyle\n          >\n            <Switch size=\"small\" />\n          </Form.Item>\n          <Form.Item noStyle dependencies={['presencePenaltyEnabled']}>\n            {({ getFieldValue }) => {\n              const disabled = !getFieldValue('presencePenaltyEnabled');\n              return (\n                <>\n                  <Flex flex={1}>\n                    <Form.Item\n                      name={['llm_setting', 'presence_penalty']}\n                      noStyle\n                    >\n                      <Slider\n                        className={styles.variableSlider}\n                        max={1}\n                        step={0.01}\n                        disabled={disabled}\n                      />\n                    </Form.Item>\n                  </Flex>\n                  <Form.Item name={['llm_setting', 'presence_penalty']} noStyle>\n                    <InputNumber\n                      className={styles.sliderInputNumber}\n                      max={1}\n                      min={0}\n                      step={0.01}\n                      disabled={disabled}\n                    />\n                  </Form.Item>\n                </>\n              );\n            }}\n          </Form.Item>\n        </Flex>\n      </Form.Item>\n      <Form.Item\n        label={t('frequencyPenalty')}\n        tooltip={t('frequencyPenaltyTip')}\n      >\n        <Flex gap={20} align=\"center\">\n          <Form.Item\n            name={'frequencyPenaltyEnabled'}\n            valuePropName=\"checked\"\n            noStyle\n          >\n            <Switch size=\"small\" />\n          </Form.Item>\n          <Form.Item noStyle dependencies={['frequencyPenaltyEnabled']}>\n            {({ getFieldValue }) => {\n              const disabled = !getFieldValue('frequencyPenaltyEnabled');\n              return (\n                <>\n                  <Flex flex={1}>\n                    <Form.Item\n                      name={['llm_setting', 'frequency_penalty']}\n                      noStyle\n                    >\n                      <Slider\n                        className={styles.variableSlider}\n                        max={1}\n                        step={0.01}\n                        disabled={disabled}\n                      />\n                    </Form.Item>\n                  </Flex>\n                  <Form.Item\n                    name={['llm_setting', 'frequency_penalty']}\n                    noStyle\n                  >\n                    <InputNumber\n                      className={styles.sliderInputNumber}\n                      max={1}\n                      min={0}\n                      step={0.01}\n                      disabled={disabled}\n                    />\n                  </Form.Item>\n                </>\n              );\n            }}\n          </Form.Item>\n        </Flex>\n      </Form.Item>\n      <Form.Item label={t('maxTokens')} tooltip={t('maxTokensTip')}>\n        <Flex gap={20} align=\"center\">\n          <Form.Item name={'maxTokensEnabled'} valuePropName=\"checked\" noStyle>\n            <Switch size=\"small\" />\n          </Form.Item>\n          <Form.Item noStyle dependencies={['maxTokensEnabled']}>\n            {({ getFieldValue }) => {\n              const disabled = !getFieldValue('maxTokensEnabled');\n\n              return (\n                <>\n                  <Flex flex={1}>\n                    <Form.Item name={['llm_setting', 'max_tokens']} noStyle>\n                      <Slider\n                        className={styles.variableSlider}\n                        max={2048}\n                        disabled={disabled}\n                      />\n                    </Form.Item>\n                  </Flex>\n                  <Form.Item name={['llm_setting', 'max_tokens']} noStyle>\n                    <InputNumber\n                      disabled={disabled}\n                      className={styles.sliderInputNumber}\n                      max={2048}\n                      min={0}\n                    />\n                  </Form.Item>\n                </>\n              );\n            }}\n          </Form.Item>\n        </Flex>\n      </Form.Item>\n    </section>\n  );\n};\n\nexport default ModelSetting;\n","import { Form, FormInstance, Input, InputRef } from 'antd';\nimport React, { useContext, useEffect, useRef, useState } from 'react';\n\nconst EditableContext = React.createContext<FormInstance<any> | null>(null);\n\ninterface EditableRowProps {\n  index: number;\n}\n\ninterface Item {\n  key: string;\n  name: string;\n  age: string;\n  address: string;\n}\n\nexport const EditableRow: React.FC<EditableRowProps> = ({\n  index,\n  ...props\n}) => {\n  const [form] = Form.useForm();\n  return (\n    <Form form={form} component={false}>\n      <EditableContext.Provider value={form}>\n        <tr {...props} />\n      </EditableContext.Provider>\n    </Form>\n  );\n};\n\ninterface EditableCellProps {\n  title: React.ReactNode;\n  editable: boolean;\n  children: React.ReactNode;\n  dataIndex: keyof Item;\n  record: Item;\n  handleSave: (record: Item) => void;\n}\n\nexport const EditableCell: React.FC<EditableCellProps> = ({\n  title,\n  editable,\n  children,\n  dataIndex,\n  record,\n  handleSave,\n  ...restProps\n}) => {\n  const [editing, setEditing] = useState(false);\n  const inputRef = useRef<InputRef>(null);\n  const form = useContext(EditableContext)!;\n\n  useEffect(() => {\n    if (editing) {\n      inputRef.current!.focus();\n    }\n  }, [editing]);\n\n  const toggleEdit = () => {\n    setEditing(!editing);\n    form.setFieldsValue({ [dataIndex]: record[dataIndex] });\n  };\n\n  const save = async () => {\n    try {\n      const values = await form.validateFields();\n\n      toggleEdit();\n      handleSave({ ...record, ...values });\n    } catch (errInfo) {\n      console.log('Save failed:', errInfo);\n    }\n  };\n\n  let childNode = children;\n\n  if (editable) {\n    childNode = editing ? (\n      <Form.Item\n        style={{ margin: 0 }}\n        name={dataIndex}\n        rules={[\n          {\n            required: true,\n            message: `${title} is required.`,\n          },\n        ]}\n      >\n        <Input ref={inputRef} onPressEnter={save} onBlur={save} />\n      </Form.Item>\n    ) : (\n      <div\n        className=\"editable-cell-value-wrap\"\n        style={{ paddingRight: 24 }}\n        onClick={toggleEdit}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  return <td {...restProps}>{childNode}</td>;\n};\n","import SimilaritySlider from '@/components/similarity-slider';\nimport { DeleteOutlined, QuestionCircleOutlined } from '@ant-design/icons';\nimport {\n  Button,\n  Col,\n  Divider,\n  Form,\n  Input,\n  Row,\n  Slider,\n  Switch,\n  Table,\n  TableProps,\n  Tooltip,\n} from 'antd';\nimport classNames from 'classnames';\nimport {\n  ForwardedRef,\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from 'react';\nimport { v4 as uuid } from 'uuid';\nimport {\n  VariableTableDataType as DataType,\n  IPromptConfigParameters,\n  ISegmentedContentProps,\n} from '../interface';\nimport { EditableCell, EditableRow } from './editable-cell';\n\nimport Rerank from '@/components/rerank';\nimport { useTranslate } from '@/hooks/commonHooks';\nimport { useSelectPromptConfigParameters } from '../hooks';\nimport styles from './index.less';\n\ntype FieldType = {\n  similarity_threshold?: number;\n  vector_similarity_weight?: number;\n  top_n?: number;\n};\n\nconst PromptEngine = (\n  { show }: ISegmentedContentProps,\n  ref: ForwardedRef<Array<IPromptConfigParameters>>,\n) => {\n  const [dataSource, setDataSource] = useState<DataType[]>([]);\n  const parameters = useSelectPromptConfigParameters();\n  const { t } = useTranslate('chat');\n\n  const components = {\n    body: {\n      row: EditableRow,\n      cell: EditableCell,\n    },\n  };\n\n  const handleRemove = (key: string) => () => {\n    const newData = dataSource.filter((item) => item.key !== key);\n    setDataSource(newData);\n  };\n\n  const handleSave = (row: DataType) => {\n    const newData = [...dataSource];\n    const index = newData.findIndex((item) => row.key === item.key);\n    const item = newData[index];\n    newData.splice(index, 1, {\n      ...item,\n      ...row,\n    });\n    setDataSource(newData);\n  };\n\n  const handleAdd = () => {\n    setDataSource((state) => [\n      ...state,\n      {\n        key: uuid(),\n        variable: '',\n        optional: true,\n      },\n    ]);\n  };\n\n  const handleOptionalChange = (row: DataType) => (checked: boolean) => {\n    const newData = [...dataSource];\n    const index = newData.findIndex((item) => row.key === item.key);\n    const item = newData[index];\n    newData.splice(index, 1, {\n      ...item,\n      optional: checked,\n    });\n    setDataSource(newData);\n  };\n\n  useImperativeHandle(\n    ref,\n    () => {\n      return dataSource\n        .filter((x) => x.variable.trim() !== '')\n        .map((x) => ({ key: x.variable, optional: x.optional }));\n    },\n    [dataSource],\n  );\n\n  const columns: TableProps<DataType>['columns'] = [\n    {\n      title: t('key'),\n      dataIndex: 'variable',\n      key: 'variable',\n      onCell: (record: DataType) => ({\n        record,\n        editable: true,\n        dataIndex: 'variable',\n        title: 'key',\n        handleSave,\n      }),\n    },\n    {\n      title: t('optional'),\n      dataIndex: 'optional',\n      key: 'optional',\n      width: 40,\n      align: 'center',\n      render(text, record) {\n        return (\n          <Switch\n            size=\"small\"\n            checked={text}\n            onChange={handleOptionalChange(record)}\n          />\n        );\n      },\n    },\n    {\n      title: t('operation'),\n      dataIndex: 'operation',\n      width: 30,\n      key: 'operation',\n      align: 'center',\n      render(_, record) {\n        return <DeleteOutlined onClick={handleRemove(record.key)} />;\n      },\n    },\n  ];\n\n  useEffect(() => {\n    setDataSource(parameters);\n  }, [parameters]);\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      <Form.Item\n        label={t('system')}\n        rules={[{ required: true, message: t('systemMessage') }]}\n        tooltip={t('systemTip')}\n        name={['prompt_config', 'system']}\n        initialValue={t('systemInitialValue')}\n      >\n        <Input.TextArea autoSize={{ maxRows: 8, minRows: 5 }} />\n      </Form.Item>\n      <Divider></Divider>\n      <SimilaritySlider isTooltipShown></SimilaritySlider>\n      <Form.Item<FieldType>\n        label={t('topN')}\n        name={'top_n'}\n        initialValue={8}\n        tooltip={t('topNTip')}\n      >\n        <Slider max={30} />\n      </Form.Item>\n      <Rerank></Rerank>\n      <section className={classNames(styles.variableContainer)}>\n        <Row align={'middle'} justify=\"end\">\n          <Col span={9} className={styles.variableAlign}>\n            <label className={styles.variableLabel}>\n              {t('variable')}\n              <Tooltip title={t('variableTip')}>\n                <QuestionCircleOutlined className={styles.variableIcon} />\n              </Tooltip>\n            </label>\n          </Col>\n          <Col span={15} className={styles.variableAlign}>\n            <Button size=\"small\" onClick={handleAdd}>\n              {t('add')}\n            </Button>\n          </Col>\n        </Row>\n        {dataSource.length > 0 && (\n          <Row>\n            <Col span={7}> </Col>\n            <Col span={17}>\n              <Table\n                dataSource={dataSource}\n                columns={columns}\n                rowKey={'key'}\n                className={styles.variableTable}\n                components={components}\n                rowClassName={() => styles.editableRow}\n              />\n            </Col>\n          </Row>\n        )}\n      </section>\n    </section>\n  );\n};\n\nexport default forwardRef(PromptEngine);\n","import { ReactComponent as ChatConfigurationAtom } from '@/assets/svg/chat-configuration-atom.svg';\nimport { IModalManagerChildrenProps } from '@/components/modal-manager';\nimport {\n  ModelVariableType,\n  settledModelVariableMap,\n} from '@/constants/knowledge';\nimport { IDialog } from '@/interfaces/database/chat';\nimport { Divider, Flex, Form, Modal, Segmented, UploadFile } from 'antd';\nimport { SegmentedValue } from 'antd/es/segmented';\nimport camelCase from 'lodash/camelCase';\nimport omit from 'lodash/omit';\nimport { useEffect, useRef, useState } from 'react';\nimport { variableEnabledFieldMap } from '../constants';\nimport { IPromptConfigParameters } from '../interface';\nimport { excludeUnEnabledVariables } from '../utils';\nimport AssistantSetting from './assistant-setting';\nimport { useFetchLlmModelOnVisible, useFetchModelId } from './hooks';\nimport ModelSetting from './model-setting';\nimport PromptEngine from './prompt-engine';\n\nimport { useTranslate } from '@/hooks/commonHooks';\nimport styles from './index.less';\n\nconst layout = {\n  labelCol: { span: 9 },\n  wrapperCol: { span: 15 },\n};\n\nconst validateMessages = {\n  required: '${label} is required!',\n  types: {\n    email: '${label} is not a valid email!',\n    number: '${label} is not a valid number!',\n  },\n  number: {\n    range: '${label} must be between ${min} and ${max}',\n  },\n};\n\nenum ConfigurationSegmented {\n  AssistantSetting = 'Assistant Setting',\n  PromptEngine = 'Prompt Engine',\n  ModelSetting = 'Model Setting',\n}\n\nconst segmentedMap = {\n  [ConfigurationSegmented.AssistantSetting]: AssistantSetting,\n  [ConfigurationSegmented.ModelSetting]: ModelSetting,\n  [ConfigurationSegmented.PromptEngine]: PromptEngine,\n};\n\ninterface IProps extends IModalManagerChildrenProps {\n  initialDialog: IDialog;\n  loading: boolean;\n  onOk: (dialog: IDialog) => void;\n  clearDialog: () => void;\n}\n\nconst ChatConfigurationModal = ({\n  visible,\n  hideModal,\n  initialDialog,\n  loading,\n  onOk,\n  clearDialog,\n}: IProps) => {\n  const [form] = Form.useForm();\n\n  const [value, setValue] = useState<ConfigurationSegmented>(\n    ConfigurationSegmented.AssistantSetting,\n  );\n  const promptEngineRef = useRef<Array<IPromptConfigParameters>>([]);\n  const modelId = useFetchModelId(visible);\n  const { t } = useTranslate('chat');\n\n  const handleOk = async () => {\n    const values = await form.validateFields();\n    const nextValues: any = omit(values, [\n      ...Object.keys(variableEnabledFieldMap),\n      'parameters',\n      ...excludeUnEnabledVariables(values),\n    ]);\n    const emptyResponse = nextValues.prompt_config?.empty_response ?? '';\n\n    const fileList = values.icon;\n    let icon;\n\n    if (Array.isArray(fileList) && fileList.length > 0) {\n      icon = fileList[0].thumbUrl;\n    }\n\n    const finalValues = {\n      dialog_id: initialDialog.id,\n      ...nextValues,\n      vector_similarity_weight: 1 - nextValues.vector_similarity_weight,\n      prompt_config: {\n        ...nextValues.prompt_config,\n        parameters: promptEngineRef.current,\n        empty_response: emptyResponse,\n      },\n      icon,\n    };\n    onOk(finalValues);\n  };\n\n  const handleCancel = () => {\n    hideModal();\n  };\n\n  const handleSegmentedChange = (val: SegmentedValue) => {\n    setValue(val as ConfigurationSegmented);\n  };\n\n  const handleModalAfterClose = () => {\n    clearDialog();\n    form.resetFields();\n  };\n\n  useFetchLlmModelOnVisible(visible);\n\n  const title = (\n    <Flex gap={16}>\n      <ChatConfigurationAtom></ChatConfigurationAtom>\n      <div>\n        <b>{t('chatConfiguration')}</b>\n        <div className={styles.chatConfigurationDescription}>\n          {t('chatConfigurationDescription')}\n        </div>\n      </div>\n    </Flex>\n  );\n\n  useEffect(() => {\n    if (visible) {\n      const icon = initialDialog.icon;\n      let fileList: UploadFile[] = [];\n\n      if (icon) {\n        fileList = [{ uid: '1', name: 'file', thumbUrl: icon, status: 'done' }];\n      }\n      form.setFieldsValue({\n        ...initialDialog,\n        llm_setting:\n          initialDialog.llm_setting ??\n          settledModelVariableMap[ModelVariableType.Precise],\n        icon: fileList,\n        llm_id: initialDialog.llm_id ?? modelId,\n        vector_similarity_weight:\n          1 - (initialDialog.vector_similarity_weight ?? 0.3),\n      });\n    }\n  }, [initialDialog, form, visible, modelId]);\n\n  return (\n    <Modal\n      title={title}\n      width={688}\n      open={visible}\n      onOk={handleOk}\n      onCancel={handleCancel}\n      confirmLoading={loading}\n      destroyOnClose\n      afterClose={handleModalAfterClose}\n    >\n      <Segmented\n        size={'large'}\n        value={value}\n        onChange={handleSegmentedChange}\n        options={Object.values(ConfigurationSegmented).map((x) => ({\n          label: t(camelCase(x)),\n          value: x,\n        }))}\n        block\n      />\n      <Divider></Divider>\n      <Form\n        {...layout}\n        name=\"nest-messages\"\n        form={form}\n        style={{ maxWidth: 600 }}\n        validateMessages={validateMessages}\n        colon={false}\n      >\n        {Object.entries(segmentedMap).map(([key, Element]) => (\n          <Element\n            key={key}\n            show={key === value}\n            form={form}\n            {...(key === ConfigurationSegmented.ModelSetting\n              ? { initialLlmSetting: initialDialog.llm_setting, visible }\n              : {})}\n            {...(key === ConfigurationSegmented.PromptEngine\n              ? { ref: promptEngineRef }\n              : {})}\n          ></Element>\n        ))}\n      </Form>\n    </Modal>\n  );\n};\n\nexport default ChatConfigurationModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"documentContainer\":\"documentContainer___kWzt7\"};","import {\n  useGetChunkHighlights,\n  useGetDocumentUrl,\n} from '@/hooks/documentHooks';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { Skeleton } from 'antd';\nimport { useEffect, useRef, useState } from 'react';\nimport {\n  AreaHighlight,\n  Highlight,\n  IHighlight,\n  PdfHighlighter,\n  PdfLoader,\n  Popup,\n} from 'react-pdf-highlighter';\n\nimport FileError from '@/pages/document-viewer/file-error';\nimport { useCatchDocumentError } from './hooks';\nimport styles from './index.less';\n\ninterface IProps {\n  chunk: IChunk;\n  documentId: string;\n  visible: boolean;\n}\n\nconst HighlightPopup = ({\n  comment,\n}: {\n  comment: { text: string; emoji: string };\n}) =>\n  comment.text ? (\n    <div className=\"Highlight__popup\">\n      {comment.emoji} {comment.text}\n    </div>\n  ) : null;\n\nconst DocumentPreviewer = ({ chunk, documentId, visible }: IProps) => {\n  const getDocumentUrl = useGetDocumentUrl(documentId);\n  const { highlights: state, setWidthAndHeight } = useGetChunkHighlights(chunk);\n  const ref = useRef<(highlight: IHighlight) => void>(() => {});\n  const [loaded, setLoaded] = useState(false);\n  const url = getDocumentUrl();\n  const error = useCatchDocumentError(url);\n\n  const resetHash = () => {};\n\n  useEffect(() => {\n    setLoaded(visible);\n  }, [visible]);\n\n  useEffect(() => {\n    if (state.length > 0 && loaded) {\n      setLoaded(false);\n      ref.current(state[0]);\n    }\n  }, [state, loaded]);\n\n  return (\n    <div className={styles.documentContainer}>\n      <PdfLoader\n        url={url}\n        beforeLoad={<Skeleton active />}\n        workerSrc=\"/pdfjs-dist/pdf.worker.min.js\"\n        errorMessage={<FileError>{error}</FileError>}\n      >\n        {(pdfDocument) => {\n          pdfDocument.getPage(1).then((page) => {\n            const viewport = page.getViewport({ scale: 1 });\n            const width = viewport.width;\n            const height = viewport.height;\n            setWidthAndHeight(width, height);\n          });\n\n          return (\n            <PdfHighlighter\n              pdfDocument={pdfDocument}\n              enableAreaSelection={(event) => event.altKey}\n              onScrollChange={resetHash}\n              scrollRef={(scrollTo) => {\n                ref.current = scrollTo;\n                setLoaded(true);\n              }}\n              onSelectionFinished={() => null}\n              highlightTransform={(\n                highlight,\n                index,\n                setTip,\n                hideTip,\n                viewportToScaled,\n                screenshot,\n                isScrolledTo,\n              ) => {\n                const isTextHighlight = !Boolean(\n                  highlight.content && highlight.content.image,\n                );\n\n                const component = isTextHighlight ? (\n                  <Highlight\n                    isScrolledTo={isScrolledTo}\n                    position={highlight.position}\n                    comment={highlight.comment}\n                  />\n                ) : (\n                  <AreaHighlight\n                    isScrolledTo={isScrolledTo}\n                    highlight={highlight}\n                    onChange={() => {}}\n                  />\n                );\n\n                return (\n                  <Popup\n                    popupContent={<HighlightPopup {...highlight} />}\n                    onMouseOver={(popupContent) =>\n                      setTip(highlight, () => popupContent)\n                    }\n                    onMouseOut={hideTip}\n                    key={index}\n                  >\n                    {component}\n                  </Popup>\n                );\n              }}\n              highlights={state}\n            />\n          );\n        }}\n      </PdfLoader>\n    </div>\n  );\n};\n\nexport default DocumentPreviewer;\n","// extracted by mini-css-extract-plugin\nexport default {\"chatContainer\":\"chatContainer___KnZy3\",\"messageContainer\":\"messageContainer___HpbDk\",\"messageItem\":\"messageItem___Ygyfi\",\"messageItemSection\":\"messageItemSection___iLh5D\",\"messageItemSectionLeft\":\"messageItemSectionLeft___kvNNH\",\"messageItemSectionRight\":\"messageItemSectionRight___VZFy0\",\"messageItemContent\":\"messageItemContent___xlt0U\",\"messageItemContentReverse\":\"messageItemContentReverse___aD08i\",\"messageText\":\"messageText___JiiCK\",\"messageEmpty\":\"messageEmpty___uvA1b\",\"thumbnailImg\":\"thumbnailImg___q5qBr\",\"messageItemLeft\":\"messageItemLeft___o3kLO\",\"messageItemRight\":\"messageItemRight___pLPv7\"};","import { ReactComponent as AssistantIcon } from '@/assets/svg/assistant.svg';\nimport NewDocumentLink from '@/components/new-document-link';\nimport DocumentPreviewer from '@/components/pdf-previewer';\nimport { MessageType } from '@/constants/chat';\nimport { useSelectFileThumbnails } from '@/hooks/knowledgeHook';\nimport { useSelectUserInfo } from '@/hooks/userSettingHook';\nimport { IReference, Message } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { Avatar, Button, Drawer, Flex, Input, List, Spin } from 'antd';\nimport classNames from 'classnames';\nimport { useMemo } from 'react';\nimport {\n  useClickDrawer,\n  useFetchConversationOnMount,\n  useGetFileIcon,\n  useGetSendButtonDisabled,\n  useSelectConversationLoading,\n  useSendMessage,\n} from '../hooks';\nimport MarkdownContent from '../markdown-content';\n\nimport SvgIcon from '@/components/svg-icon';\nimport { useTranslate } from '@/hooks/commonHooks';\nimport { useGetDocumentUrl } from '@/hooks/documentHooks';\nimport { getExtension, isPdf } from '@/utils/documentUtils';\nimport { buildMessageItemReference } from '../utils';\nimport styles from './index.less';\n\nconst MessageItem = ({\n  item,\n  reference,\n  loading = false,\n  clickDocumentButton,\n}: {\n  item: Message;\n  reference: IReference;\n  loading?: boolean;\n  clickDocumentButton: (documentId: string, chunk: IChunk) => void;\n}) => {\n  const userInfo = useSelectUserInfo();\n  const fileThumbnails = useSelectFileThumbnails();\n  const getDocumentUrl = useGetDocumentUrl();\n  const { t } = useTranslate('chat');\n\n  const isAssistant = item.role === MessageType.Assistant;\n\n  const referenceDocumentList = useMemo(() => {\n    return reference?.doc_aggs ?? [];\n  }, [reference?.doc_aggs]);\n\n  const content = useMemo(() => {\n    let text = item.content;\n    if (text === '') {\n      text = t('searching');\n    }\n    return loading ? text?.concat('~~2$$') : text;\n  }, [item.content, loading, t]);\n\n  return (\n    <div\n      className={classNames(styles.messageItem, {\n        [styles.messageItemLeft]: item.role === MessageType.Assistant,\n        [styles.messageItemRight]: item.role === MessageType.User,\n      })}\n    >\n      <section\n        className={classNames(styles.messageItemSection, {\n          [styles.messageItemSectionLeft]: item.role === MessageType.Assistant,\n          [styles.messageItemSectionRight]: item.role === MessageType.User,\n        })}\n      >\n        <div\n          className={classNames(styles.messageItemContent, {\n            [styles.messageItemContentReverse]: item.role === MessageType.User,\n          })}\n        >\n          {item.role === MessageType.User ? (\n            <Avatar\n              size={40}\n              src={\n                userInfo.avatar ??\n                'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'\n              }\n            />\n          ) : (\n            <AssistantIcon></AssistantIcon>\n          )}\n          <Flex vertical gap={8} flex={1}>\n            <b>{isAssistant ? '' : userInfo.nickname}</b>\n            <div className={styles.messageText}>\n              <MarkdownContent\n                content={content}\n                reference={reference}\n                clickDocumentButton={clickDocumentButton}\n              ></MarkdownContent>\n            </div>\n            {isAssistant && referenceDocumentList.length > 0 && (\n              <List\n                bordered\n                dataSource={referenceDocumentList}\n                renderItem={(item) => {\n                  const fileThumbnail = fileThumbnails[item.doc_id];\n                  const fileExtension = getExtension(item.doc_name);\n                  return (\n                    <List.Item>\n                      <Flex gap={'small'} align=\"center\">\n                        {fileThumbnail ? (\n                          <img\n                            src={fileThumbnail}\n                            className={styles.thumbnailImg}\n                          ></img>\n                        ) : (\n                          <SvgIcon\n                            name={`file-icon/${fileExtension}`}\n                            width={24}\n                          ></SvgIcon>\n                        )}\n\n                        <NewDocumentLink\n                          link={getDocumentUrl(item.doc_id)}\n                          preventDefault={!isPdf(item.doc_name)}\n                        >\n                          {item.doc_name}\n                        </NewDocumentLink>\n                      </Flex>\n                    </List.Item>\n                  );\n                }}\n              />\n            )}\n          </Flex>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nconst ChatContainer = () => {\n  const {\n    ref,\n    currentConversation: conversation,\n    addNewestConversation,\n    removeLatestMessage,\n    addNewestAnswer,\n  } = useFetchConversationOnMount();\n  const {\n    handleInputChange,\n    handlePressEnter,\n    value,\n    loading: sendLoading,\n  } = useSendMessage(\n    conversation,\n    addNewestConversation,\n    removeLatestMessage,\n    addNewestAnswer,\n  );\n  const { visible, hideModal, documentId, selectedChunk, clickDocumentButton } =\n    useClickDrawer();\n  const disabled = useGetSendButtonDisabled();\n  useGetFileIcon();\n  const loading = useSelectConversationLoading();\n  const { t } = useTranslate('chat');\n\n  return (\n    <>\n      <Flex flex={1} className={styles.chatContainer} vertical>\n        <Flex flex={1} vertical className={styles.messageContainer}>\n          <div>\n            <Spin spinning={loading}>\n              {conversation?.message?.map((message, i) => {\n                return (\n                  <MessageItem\n                    loading={\n                      message.role === MessageType.Assistant &&\n                      sendLoading &&\n                      conversation?.message.length - 1 === i\n                    }\n                    key={message.id}\n                    item={message}\n                    reference={buildMessageItemReference(conversation, message)}\n                    clickDocumentButton={clickDocumentButton}\n                  ></MessageItem>\n                );\n              })}\n            </Spin>\n          </div>\n          <div ref={ref} />\n        </Flex>\n        <Input\n          size=\"large\"\n          placeholder={t('sendPlaceholder')}\n          value={value}\n          disabled={disabled}\n          suffix={\n            <Button\n              type=\"primary\"\n              onClick={handlePressEnter}\n              loading={sendLoading}\n              disabled={disabled}\n            >\n              {t('send')}\n            </Button>\n          }\n          onPressEnter={handlePressEnter}\n          onChange={handleInputChange}\n        />\n      </Flex>\n      <Drawer\n        title=\"Document Previewer\"\n        onClose={hideModal}\n        open={visible}\n        width={'50vw'}\n      >\n        <DocumentPreviewer\n          documentId={documentId}\n          chunk={selectedChunk}\n          visible={visible}\n        ></DocumentPreviewer>\n      </Drawer>\n    </>\n  );\n};\n\nexport default ChatContainer;\n","import {\n  CartesianGrid,\n  Legend,\n  Line,\n  LineChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from 'recharts';\nimport { CategoricalChartProps } from 'recharts/types/chart/generateCategoricalChart';\n\nconst data = [\n  {\n    name: 'Page A',\n    uv: 4000,\n    pv: 2400,\n  },\n  {\n    name: 'Page B',\n    uv: 3000,\n    pv: 1398,\n  },\n  {\n    name: 'Page C',\n    uv: 2000,\n    pv: 9800,\n  },\n  {\n    name: 'Page D',\n    uv: 2780,\n    pv: 3908,\n  },\n  {\n    name: 'Page E',\n    uv: 1890,\n    pv: 4800,\n  },\n  {\n    name: 'Page F',\n    uv: 2390,\n    pv: 3800,\n  },\n  {\n    name: 'Page G',\n    uv: 3490,\n    pv: 4300,\n  },\n];\n\ninterface IProps extends CategoricalChartProps {\n  data?: Array<{ xAxis: string; yAxis: number }>;\n  showLegend?: boolean;\n}\n\nconst RagLineChart = ({ data, showLegend = false }: IProps) => {\n  return (\n    <ResponsiveContainer width=\"100%\" height=\"100%\">\n      <LineChart\n        // width={500}\n        // height={300}\n        data={data}\n        margin={\n          {\n            // top: 5,\n            // right: 30,\n            // left: 20,\n            // bottom: 10,\n          }\n        }\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis dataKey=\"xAxis\" />\n        <YAxis />\n        <Tooltip />\n        {showLegend && <Legend />}\n        <Line\n          type=\"monotone\"\n          dataKey=\"yAxis\"\n          stroke=\"#8884d8\"\n          activeDot={{ r: 8 }}\n        />\n        {/* <Line type=\"monotone\" dataKey=\"uv\" stroke=\"#82ca9d\" /> */}\n      </LineChart>\n    </ResponsiveContainer>\n  );\n};\n\nexport default RagLineChart;\n","import { useTranslate } from '@/hooks/commonHooks';\nimport { CheckOutlined, CopyOutlined } from '@ant-design/icons';\nimport { Tooltip } from 'antd';\nimport { useState } from 'react';\nimport { CopyToClipboard as Clipboard, Props } from 'react-copy-to-clipboard';\n\nconst CopyToClipboard = ({ text }: Props) => {\n  const [copied, setCopied] = useState(false);\n  const { t } = useTranslate('common');\n\n  const handleCopy = () => {\n    setCopied(true);\n    setTimeout(() => {\n      setCopied(false);\n    }, 2000);\n  };\n\n  return (\n    <Tooltip title={copied ? t('copied') : t('copy')}>\n      <Clipboard text={text} onCopy={handleCopy}>\n        {copied ? <CheckOutlined /> : <CopyOutlined />}\n      </Clipboard>\n    </Tooltip>\n  );\n};\n\nexport default CopyToClipboard;\n","import CopyToClipboard from '@/components/copy-to-clipboard';\nimport { useTranslate } from '@/hooks/commonHooks';\nimport { IModalProps } from '@/interfaces/common';\nimport { IToken } from '@/interfaces/database/chat';\nimport { formatDate } from '@/utils/date';\nimport { DeleteOutlined } from '@ant-design/icons';\nimport type { TableProps } from 'antd';\nimport { Button, Modal, Space, Table } from 'antd';\nimport { useOperateApiKey } from '../hooks';\n\nconst ChatApiKeyModal = ({\n  visible,\n  dialogId,\n  hideModal,\n}: IModalProps<any> & { dialogId: string }) => {\n  const { createToken, removeToken, tokenList, listLoading, creatingLoading } =\n    useOperateApiKey(visible, dialogId);\n  const { t } = useTranslate('chat');\n\n  const columns: TableProps<IToken>['columns'] = [\n    {\n      title: 'Token',\n      dataIndex: 'token',\n      key: 'token',\n      render: (text) => <a>{text}</a>,\n    },\n    {\n      title: t('created'),\n      dataIndex: 'create_date',\n      key: 'create_date',\n      render: (text) => formatDate(text),\n    },\n    {\n      title: t('action'),\n      key: 'action',\n      render: (_, record) => (\n        <Space size=\"middle\">\n          <CopyToClipboard text={record.token}></CopyToClipboard>\n          <DeleteOutlined\n            onClick={() => removeToken(record.token, record.tenant_id)}\n          />\n        </Space>\n      ),\n    },\n  ];\n\n  return (\n    <>\n      <Modal\n        title={t('apiKey')}\n        open={visible}\n        onCancel={hideModal}\n        cancelButtonProps={{ style: { display: 'none' } }}\n        style={{ top: 300 }}\n        onOk={hideModal}\n        width={'50vw'}\n      >\n        <Table\n          columns={columns}\n          dataSource={tokenList}\n          rowKey={'token'}\n          loading={listLoading}\n        />\n        <Button onClick={createToken} loading={creatingLoading}>\n          {t('createNewKey')}\n        </Button>\n      </Modal>\n    </>\n  );\n};\n\nexport default ChatApiKeyModal;\n","import Markdown from 'react-markdown';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport remarkGfm from 'remark-gfm';\n\nconst HightLightMarkdown = ({\n  children,\n}: {\n  children: string | null | undefined;\n}) => {\n  return (\n    <Markdown\n      remarkPlugins={[remarkGfm]}\n      components={\n        {\n          code(props: any) {\n            const { children, className, node, ...rest } = props;\n            const match = /language-(\\w+)/.exec(className || '');\n            return match ? (\n              <SyntaxHighlighter {...rest} PreTag=\"div\" language={match[1]}>\n                {String(children).replace(/\\n$/, '')}\n              </SyntaxHighlighter>\n            ) : (\n              <code {...rest} className={className}>\n                {children}\n              </code>\n            );\n          },\n        } as any\n      }\n    >\n      {children}\n    </Markdown>\n  );\n};\n\nexport default HightLightMarkdown;\n","// extracted by mini-css-extract-plugin\nexport default {\"codeCard\":\"codeCard___lyM60\",\"codeText\":\"codeText___yCTO5\"};","import CopyToClipboard from '@/components/copy-to-clipboard';\nimport HightLightMarkdown from '@/components/highlight-markdown';\nimport { useTranslate } from '@/hooks/commonHooks';\nimport { IModalProps } from '@/interfaces/common';\nimport { Card, Modal, Tabs, TabsProps } from 'antd';\nimport styles from './index.less';\n\nconst EmbedModal = ({\n  visible,\n  hideModal,\n  token = '',\n}: IModalProps<any> & { token: string }) => {\n  const { t } = useTranslate('chat');\n\n  const text = `\n  ~~~ html\n  <iframe\n  src=\"${location.origin}/chat/share?shared_id=${token}\"\n  style=\"width: 100%; height: 100%; min-height: 600px\"\n  frameborder=\"0\"\n>\n</iframe>\n~~~\n  `;\n\n  const items: TabsProps['items'] = [\n    {\n      key: '1',\n      label: t('fullScreenTitle'),\n      children: (\n        <Card\n          title={t('fullScreenDescription')}\n          extra={<CopyToClipboard text={text}></CopyToClipboard>}\n          className={styles.codeCard}\n        >\n          <HightLightMarkdown>{text}</HightLightMarkdown>\n        </Card>\n      ),\n    },\n    {\n      key: '2',\n      label: t('partialTitle'),\n      children: t('comingSoon'),\n    },\n    {\n      key: '3',\n      label: t('extensionTitle'),\n      children: t('comingSoon'),\n    },\n  ];\n\n  const onChange = (key: string) => {\n    console.log(key);\n  };\n\n  return (\n    <Modal\n      title={t('embedModalTitle')}\n      open={visible}\n      style={{ top: 300 }}\n      width={'50vw'}\n      onOk={hideModal}\n      onCancel={hideModal}\n    >\n      <Tabs defaultActiveKey=\"1\" items={items} onChange={onChange} />\n    </Modal>\n  );\n};\n\nexport default EmbedModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"chartWrapper\":\"chartWrapper___p8Zu6\",\"chartItem\":\"chartItem___wdoO0\",\"chartLabel\":\"chartLabel___gooI4\",\"linkText\":\"linkText___wp54V\"};","import LineChart from '@/components/line-chart';\nimport { useSetModalState, useTranslate } from '@/hooks/commonHooks';\nimport { IModalProps } from '@/interfaces/common';\nimport { IDialog, IStats } from '@/interfaces/database/chat';\nimport { formatDate } from '@/utils/date';\nimport { Button, Card, DatePicker, Flex, Modal, Space, Typography } from 'antd';\nimport { RangePickerProps } from 'antd/es/date-picker';\nimport dayjs from 'dayjs';\nimport camelCase from 'lodash/camelCase';\nimport ChatApiKeyModal from '../chat-api-key-modal';\nimport EmbedModal from '../embed-modal';\nimport {\n  useFetchStatsOnMount,\n  usePreviewChat,\n  useSelectChartStatsList,\n  useShowEmbedModal,\n} from '../hooks';\nimport styles from './index.less';\n\nconst { Paragraph } = Typography;\nconst { RangePicker } = DatePicker;\n\nconst StatsLineChart = ({ statsType }: { statsType: keyof IStats }) => {\n  const { t } = useTranslate('chat');\n  const chartList = useSelectChartStatsList();\n  const list =\n    chartList[statsType]?.map((x) => ({\n      ...x,\n      xAxis: formatDate(x.xAxis),\n    })) ?? [];\n\n  return (\n    <div className={styles.chartItem}>\n      <b className={styles.chartLabel}>{t(camelCase(statsType))}</b>\n      <LineChart data={list}></LineChart>\n    </div>\n  );\n};\n\nconst ChatOverviewModal = ({\n  visible,\n  hideModal,\n  dialog,\n}: IModalProps<any> & { dialog: IDialog }) => {\n  const { t } = useTranslate('chat');\n  const {\n    visible: apiKeyVisible,\n    hideModal: hideApiKeyModal,\n    showModal: showApiKeyModal,\n  } = useSetModalState();\n  const {\n    embedVisible,\n    hideEmbedModal,\n    showEmbedModal,\n    embedToken,\n    errorContextHolder,\n  } = useShowEmbedModal(dialog.id);\n\n  const { pickerValue, setPickerValue } = useFetchStatsOnMount(visible);\n\n  const disabledDate: RangePickerProps['disabledDate'] = (current) => {\n    return current && current > dayjs().endOf('day');\n  };\n\n  const { handlePreview, contextHolder } = usePreviewChat(dialog.id);\n\n  return (\n    <>\n      <Modal\n        title={t('overview')}\n        open={visible}\n        onCancel={hideModal}\n        cancelButtonProps={{ style: { display: 'none' } }}\n        onOk={hideModal}\n        width={'100vw'}\n        okText={t('close', { keyPrefix: 'common' })}\n      >\n        <Flex vertical gap={'middle'}>\n          <Card title={t('backendServiceApi')}>\n            <Flex gap={8} vertical>\n              {t('serviceApiEndpoint')}\n              <Paragraph copyable className={styles.linkText}>\n                {location.origin}\n                /v1/api/\n              </Paragraph>\n            </Flex>\n            <Space size={'middle'}>\n              <Button onClick={showApiKeyModal}>{t('apiKey')}</Button>\n              <a\n                href={\n                  'https://github.com/infiniflow/ragflow/blob/main/docs/references/api.md'\n                }\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                <Button>{t('apiReference')}</Button>\n              </a>\n            </Space>\n          </Card>\n          <Card title={`${dialog.name} Web App`}>\n            <Flex gap={8} vertical>\n              <Space size={'middle'}>\n                <Button onClick={handlePreview}>{t('preview')}</Button>\n                <Button onClick={showEmbedModal}>{t('embedded')}</Button>\n              </Space>\n            </Flex>\n          </Card>\n\n          <Space>\n            <b>{t('dateRange')}</b>\n            <RangePicker\n              disabledDate={disabledDate}\n              value={pickerValue}\n              onChange={setPickerValue}\n              allowClear={false}\n            />\n          </Space>\n          <div className={styles.chartWrapper}>\n            <StatsLineChart statsType={'pv'}></StatsLineChart>\n            <StatsLineChart statsType={'round'}></StatsLineChart>\n            <StatsLineChart statsType={'speed'}></StatsLineChart>\n            <StatsLineChart statsType={'thumb_up'}></StatsLineChart>\n            <StatsLineChart statsType={'tokens'}></StatsLineChart>\n            <StatsLineChart statsType={'uv'}></StatsLineChart>\n          </div>\n        </Flex>\n        <ChatApiKeyModal\n          visible={apiKeyVisible}\n          hideModal={hideApiKeyModal}\n          dialogId={dialog.id}\n        ></ChatApiKeyModal>\n        <EmbedModal\n          token={embedToken}\n          visible={embedVisible}\n          hideModal={hideEmbedModal}\n        ></EmbedModal>\n        {contextHolder}\n        {errorContextHolder}\n      </Modal>\n    </>\n  );\n};\n\nexport default ChatOverviewModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"chatWrapper\":\"chatWrapper___LQ6YY\",\"chatAppWrapper\":\"chatAppWrapper___hrF6r\",\"chatAppContent\":\"chatAppContent___Ri0fp\",\"chatAppCard\":\"chatAppCard___kPbxc\",\"cubeIcon\":\"cubeIcon___zAmbo\",\"chatAppCardSelected\":\"chatAppCardSelected___h9j2W\",\"chatTitleWrapper\":\"chatTitleWrapper___MXbZF\",\"chatTitle\":\"chatTitle___cyXkX\",\"chatTitleContent\":\"chatTitleContent___XsLt3\",\"chatSpin\":\"chatSpin___J9mE8\",\"chatTitleCard\":\"chatTitleCard___Pnbv0\",\"chatTitleCardSelected\":\"chatTitleCardSelected___A8BIt\",\"divider\":\"divider___d5TdM\"};","import { ReactComponent as ChatAppCube } from '@/assets/svg/chat-app-cube.svg';\r\nimport RenameModal from '@/components/rename-modal';\r\nimport {\r\n  CloudOutlined,\r\n  DeleteOutlined,\r\n  EditOutlined,\r\n  PlusOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Card,\r\n  Divider,\r\n  Dropdown,\r\n  Flex,\r\n  MenuProps,\r\n  Space,\r\n  Spin,\r\n  Tag,\r\n  Typography,\r\n} from 'antd';\r\nimport { MenuItemProps } from 'antd/lib/menu/MenuItem';\r\nimport classNames from 'classnames';\r\nimport { useCallback } from 'react';\r\nimport ChatConfigurationModal from './chat-configuration-modal';\r\nimport ChatContainer from './chat-container';\r\nimport {\r\n  useClickConversationCard,\r\n  useClickDialogCard,\r\n  useDeleteConversation,\r\n  useDeleteDialog,\r\n  useEditDialog,\r\n  useFetchConversationListOnMount,\r\n  useFetchDialogOnMount,\r\n  useGetChatSearchParams,\r\n  useHandleItemHover,\r\n  useRenameConversation,\r\n  useSelectConversationListLoading,\r\n  useSelectDerivedConversationList,\r\n  useSelectDialogListLoading,\r\n  useSelectFirstDialogOnMount,\r\n} from './hooks';\r\n\r\nimport { useSetModalState, useTranslate } from '@/hooks/commonHooks';\r\nimport { useSetSelectedRecord } from '@/hooks/logicHooks';\r\nimport { IDialog } from '@/interfaces/database/chat';\r\nimport ChatOverviewModal from './chat-overview-modal';\r\nimport styles from './index.less';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst Chat = () => {\r\n  const dialogList = useSelectFirstDialogOnMount();\r\n  const { onRemoveDialog } = useDeleteDialog();\r\n  const { onRemoveConversation } = useDeleteConversation();\r\n  const { handleClickDialog } = useClickDialogCard();\r\n  const { handleClickConversation } = useClickConversationCard();\r\n  const { dialogId, conversationId } = useGetChatSearchParams();\r\n  const { list: conversationList, addTemporaryConversation } =\r\n    useSelectDerivedConversationList();\r\n  const { activated, handleItemEnter, handleItemLeave } = useHandleItemHover();\r\n  const {\r\n    activated: conversationActivated,\r\n    handleItemEnter: handleConversationItemEnter,\r\n    handleItemLeave: handleConversationItemLeave,\r\n  } = useHandleItemHover();\r\n  const {\r\n    conversationRenameLoading,\r\n    initialConversationName,\r\n    onConversationRenameOk,\r\n    conversationRenameVisible,\r\n    hideConversationRenameModal,\r\n    showConversationRenameModal,\r\n  } = useRenameConversation();\r\n  const {\r\n    dialogSettingLoading,\r\n    initialDialog,\r\n    onDialogEditOk,\r\n    dialogEditVisible,\r\n    clearDialog,\r\n    hideDialogEditModal,\r\n    showDialogEditModal,\r\n  } = useEditDialog();\r\n  const dialogLoading = useSelectDialogListLoading();\r\n  const conversationLoading = useSelectConversationListLoading();\r\n  const { t } = useTranslate('chat');\r\n  const {\r\n    visible: overviewVisible,\r\n    hideModal: hideOverviewModal,\r\n    showModal: showOverviewModal,\r\n  } = useSetModalState();\r\n  const { currentRecord, setRecord } = useSetSelectedRecord<IDialog>();\r\n\r\n  useFetchDialogOnMount(dialogId, true);\r\n\r\n  const handleAppCardEnter = (id: string) => () => {\r\n    handleItemEnter(id);\r\n  };\r\n\r\n  const handleConversationCardEnter = (id: string) => () => {\r\n    handleConversationItemEnter(id);\r\n  };\r\n\r\n  const handleShowChatConfigurationModal =\r\n    (dialogId?: string): any =>\r\n    (info: any) => {\r\n      info?.domEvent?.preventDefault();\r\n      info?.domEvent?.stopPropagation();\r\n      showDialogEditModal(dialogId);\r\n    };\r\n\r\n  const handleRemoveDialog =\r\n    (dialogId: string): MenuItemProps['onClick'] =>\r\n    ({ domEvent }) => {\r\n      domEvent.preventDefault();\r\n      domEvent.stopPropagation();\r\n      onRemoveDialog([dialogId]);\r\n    };\r\n\r\n  const handleShowOverviewModal =\r\n    (dialog: IDialog): any =>\r\n    (info: any) => {\r\n      info?.domEvent?.preventDefault();\r\n      info?.domEvent?.stopPropagation();\r\n      setRecord(dialog);\r\n      showOverviewModal();\r\n    };\r\n\r\n  const handleRemoveConversation =\r\n    (conversationId: string): MenuItemProps['onClick'] =>\r\n    ({ domEvent }) => {\r\n      domEvent.preventDefault();\r\n      domEvent.stopPropagation();\r\n      onRemoveConversation([conversationId]);\r\n    };\r\n\r\n  const handleShowConversationRenameModal =\r\n    (conversationId: string): MenuItemProps['onClick'] =>\r\n    ({ domEvent }) => {\r\n      domEvent.preventDefault();\r\n      domEvent.stopPropagation();\r\n      showConversationRenameModal(conversationId);\r\n    };\r\n\r\n  const handleDialogCardClick = (dialogId: string) => () => {\r\n    handleClickDialog(dialogId);\r\n  };\r\n\r\n  const handleConversationCardClick = (dialogId: string) => () => {\r\n    handleClickConversation(dialogId);\r\n  };\r\n\r\n  const handleCreateTemporaryConversation = useCallback(() => {\r\n    addTemporaryConversation();\r\n  }, [addTemporaryConversation]);\r\n\r\n  const items: MenuProps['items'] = [\r\n    {\r\n      key: '1',\r\n      onClick: handleCreateTemporaryConversation,\r\n      label: (\r\n        <Space>\r\n          <PlusOutlined />\r\n          {t('newChat')}\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const buildAppItems = (dialog: IDialog) => {\r\n    const dialogId = dialog.id;\r\n\r\n    const appItems: MenuProps['items'] = [\r\n      {\r\n        key: '1',\r\n        onClick: handleShowChatConfigurationModal(dialogId),\r\n        label: (\r\n          <Space>\r\n            <EditOutlined />\r\n            {t('edit', { keyPrefix: 'common' })}\r\n          </Space>\r\n        ),\r\n      },\r\n      { type: 'divider' },\r\n      {\r\n        key: '2',\r\n        onClick: handleRemoveDialog(dialogId),\r\n        label: (\r\n          <Space>\r\n            <DeleteOutlined />\r\n            {t('delete', { keyPrefix: 'common' })}\r\n          </Space>\r\n        ),\r\n      },\r\n      { type: 'divider' },\r\n      {\r\n        key: '3',\r\n        onClick: handleShowOverviewModal(dialog),\r\n        label: (\r\n          <Space>\r\n            <CloudOutlined />\r\n            {t('overview')}\r\n          </Space>\r\n        ),\r\n      },\r\n    ];\r\n\r\n    return appItems;\r\n  };\r\n\r\n  const buildConversationItems = (conversationId: string) => {\r\n    const appItems: MenuProps['items'] = [\r\n      {\r\n        key: '1',\r\n        onClick: handleShowConversationRenameModal(conversationId),\r\n        label: (\r\n          <Space>\r\n            <EditOutlined />\r\n            {t('rename', { keyPrefix: 'common' })}\r\n          </Space>\r\n        ),\r\n      },\r\n      { type: 'divider' },\r\n      {\r\n        key: '2',\r\n        onClick: handleRemoveConversation(conversationId),\r\n        label: (\r\n          <Space>\r\n            <DeleteOutlined />\r\n            {t('delete', { keyPrefix: 'common' })}\r\n          </Space>\r\n        ),\r\n      },\r\n    ];\r\n\r\n    return appItems;\r\n  };\r\n\r\n  useFetchConversationListOnMount();\r\n\r\n  return (\r\n    <Flex className={styles.chatWrapper}>\r\n      <Flex className={styles.chatAppWrapper}>\r\n        <Flex flex={1} vertical>\r\n          <Button type=\"primary\" onClick={handleShowChatConfigurationModal()}>\r\n            {t('createAssistant')}\r\n          </Button>\r\n          <Divider></Divider>\r\n          <Flex className={styles.chatAppContent} vertical gap={10}>\r\n            <Spin spinning={dialogLoading} wrapperClassName={styles.chatSpin}>\r\n              {dialogList.map((x) => (\r\n                <Card\r\n                  key={x.id}\r\n                  hoverable\r\n                  className={classNames(styles.chatAppCard, {\r\n                    [styles.chatAppCardSelected]: dialogId === x.id,\r\n                  })}\r\n                  onMouseEnter={handleAppCardEnter(x.id)}\r\n                  onMouseLeave={handleItemLeave}\r\n                  onClick={handleDialogCardClick(x.id)}\r\n                >\r\n                  <Flex justify=\"space-between\" align=\"center\">\r\n                    <Space size={15}>\r\n                      <Avatar src={x.icon} shape={'square'} />\r\n                      <section>\r\n                        <b>\r\n                          <Text\r\n                            ellipsis={{ tooltip: x.name }}\r\n                            style={{ width: 130 }}\r\n                          >\r\n                            {x.name}\r\n                          </Text>\r\n                        </b>\r\n                        <div>{x.description}</div>\r\n                      </section>\r\n                    </Space>\r\n                    {activated === x.id && (\r\n                      <section>\r\n                        <Dropdown menu={{ items: buildAppItems(x) }}>\r\n                          <ChatAppCube\r\n                            className={styles.cubeIcon}\r\n                          ></ChatAppCube>\r\n                        </Dropdown>\r\n                      </section>\r\n                    )}\r\n                  </Flex>\r\n                </Card>\r\n              ))}\r\n            </Spin>\r\n          </Flex>\r\n        </Flex>\r\n      </Flex>\r\n      <Divider type={'vertical'} className={styles.divider}></Divider>\r\n      <Flex className={styles.chatTitleWrapper}>\r\n        <Flex flex={1} vertical>\r\n          <Flex\r\n            justify={'space-between'}\r\n            align=\"center\"\r\n            className={styles.chatTitle}\r\n          >\r\n            <Space>\r\n              <b>{t('chat')}</b>\r\n              <Tag>{conversationList.length}</Tag>\r\n            </Space>\r\n            <Dropdown menu={{ items }}>\r\n              {/* <FormOutlined /> */}\r\n              <PlusOutlined />\r\n            </Dropdown>\r\n          </Flex>\r\n          <Divider></Divider>\r\n          <Flex vertical gap={10} className={styles.chatTitleContent}>\r\n            <Spin\r\n              spinning={conversationLoading}\r\n              wrapperClassName={styles.chatSpin}\r\n            >\r\n              {conversationList.map((x) => (\r\n                <Card\r\n                  key={x.id}\r\n                  hoverable\r\n                  onClick={handleConversationCardClick(x.id)}\r\n                  onMouseEnter={handleConversationCardEnter(x.id)}\r\n                  onMouseLeave={handleConversationItemLeave}\r\n                  className={classNames(styles.chatTitleCard, {\r\n                    [styles.chatTitleCardSelected]: x.id === conversationId,\r\n                  })}\r\n                >\r\n                  <Flex justify=\"space-between\" align=\"center\">\r\n                    <div>\r\n                      <Text\r\n                        ellipsis={{ tooltip: x.name }}\r\n                        style={{ width: 150 }}\r\n                      >\r\n                        {x.name}\r\n                      </Text>\r\n                    </div>\r\n                    {conversationActivated === x.id && x.id !== '' && (\r\n                      <section>\r\n                        <Dropdown\r\n                          menu={{ items: buildConversationItems(x.id) }}\r\n                        >\r\n                          <ChatAppCube\r\n                            className={styles.cubeIcon}\r\n                          ></ChatAppCube>\r\n                        </Dropdown>\r\n                      </section>\r\n                    )}\r\n                  </Flex>\r\n                </Card>\r\n              ))}\r\n            </Spin>\r\n          </Flex>\r\n        </Flex>\r\n      </Flex>\r\n      <Divider type={'vertical'} className={styles.divider}></Divider>\r\n      <ChatContainer></ChatContainer>\r\n      <ChatConfigurationModal\r\n        visible={dialogEditVisible}\r\n        initialDialog={initialDialog}\r\n        showModal={showDialogEditModal}\r\n        hideModal={hideDialogEditModal}\r\n        loading={dialogSettingLoading}\r\n        onOk={onDialogEditOk}\r\n        clearDialog={clearDialog}\r\n      ></ChatConfigurationModal>\r\n      <RenameModal\r\n        visible={conversationRenameVisible}\r\n        hideModal={hideConversationRenameModal}\r\n        onOk={onConversationRenameOk}\r\n        initialName={initialConversationName}\r\n        loading={conversationRenameLoading}\r\n      ></RenameModal>\r\n      <ChatOverviewModal\r\n        visible={overviewVisible}\r\n        hideModal={hideOverviewModal}\r\n        dialog={currentRecord}\r\n      ></ChatOverviewModal>\r\n    </Flex>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"errorWrapper\":\"errorWrapper___QfVXQ\"};","import { Alert, Flex } from 'antd';\n\nimport { useTranslate } from '@/hooks/commonHooks';\nimport React from 'react';\nimport styles from './index.less';\n\nconst FileError = ({ children }: React.PropsWithChildren) => {\n  const { t } = useTranslate('fileManager');\n  return (\n    <Flex align=\"center\" justify=\"center\" className={styles.errorWrapper}>\n      <Alert\n        type=\"error\"\n        message={<h2>{children || t('fileError')}</h2>}\n      ></Alert>\n    </Flex>\n  );\n};\n\nexport default FileError;\n","import dayjs from 'dayjs';\r\n\r\nexport function today() {\r\n  return formatDate(dayjs());\r\n}\r\n\r\nexport function lastDay() {\r\n  return formatDate(dayjs().subtract(1, 'days'));\r\n}\r\n\r\nexport function lastWeek() {\r\n  return formatDate(dayjs().subtract(1, 'weeks'));\r\n}\r\n\r\nexport function formatDate(date: any) {\r\n  if (!date) {\r\n    return '';\r\n  }\r\n  return dayjs(date).format('DD/MM/YYYY HH:mm:ss');\r\n}\r\n","import { IChunk } from '@/interfaces/database/knowledge';\nimport { UploadFile } from 'antd';\nimport { v4 as uuid } from 'uuid';\n\nexport const buildChunkHighlights = (\n  selectedChunk: IChunk,\n  size: { width: number; height: number },\n) => {\n  return Array.isArray(selectedChunk?.positions) &&\n    selectedChunk.positions.every((x) => Array.isArray(x))\n    ? selectedChunk?.positions?.map((x) => {\n        const boundingRect = {\n          width: size.width,\n          height: size.height,\n          x1: x[1],\n          x2: x[2],\n          y1: x[3],\n          y2: x[4],\n        };\n        return {\n          id: uuid(),\n          comment: {\n            text: '',\n            emoji: '',\n          },\n          content: { text: selectedChunk.content_with_weight },\n          position: {\n            boundingRect: boundingRect,\n            rects: [boundingRect],\n            pageNumber: x[0],\n          },\n        };\n      })\n    : [];\n};\n\nexport const isFileUploadDone = (file: UploadFile) => file.status === 'done';\n\nexport const getExtension = (name: string) =>\n  name?.slice(name.lastIndexOf('.') + 1).toLowerCase() ?? '';\n\nexport const isPdf = (name: string) => {\n  return getExtension(name) === 'pdf';\n};\n\nexport const getUnSupportedFilesCount = (message: string) => {\n  return message.split('\\n').length;\n};\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 86635;\nmodule.exports = webpackEmptyAsyncContext;"],"names":["useCatchDocumentError","url","_useState","useState","_useState2","_slicedToArray","error","setError","fetchDocument","useCallback","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_context","prev","next","axios","get","sent","retcode","retmsg","stop","useEffect","RenameModal","_ref","visible","hideModal","loading","initialName","onOk","_Form$useForm","Form","useForm","_Form$useForm2","form","_useTranslate","useTranslate","t","handleOk","_ref2","ret","validateFields","abrupt","name","apply","arguments","handleCancel","onFinish","values","console","log","onFinishFailed","errorInfo","setFieldValue","_jsx","Modal","title","open","onCancel","okButtonProps","confirmLoading","children","labelCol","span","wrapperCol","style","maxWidth","autoComplete","Item","label","rules","required","message","Input","RerankItem","allOptions","useSelectLlmOptionsByModelType","tooltip","Select","options","LlmModelType","Rerank","allowClear","placeholder","_useTranslate2","_jsxs","_Fragment","noStyle","dependencies","getFieldValue","rerankId","initialValue","Slider","max","min","SimilaritySlider","_ref$isTooltipShown","isTooltipShown","step","KnowledgeRouteKey","RunningStatus","ModelVariableType","settledModelVariableMap","_defineProperty","Improvise","temperature","top_p","frequency_penalty","presence_penalty","max_tokens","Precise","Balance","KnowledgeSearchParams","useSetModalState","setVisible","showModal","switchVisible","useDeepCompareEffect","effect","deps","ref","useRef","callback","isEqual","current","useDynamicSVGImport","length","undefined","ImportedIconRef","_useState3","_useState4","setLoading","_useState5","_useState6","onCompleted","onError","importIcon","ReactComponent","t0","finish","SvgIcon","useShowDeleteConfirm","_App$useApp","App","useApp","modal","_useTranslation","useTranslation","showDeleteConfirm","Promise","resolve","reject","confirm","icon","ExclamationCircleFilled","okText","okType","cancelText","_callee2","_context2","info","keyPrefix","useCommonTranslation","useGetDocumentUrl","documentId","getDocumentUrl","id","concat","api_host","useGetChunkHighlights","selectedChunk","width","height","size","setSize","highlights","useMemo","buildChunkHighlights","setWidthAndHeight","pre","useFetchDocumentList","_useGetKnowledgeSearc","useGetKnowledgeSearchParams","knowledgeId","dispatch","useDispatch","fetchKfList","type","payload","kb_id","useSetDocumentStatus","_useGetKnowledgeSearc2","setDocumentStatus","status","doc_id","Number","useSelectDocumentList","list","useSelector","state","kFModel","useSaveDocumentName","_useGetKnowledgeSearc3","saveName","useCreateDocument","_useGetKnowledgeSearc4","createDocument","useSetDocumentParser","_useGetKnowledgeSearc5","setDocumentParser","parserId","parserConfig","parser_id","parser_config","useRemoveDocument","_useGetKnowledgeSearc6","removeDocument","documentIds","useUploadDocument","_useGetKnowledgeSearc7","uploadDocument","fileList","useRunDocument","runDocumentByIds","useSelectRunDocumentLoading","useOneNamespaceEffectsLoading","useFetchLlmList","modelType","isOnMountFetching","fetchLlmList","model_type","useSelectLlmInfo","llmInfo","settingModel","useSelectLlmOptions","embeddingModelOptions","Object","entries","map","key","value","x","llm_name","disabled","available","groupOptionsByModelType","filter","_ref3","_ref4","some","includes","_ref5","_ref6","Chat","Embedding","Image2text","Speech2text","useSelectLlmFactoryList","factoryList","useSelectMyLlmList","myLlmList","useFetchLlmFactoryListOnMount","currentList","keys","every","y","sortLLmFactoryListBySpecifiedOrder","fetchLlmFactoryList","useFetchMyLlmListOnMount","llmList","_ref8","_factoryList$find$log","_factoryList$find","_ref9","_objectSpread","logo","find","fetchMyLlmList","useSaveApiKey","saveApiKey","savingParams","useSaveTenantInfo","saveTenantInfo","useAddLlm","addLlm","requestBody","useDeleteLlm","deleteLlm","useChangeDocumentParser","_useSetModalState","changeParserVisible","hideChangeParserModal","showChangeParserModal","onChangeParserOk","_x","_x2","changeParserLoading","useSetSelectedRecord","currentRecord","setCurrentRecord","setRecord","record","useChangeLanguage","i18n","saveSetting","useSaveSetting","changeLanguage","lng","LanguageTranslationMap","language","useGetPagination","total","page","pageSize","onPageChange","pagination","showQuickJumper","showSizeChanger","pageSizeOptions","onChange","showTotal","useSetPagination","namespace","setPagination","pageNumber","useFetchAppConf","appConf","setAppConf","fetchAppConf","useSendMessageWithSse","api","completeConversation","answer","setAnswer","_useState7","_useState8","done","setDone","send","_callee3","body","_response$body","response","reader","_done","val","d","_context3","fetch","method","headers","Authorization","getAuthorization","JSON","stringify","pipeThrough","TextDecoderStream","EventSourceParserStream","getReader","read","parse","e","warn","_x3","SegmentIndex","useSegmentedPathName","index","_useLocation","useLocation","pathname","pathArray","split","useSecondPathName","Second","useThirdPathName","Third","_useSearchParams","useSearchParams","_useSearchParams2","currentQueryParameters","DocumentId","KnowledgeId","useNavigateWithFromState","navigate","useNavigate","path","from","useNavigateToDataset","Dataset","getOneNamespaceEffectsLoading","effects","effectNames","effectName","delay","ms","setTimeout","useFetchUserInfo","fetchUserInfo","useSelectUserInfo","userInfo","useSelectTenantInfo","tenantInfo","tenantIfo","useFetchTenantInfo","fetchTenantInfo","useSelectParserList","parserList","_tenantInfo$parser_id","parserArray","parser_ids","arr","useLogout","logout","authorizationUtil","removeAll","history","push","useFetchSystemVersion","version","setVersion","fetchSystemVersion","_yield$userService$ge","userService","getSystemVersion","useFetchSystemStatus","systemStatus","setSystemStatus","fetchSystemStatus","_yield$userService$ge2","getSystemStatus","__defProp","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","obj","__spreadValues","a","b","prop","SvgChatAppCube","props","SvgChatConfigurationAtom","AssistantSetting","show","_useFetchKnowledgeLis","useFetchKnowledgeList","knowledgeList","knowledgeOptions","normFile","Array","isArray","uploadButtion","border","background","PlusOutlined","marginTop","className","classNames","styles","segmentedHidden","valuePropName","getValueFromEvent","Upload","listType","maxCount","showUploadList","showPreviewIcon","showRemoveIcon","display","TextArea","autoSize","minRows","Switch","mode","useFetchModelId","_tenantInfo$llm_id","llm_id","useFetchLlmModelOnVisible","ModelSetting","initialLlmSetting","parameterOptions","camelCase","modelOptions","handleParametersChange","variable","setFieldsValue","llm_setting","variableEnabledFieldMap","reduce","field","showSearch","Divider","Flex","gap","align","flex","variableSlider","InputNumber","sliderInputNumber","EditableContext","React","EditableRow","_objectWithoutProperties","_excluded","component","Provider","EditableCell","editable","dataIndex","handleSave","restProps","_excluded2","editing","setEditing","inputRef","useContext","focus","toggleEdit","save","childNode","margin","onPressEnter","onBlur","paddingRight","onClick","PromptEngine","dataSource","setDataSource","parameters","useSelectPromptConfigParameters","components","row","cell","handleRemove","newData","item","_toConsumableArray","findIndex","splice","handleAdd","uuid","optional","handleOptionalChange","checked","useImperativeHandle","trim","columns","onCell","render","text","_","DeleteOutlined","maxRows","variableContainer","Row","justify","Col","variableAlign","variableLabel","Tooltip","QuestionCircleOutlined","variableIcon","Button","Table","rowKey","variableTable","rowClassName","editableRow","forwardRef","layout","validateMessages","types","email","number","range","ConfigurationSegmented","segmentedMap","ChatConfigurationModal","initialDialog","clearDialog","setValue","promptEngineRef","modelId","_nextValues$prompt_co","_nextValues$prompt_co2","nextValues","emptyResponse","finalValues","omit","excludeUnEnabledVariables","prompt_config","empty_response","thumbUrl","dialog_id","vector_similarity_weight","handleSegmentedChange","handleModalAfterClose","resetFields","ChatConfigurationAtom","chatConfigurationDescription","_initialDialog$llm_se","_initialDialog$llm_id","_initialDialog$vector","uid","destroyOnClose","afterClose","Segmented","block","colon","Element","HighlightPopup","comment","emoji","DocumentPreviewer","chunk","_useGetChunkHighlight","loaded","setLoaded","resetHash","documentContainer","PdfLoader","beforeLoad","Skeleton","active","workerSrc","errorMessage","FileError","pdfDocument","getPage","then","viewport","getViewport","scale","PdfHighlighter","enableAreaSelection","event","altKey","onScrollChange","scrollRef","scrollTo","onSelectionFinished","highlightTransform","highlight","setTip","hideTip","viewportToScaled","screenshot","isScrolledTo","isTextHighlight","content","image","Highlight","position","AreaHighlight","Popup","popupContent","onMouseOver","onMouseOut","MessageItem","_userInfo$avatar","reference","_ref$loading","clickDocumentButton","fileThumbnails","useSelectFileThumbnails","isAssistant","role","MessageType","Assistant","referenceDocumentList","_reference$doc_aggs","doc_aggs","_text","messageItem","messageItemLeft","messageItemRight","User","messageItemSection","messageItemSectionLeft","messageItemSectionRight","messageItemContent","messageItemContentReverse","Avatar","src","avatar","AssistantIcon","vertical","nickname","messageText","MarkdownContent","List","bordered","renderItem","fileThumbnail","fileExtension","getExtension","doc_name","thumbnailImg","NewDocumentLink","link","preventDefault","isPdf","ChatContainer","_conversation$message","_useFetchConversation","useFetchConversationOnMount","conversation","currentConversation","addNewestConversation","removeLatestMessage","addNewestAnswer","_useSendMessage","useSendMessage","handleInputChange","handlePressEnter","sendLoading","_useClickDrawer","useClickDrawer","useGetSendButtonDisabled","useGetFileIcon","useSelectConversationLoading","chatContainer","messageContainer","Spin","spinning","i","buildMessageItemReference","suffix","Drawer","onClose","uv","pv","RagLineChart","_ref$showLegend","showLegend","ResponsiveContainer","LineChart","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","Legend","Line","stroke","activeDot","r","CopyToClipboard","copied","setCopied","handleCopy","Clipboard","onCopy","CheckOutlined","CopyOutlined","ChatApiKeyModal","dialogId","_useOperateApiKey","useOperateApiKey","createToken","removeToken","tokenList","listLoading","creatingLoading","formatDate","Space","token","tenant_id","cancelButtonProps","top","HightLightMarkdown","Markdown","remarkPlugins","remarkGfm","code","node","rest","match","exec","SyntaxHighlighter","PreTag","String","replace","EmbedModal","_ref$token","location","origin","items","Card","extra","codeCard","Tabs","defaultActiveKey","Paragraph","Typography","RangePicker","DatePicker","StatsLineChart","_chartList$statsType$","_chartList$statsType","statsType","chartList","useSelectChartStatsList","xAxis","chartItem","chartLabel","ChatOverviewModal","dialog","apiKeyVisible","hideApiKeyModal","showApiKeyModal","_useShowEmbedModal","useShowEmbedModal","embedVisible","hideEmbedModal","showEmbedModal","embedToken","errorContextHolder","_useFetchStatsOnMount","useFetchStatsOnMount","pickerValue","setPickerValue","disabledDate","dayjs","endOf","_usePreviewChat","usePreviewChat","handlePreview","contextHolder","copyable","linkText","href","target","rel","chartWrapper","Text","dialogList","useSelectFirstDialogOnMount","_useDeleteDialog","useDeleteDialog","onRemoveDialog","_useDeleteConversatio","useDeleteConversation","onRemoveConversation","_useClickDialogCard","useClickDialogCard","handleClickDialog","_useClickConversation","useClickConversationCard","handleClickConversation","_useGetChatSearchPara","useGetChatSearchParams","conversationId","_useSelectDerivedConv","useSelectDerivedConversationList","conversationList","addTemporaryConversation","_useHandleItemHover","useHandleItemHover","activated","handleItemEnter","handleItemLeave","_useHandleItemHover2","conversationActivated","handleConversationItemEnter","handleConversationItemLeave","_useRenameConversatio","useRenameConversation","conversationRenameLoading","initialConversationName","onConversationRenameOk","conversationRenameVisible","hideConversationRenameModal","showConversationRenameModal","_useEditDialog","useEditDialog","dialogSettingLoading","onDialogEditOk","dialogEditVisible","hideDialogEditModal","showDialogEditModal","dialogLoading","useSelectDialogListLoading","conversationLoading","useSelectConversationListLoading","overviewVisible","hideOverviewModal","showOverviewModal","_useSetSelectedRecord","useFetchDialogOnMount","handleAppCardEnter","handleConversationCardEnter","handleShowChatConfigurationModal","_info$domEvent","_info$domEvent2","domEvent","stopPropagation","handleRemoveDialog","handleShowOverviewModal","_info$domEvent3","_info$domEvent4","handleRemoveConversation","handleShowConversationRenameModal","handleDialogCardClick","handleConversationCardClick","handleCreateTemporaryConversation","buildAppItems","appItems","EditOutlined","CloudOutlined","buildConversationItems","useFetchConversationListOnMount","chatWrapper","chatAppWrapper","chatAppContent","wrapperClassName","chatSpin","hoverable","chatAppCard","chatAppCardSelected","onMouseEnter","onMouseLeave","shape","ellipsis","description","Dropdown","menu","ChatAppCube","cubeIcon","divider","chatTitleWrapper","chatTitle","Tag","chatTitleContent","chatTitleCard","chatTitleCardSelected","errorWrapper","Alert","today","lastDay","subtract","lastWeek","date","format","_selectedChunk$positi","positions","boundingRect","x1","x2","y1","y2","content_with_weight","rects","isFileUploadDone","file","_name$slice$toLowerCa","slice","lastIndexOf","toLowerCase","getUnSupportedFilesCount","webpackEmptyAsyncContext","req","module"],"sourceRoot":""}