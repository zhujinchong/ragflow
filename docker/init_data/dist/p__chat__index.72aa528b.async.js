(self.webpackChunk=self.webpackChunk||[]).push([[8301,8725],{96449:function(pe,U,n){"use strict";n.d(U,{s:function(){return r}});var V=n(15009),p=n.n(V),c=n(99289),C=n.n(c),I=n(5574),f=n.n(I),v=n(5121),g=n(62435),r=function(B){var G=(0,g.useState)(""),H=f()(G,2),se=H[0],w=H[1],te=(0,g.useCallback)(C()(p()().mark(function he(){var ne,b;return p()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,v.Z.get(B);case 2:ne=_.sent,b=ne.data,b.retcode!==0&&w(b==null?void 0:b.retmsg);case 5:case"end":return _.stop()}},he)})),[B]);return(0,g.useEffect)(function(){te()},[te]),se}},89545:function(pe,U,n){"use strict";var V=n(15009),p=n.n(V),c=n(99289),C=n.n(c),I=n(5574),f=n.n(I),v=n(2039),g=n(99859),r=n(85576),A=n(79531),B=n(62435),G=n(86074),H=function(w){var te=w.visible,he=w.hideModal,ne=w.loading,b=w.initialName,K=w.onOk,_=g.Z.useForm(),o=f()(_,1),u=o[0],a=(0,v.qM)("common"),d=a.t,h=function(){var M=C()(p()().mark(function j(){var l;return p()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,u.validateFields();case 2:return l=x.sent,x.abrupt("return",K(l.name));case 4:case"end":return x.stop()}},j)}));return function(){return M.apply(this,arguments)}}(),y=function(){he()},S=function(j){console.log("Success:",j)},Y=function(j){console.log("Failed:",j)};return(0,B.useEffect)(function(){te&&u.setFieldValue("name",b)},[b,u,te]),(0,G.jsx)(r.Z,{title:d("rename"),open:te,onOk:h,onCancel:y,okButtonProps:{loading:ne},confirmLoading:ne,children:(0,G.jsx)(g.Z,{name:"basic",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},onFinish:S,onFinishFailed:Y,autoComplete:"off",form:u,children:(0,G.jsx)(g.Z.Item,{label:d("name"),name:"name",rules:[{required:!0,message:d("namePlaceholder")}],children:(0,G.jsx)(A.Z,{})})})})};U.Z=H},77567:function(pe,U,n){"use strict";var V=n(96330),p=n(2039),c=n(11754),C=n(99859),I=n(20652),f=n(71338),v=n(86074),g=function(){var B=(0,p.qM)("knowledgeDetails"),G=B.t,H=(0,c.hl)();return(0,v.jsx)(C.Z.Item,{label:G("rerankModel"),name:"rerank_id",tooltip:G("rerankTip"),children:(0,v.jsx)(I.Z,{options:H[V.Vr.Rerank],allowClear:!0,placeholder:G("rerankPlaceholder")})})},r=function(){var B=(0,p.qM)("knowledgeDetails"),G=B.t;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g,{}),(0,v.jsx)(C.Z.Item,{noStyle:!0,dependencies:["rerank_id"],children:function(se){var w=se.getFieldValue,te=w("rerank_id");return te&&(0,v.jsx)(C.Z.Item,{label:G("topK"),name:"top_k",initialValue:1024,tooltip:G("topKTip"),children:(0,v.jsx)(f.Z,{max:2048,min:1})})}})]})};U.Z=r},32739:function(pe,U,n){"use strict";var V=n(2039),p=n(99859),c=n(71338),C=n(86074),I=function(v){var g=v.isTooltipShown,r=g===void 0?!1:g,A=(0,V.qM)("knowledgeDetails"),B=A.t;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.Z.Item,{label:B("similarityThreshold"),name:"similarity_threshold",tooltip:r&&B("similarityThresholdTip"),initialValue:.2,children:(0,C.jsx)(c.Z,{max:1,step:.01})}),(0,C.jsx)(p.Z.Item,{label:B("vectorSimilarityWeight"),name:"vector_similarity_weight",initialValue:1-.3,tooltip:r&&B("vectorSimilarityWeightTip"),children:(0,C.jsx)(c.Z,{max:1,step:.01})})]})};U.Z=I},96330:function(pe,U,n){"use strict";n.d(U,{Rx:function(){return c},S8:function(){return f},Vr:function(){return v},cG:function(){return C},ld:function(){return g},oQ:function(){return I}});var V=n(9783),p=n.n(V),c=function(r){return r.Dataset="dataset",r.Testing="testing",r.Configuration="configuration",r}({}),C=function(r){return r.UNSTART="0",r.RUNNING="1",r.CANCEL="2",r.DONE="3",r.FAIL="4",r}({}),I=function(r){return r.Improvise="Improvise",r.Precise="Precise",r.Balance="Balance",r}({}),f=p()(p()(p()({},I.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),I.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),I.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),v=function(r){return r.Embedding="embedding",r.Chat="chat",r.Image2text="image2text",r.Speech2text="speech2text",r.Rerank="rerank",r}({}),g=function(r){return r.DocumentId="doc_id",r.KnowledgeId="id",r}({})},2039:function(pe,U,n){"use strict";n.d(U,{I3:function(){return he},pG:function(){return se},qM:function(){return ne}});var V=n(15009),p=n.n(V),c=n(99289),C=n.n(c),I=n(5574),f=n.n(I),v=n(21640),g=n(3321),r=n(18446),A=n.n(r),B=n(62435),G=n(67421),H=n(86074),se=function(){var _=(0,B.useState)(!1),o=f()(_,2),u=o[0],a=o[1],d=function(){a(!0)},h=function(){a(!1)},y=function(){a(!u)};return{visible:u,showModal:d,hideModal:h,switchVisible:y}},w=function(_,o){var u=useRef(),a=function(){};isEqual(o,u.current)||(a=_(),u.current=o),useEffect(function(){return function(){a&&a()}},[])};function te(K){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=useRef(),u=useState(!1),a=_slicedToArray(u,2),d=a[0],h=a[1],y=useState(),S=_slicedToArray(y,2),Y=S[0],M=S[1],j=_.onCompleted,l=_.onError;return useEffect(function(){h(!0);var ae=function(){var x=_asyncToGenerator(_regeneratorRuntime().mark(function $(){return _regeneratorRuntime().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.prev=0,ce.next=3,n(86635)(K);case 3:o.current=ce.sent.ReactComponent,j==null||j(K,o.current),ce.next=11;break;case 7:ce.prev=7,ce.t0=ce.catch(0),l==null||l(ce.t0),M(ce.t0);case 11:return ce.prev=11,h(!1),ce.finish(11);case 14:case"end":return ce.stop()}},$,null,[[0,7,11,14]])}));return function(){return x.apply(this,arguments)}}();ae()},[K,j,l]),{error:Y,loading:d,SvgIcon:o.current}}var he=function(){var _=g.Z.useApp(),o=_.modal,u=(0,G.$G)(),a=u.t,d=(0,B.useCallback)(function(h){var y=h.onOk,S=h.onCancel;return new Promise(function(Y,M){o.confirm({title:a("common.deleteModalTitle"),icon:(0,H.jsx)(v.Z,{}),okText:a("common.ok"),okType:"danger",cancelText:a("common.cancel"),onOk:function(){return C()(p()().mark(function l(){var ae;return p()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.prev=0,$.next=3,y==null?void 0:y();case 3:ae=$.sent,Y(ae),console.info(ae),$.next=11;break;case 8:$.prev=8,$.t0=$.catch(0),M($.t0);case 11:case"end":return $.stop()}},l,null,[[0,8]])}))()},onCancel:function(){S==null||S()}})})},[a,o]);return d},ne=function(_){return(0,G.$G)("translation",{keyPrefix:_})},b=function(){return useTranslation("translation",{keyPrefix:"common"})}},49468:function(pe,U,n){"use strict";n.d(U,{B3:function(){return B},B4:function(){return he},OB:function(){return H},PE:function(){return G},TO:function(){return ne},W2:function(){return w},Zd:function(){return se},cG:function(){return b},p6:function(){return K},pC:function(){return r},tl:function(){return A},xp:function(){return te}});var V=n(5574),p=n.n(V),c=n(60806),C=n(65400),I=n(62435),f=n(6589),v=n(65534),g=n(25194),r=function(o){var u=(0,I.useCallback)(function(a){return"".concat(c.N,"/document/get/").concat(o||a)},[o]);return u},A=function(o){var u=(0,I.useState)({width:849,height:1200}),a=p()(u,2),d=a[0],h=a[1],y=(0,I.useMemo)(function(){return(0,C.q1)(o,d)},[o,d]),S=function(M,j){h(function(l){return l.height!==j||l.width!==M?{height:j,width:M}:l})};return{highlights:y,setWidthAndHeight:S}},B=function(){var o=(0,v.pE)(),u=o.knowledgeId,a=(0,f.useDispatch)(),d=(0,I.useCallback)(function(){return a({type:"kFModel/getKfList",payload:{kb_id:u}})},[a,u]);return d},G=function(){var o=(0,f.useDispatch)(),u=(0,v.pE)(),a=u.knowledgeId,d=(0,I.useCallback)(function(h,y){o({type:"kFModel/updateDocumentStatus",payload:{doc_id:y,status:Number(h),kb_id:a}})},[o,a]);return d},H=function(){var o=(0,f.useSelector)(function(u){return u.kFModel.data});return o},se=function(){var o=(0,f.useDispatch)(),u=(0,v.pE)(),a=u.knowledgeId,d=(0,I.useCallback)(function(h,y){return o({type:"kFModel/document_rename",payload:{doc_id:h,name:y,kb_id:a}})},[o,a]);return d},w=function(){var o=(0,f.useDispatch)(),u=(0,v.pE)(),a=u.knowledgeId,d=(0,I.useCallback)(function(h){try{return o({type:"kFModel/document_create",payload:{name:h,kb_id:a}})}catch(y){console.log("Failed:",y)}},[o,a]);return d},te=function(){var o=(0,f.useDispatch)(),u=(0,v.pE)(),a=u.knowledgeId,d=(0,I.useCallback)(function(h,y,S){try{return o({type:"kFModel/document_change_parser",payload:{parser_id:h,doc_id:y,kb_id:a,parser_config:S}})}catch(Y){console.log("Failed:",Y)}},[o,a]);return d},he=function(){var o=(0,f.useDispatch)(),u=(0,v.pE)(),a=u.knowledgeId,d=(0,I.useCallback)(function(h){try{return o({type:"kFModel/document_rm",payload:{doc_id:h,kb_id:a}})}catch(y){console.log("Failed:",y)}},[o,a]);return d},ne=function(){var o=(0,f.useDispatch)(),u=(0,v.pE)(),a=u.knowledgeId,d=(0,I.useCallback)(function(h){try{return o({type:"kFModel/upload_document",payload:{fileList:h,kb_id:a}})}catch(y){console.log("Failed:",y)}},[o,a]);return d},b=function(){var o=(0,f.useDispatch)(),u=(0,I.useCallback)(function(a){try{return o({type:"kFModel/document_run",payload:a})}catch(d){console.log("Failed:",d)}},[o]);return u},K=function(){var o=(0,g.q)("kFModel",["document_run"]);return o}},11754:function(pe,U,n){"use strict";n.d(U,{Ju:function(){return o},OR:function(){return K},SL:function(){return he},at:function(){return B},hl:function(){return se},ki:function(){return ne},mT:function(){return H},uZ:function(){return _},ux:function(){return b}});var V=n(97857),p=n.n(V),c=n(9783),C=n.n(c),I=n(5574),f=n.n(I),v=n(96330),g=n(52043),r=n(62435),A=n(6589),B=function(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,h=(0,A.useDispatch)(),y=(0,r.useCallback)(function(){h({type:"settingModel/llm_list",payload:{model_type:a}})},[h,a]);return(0,r.useEffect)(function(){d&&y()},[y,d]),y},G=function(){var a=(0,A.useSelector)(function(d){return d.settingModel.llmInfo});return a},H=function(){var a=G(),d=(0,r.useMemo)(function(){return Object.entries(a).map(function(h){var y=f()(h,2),S=y[0],Y=y[1];return{label:S,options:Y.map(function(M){return{label:M.llm_name,value:M.llm_name,disabled:!M.available}})}})},[a]);return d},se=function(){var a=G(),d=function(y){return Object.entries(a).filter(function(S){var Y=f()(S,2),M=Y[1];return y?M.some(function(j){return j.model_type.includes(y)}):!0}).map(function(S){var Y=f()(S,2),M=Y[0],j=Y[1];return{label:M,options:j.filter(function(l){return y?l.model_type.includes(y):!0}).map(function(l){return{label:l.llm_name,value:l.llm_name,disabled:!l.available}})}})};return C()(C()(C()(C()(C()({},v.Vr.Chat,d(v.Vr.Chat)),v.Vr.Embedding,d(v.Vr.Embedding)),v.Vr.Image2text,d(v.Vr.Image2text)),v.Vr.Speech2text,d(v.Vr.Speech2text)),v.Vr.Rerank,d(v.Vr.Rerank))},w=function(){var a=(0,A.useSelector)(function(d){return d.settingModel.factoryList});return a},te=function(){var a=(0,A.useSelector)(function(d){return d.settingModel.myLlmList});return a},he=function(){var a=(0,A.useDispatch)(),d=w(),h=te(),y=(0,r.useMemo)(function(){var Y=d.filter(function(M){return Object.keys(h).every(function(j){return j!==M.name})});return(0,g.tJ)(Y)},[d,h]),S=(0,r.useCallback)(function(){a({type:"settingModel/factories_list"})},[a]);return(0,r.useEffect)(function(){S()},[S]),y},ne=function(){var a=(0,A.useDispatch)(),d=te(),h=w(),y=(0,r.useMemo)(function(){return Object.entries(d).map(function(Y){var M,j,l=f()(Y,2),ae=l[0],x=l[1];return p()({name:ae,logo:(M=(j=h.find(function($){return $.name===ae}))===null||j===void 0?void 0:j.logo)!==null&&M!==void 0?M:""},x)})},[d,h]),S=(0,r.useCallback)(function(){a({type:"settingModel/my_llm"})},[a]);return(0,r.useEffect)(function(){S()},[S]),y},b=function(){var a=(0,A.useDispatch)(),d=(0,r.useCallback)(function(h){return a({type:"settingModel/set_api_key",payload:h})},[a]);return d},K=function(){var a=(0,A.useDispatch)(),d=(0,r.useCallback)(function(h){return a({type:"settingModel/set_tenant_info",payload:h})},[a]);return d},_=function(){var a=(0,A.useDispatch)(),d=(0,r.useCallback)(function(h){return a({type:"settingModel/add_llm",payload:h})},[a]);return d},o=function(){var a=(0,A.useDispatch)(),d=(0,r.useCallback)(function(h){return a({type:"settingModel/delete_llm",payload:h})},[a]);return d}},38725:function(pe,U,n){"use strict";n.d(U,{$0:function(){return o},H0:function(){return S},IV:function(){return y},Kx:function(){return h},UL:function(){return a},cE:function(){return u},y$:function(){return d}});var V=n(9783),p=n.n(V),c=n(5574),C=n.n(c),I=n(15009),f=n.n(I),v=n(99289),g=n.n(v),r=n(39918),A=n(40169),B=n(60806),G=n(32358),H=n(5121),se=n(24809),w=n(62435),te=n(67421),he=n(6589),ne=n(2039),b=n(49468),K=n(25194),_=n(79495),o=function(M){var j=(0,b.xp)(),l=(0,ne.pG)(),ae=l.visible,x=l.hideModal,$=l.showModal,Ce=(0,K.q)("kFModel",["document_change_parser"]),ce=(0,w.useCallback)(function(){var me=g()(f()().mark(function Be(ke,Fe){var ze;return f()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,j(ke,M,Fe);case 2:ze=ye.sent,ze===0&&x();case 4:case"end":return ye.stop()}},Be)}));return function(Be,ke){return me.apply(this,arguments)}}(),[x,j,M]);return{changeParserLoading:Ce,onChangeParserOk:ce,changeParserVisible:ae,hideChangeParserModal:x,showChangeParserModal:$}},u=function(){var M=(0,w.useState)({}),j=C()(M,2),l=j[0],ae=j[1],x=function(Ce){ae(Ce)};return{currentRecord:l,setRecord:x}},a=function(){var M=(0,te.$G)(),j=M.i18n,l=(0,_.WH)(),ae=function($){j.changeLanguage(A.Kj[$]),l({language:$})};return ae},d=function(M,j,l,ae){var x=(0,ne.qM)("common"),$=x.t,Ce=(0,w.useMemo)(function(){return{showQuickJumper:!0,total:M,showSizeChanger:!0,current:j,pageSize:l,pageSizeOptions:[1,2,10,20,50,100],onChange:ae,showTotal:function(me){return"".concat($("total")," ").concat(me)}}},[$,ae,j,l,M]);return{pagination:Ce}},h=function(M){var j=(0,he.useDispatch)(),l=(0,w.useCallback)(function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,x=arguments.length>1?arguments[1]:void 0,$={current:ae};x&&($.pageSize=x),j({type:"".concat(M,"/setPagination"),payload:$})},[j,M]);return l},y=function(){var M=(0,w.useState)({}),j=C()(M,2),l=j[0],ae=j[1],x=(0,w.useCallback)(g()(f()().mark(function $(){var Ce;return f()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,H.Z.get("/conf.json");case 2:Ce=me.sent,ae(Ce.data);case 4:case"end":return me.stop()}},$)})),[]);return(0,w.useEffect)(function(){x()},[x]),l},S=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B.Z.completeConversation,j=(0,w.useState)({}),l=C()(j,2),ae=l[0],x=l[1],$=(0,w.useState)(!0),Ce=C()($,2),ce=Ce[0],me=Ce[1],Be=(0,w.useCallback)(function(){var ke=g()(f()().mark(function Fe(ze){var Ne,ye,Ke,Qe,Le,P,Te,Ve;return f()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.prev=0,me(!1),_e.next=4,fetch(M,{method:"POST",headers:p()(p()({},r._n,(0,G.c)()),"Content-Type","application/json"),body:JSON.stringify(ze)});case 4:ye=_e.sent,Ke=ye==null||(Ne=ye.body)===null||Ne===void 0?void 0:Ne.pipeThrough(new TextDecoderStream).pipeThrough(new se.m).getReader();case 6:return _e.next=9,Ke==null?void 0:Ke.read();case 9:if(Qe=_e.sent,!Qe){_e.next=16;break}Le=Qe.done,P=Qe.value;try{Te=JSON.parse((P==null?void 0:P.data)||""),Ve=Te==null?void 0:Te.data,typeof Ve!="boolean"&&(console.info("data:",Ve),x(Ve))}catch(rn){console.warn(rn)}if(!Le){_e.next=16;break}return console.info("done"),_e.abrupt("break",18);case 16:_e.next=6;break;case 18:return console.info("done?"),me(!0),_e.abrupt("return",ye);case 23:_e.prev=23,_e.t0=_e.catch(0),me(!0),console.warn(_e.t0);case 27:case"end":return _e.stop()}},Fe,null,[[0,23]])}));return function(Fe){return ke.apply(this,arguments)}}(),[M]);return{send:Be,answer:ae,done:ce}}},65534:function(pe,U,n){"use strict";n.d(U,{HK:function(){return r},Uu:function(){return g},nT:function(){return G},pE:function(){return A},wy:function(){return B}});var V=n(5574),p=n.n(V),c=n(96330),C=n(62435),I=n(6589),f=function(H){return H.Second="2",H.Third="3",H}({}),v=function(se){var w=(0,I.useLocation)(),te=w.pathname,he=te.split("/");return he[se]||""},g=function(){return v(f.Second)},r=function(){return v(f.Third)},A=function(){var se=(0,I.useSearchParams)(),w=p()(se,1),te=w[0];return{documentId:te.get(c.ld.DocumentId)||"",knowledgeId:te.get(c.ld.KnowledgeId)||""}},B=function(){var se=(0,I.useNavigate)();return(0,C.useCallback)(function(w){se(w,{state:{from:w}})},[se])},G=function(){var se=(0,I.useNavigate)(),w=A(),te=w.knowledgeId;return(0,C.useCallback)(function(){se("/knowledge/".concat(c.Rx.Dataset,"?id=").concat(te))},[te,se])}},25194:function(pe,U,n){"use strict";n.d(U,{q:function(){return C}});var V=function(f,v,g){return g.some(function(r){return v["".concat(f,"/").concat(r)]})},p=function(f){return new Promise(function(v){setTimeout(v,f)})},c=n(6589),C=function(f,v){var g=(0,c.useSelector)(function(r){return r.loading.effects});return V(f,g,v)}},79495:function(pe,U,n){"use strict";n.d(U,{Jf:function(){return b},WH:function(){return he},XH:function(){return w},Zl:function(){return H},aU:function(){return te},fS:function(){return se},jd:function(){return B},ml:function(){return G},nv:function(){return ne}});var V=n(5574),p=n.n(V),c=n(15009),C=n.n(c),I=n(99289),f=n.n(I),v=n(85162),g=n(32358),r=n(62435),A=n(6589),B=function(){var _=(0,A.useDispatch)(),o=(0,r.useCallback)(function(){_({type:"settingModel/getUserInfo"})},[_]);(0,r.useEffect)(function(){o()},[o])},G=function(){var _=(0,A.useSelector)(function(o){return o.settingModel.userInfo});return _},H=function(){var _=(0,A.useSelector)(function(o){return o.settingModel.tenantIfo});return _},se=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,o=(0,A.useDispatch)(),u=(0,r.useCallback)(function(){o({type:"settingModel/getTenantInfo"})},[o]);return(0,r.useEffect)(function(){_&&u()},[u,_]),u},w=function(){var _=H(),o=(0,r.useMemo)(function(){var u,a=(u=_==null?void 0:_.parser_ids.split(","))!==null&&u!==void 0?u:[];return a.map(function(d){var h=d.split(":");return{value:h[0],label:h[1]}})},[_]);return o},te=function(){var _=(0,A.useDispatch)(),o=(0,r.useCallback)(f()(C()().mark(function u(){var a;return C()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,_({type:"loginModel/logout"});case 2:a=h.sent,a===0&&(g.Z.removeAll(),A.history.push("/login"));case 4:case"end":return h.stop()}},u)})),[_]);return o},he=function(){var _=(0,A.useDispatch)(),o=(0,r.useCallback)(function(u){return _({type:"settingModel/setting",payload:u})},[_]);return o},ne=function(){var _=(0,r.useState)(""),o=p()(_,2),u=o[0],a=o[1],d=(0,r.useState)(!1),h=p()(d,2),y=h[0],S=h[1],Y=(0,r.useCallback)(f()(C()().mark(function M(){var j,l;return C()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return S(!0),x.next=3,v.Z.getSystemVersion();case 3:j=x.sent,l=j.data,l.retcode===0&&(a(l.data),S(!1));case 6:case"end":return x.stop()}},M)})),[]);return{fetchSystemVersion:Y,version:u,loading:y}},b=function(){var _=(0,r.useState)({}),o=p()(_,2),u=o[0],a=o[1],d=(0,r.useState)(!1),h=p()(d,2),y=h[0],S=h[1],Y=(0,r.useCallback)(f()(C()().mark(function M(){var j,l;return C()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return S(!0),x.next=3,v.Z.getSystemStatus();case 3:j=x.sent,l=j.data,l.retcode===0&&(a(l.data),S(!1));case 6:case"end":return x.stop()}},M)})),[]);return{systemStatus:u,fetchSystemStatus:Y,loading:y}}},58795:function(pe,U,n){"use strict";n.r(U),n.d(U,{default:function(){return $t}});var V=n(9783),p=n.n(V),c=n(62435),C=Object.defineProperty,I=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,g=(T,t,s)=>t in T?C(T,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):T[t]=s,r=(T,t)=>{for(var s in t||(t={}))f.call(t,s)&&g(T,s,t[s]);if(I)for(var s of I(t))v.call(t,s)&&g(T,s,t[s]);return T};const A=T=>c.createElement("svg",r({width:15,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},T),c.createElement("path",{d:"m6.188 12.104.859.478c.165.092.248.138.335.156a.581.581 0 0 0 .236 0c.087-.018.17-.064.335-.156l.86-.478m-5.25-1.458-.833-.462c-.175-.097-.262-.146-.326-.215a.583.583 0 0 1-.125-.212c-.029-.09-.029-.19-.029-.39V8.46m0-2.917v-.91c0-.199 0-.299.03-.388a.583.583 0 0 1 .124-.212c.064-.07.151-.118.326-.215l.833-.463m2.624-1.458.86-.477c.165-.092.248-.138.335-.156a.583.583 0 0 1 .236 0c.087.018.17.064.335.156l.86.477m2.624 1.458.833.463c.175.097.262.146.326.215a.584.584 0 0 1 .125.212c.029.089.029.189.029.389v.909m0 2.917v.909c0 .2 0 .3-.03.389a.584.584 0 0 1-.124.212c-.064.07-.151.118-.326.215l-.832.462m-5.25-4.375 1.312.73m0 0 1.313-.73m-1.313.73v1.458M2.25 4.084l1.313.729m7.874 0 1.313-.73M7.5 11.376v1.459",stroke:"#A5A3A9",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}));var B="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYuMTg4IDEyLjEwNC44NTkuNDc4Yy4xNjUuMDkyLjI0OC4xMzguMzM1LjE1NmEuNTgxLjU4MSAwIDAgMCAuMjM2IDBjLjA4Ny0uMDE4LjE3LS4wNjQuMzM1LS4xNTZsLjg2LS40NzhtLTUuMjUtMS40NTgtLjgzMy0uNDYyYy0uMTc1LS4wOTctLjI2Mi0uMTQ2LS4zMjYtLjIxNWEuNTgzLjU4MyAwIDAgMS0uMTI1LS4yMTJjLS4wMjktLjA5LS4wMjktLjE5LS4wMjktLjM5VjguNDZtMC0yLjkxN3YtLjkxYzAtLjE5OSAwLS4yOTkuMDMtLjM4OGEuNTgzLjU4MyAwIDAgMSAuMTI0LS4yMTJjLjA2NC0uMDcuMTUxLS4xMTguMzI2LS4yMTVsLjgzMy0uNDYzbTIuNjI0LTEuNDU4Ljg2LS40NzdjLjE2NS0uMDkyLjI0OC0uMTM4LjMzNS0uMTU2YS41ODMuNTgzIDAgMCAxIC4yMzYgMGMuMDg3LjAxOC4xNy4wNjQuMzM1LjE1NmwuODYuNDc3bTIuNjI0IDEuNDU4LjgzMy40NjNjLjE3NS4wOTcuMjYyLjE0Ni4zMjYuMjE1YS41ODQuNTg0IDAgMCAxIC4xMjUuMjEyYy4wMjkuMDg5LjAyOS4xODkuMDI5LjM4OXYuOTA5bTAgMi45MTd2LjkwOWMwIC4yIDAgLjMtLjAzLjM4OWEuNTg0LjU4NCAwIDAgMS0uMTI0LjIxMmMtLjA2NC4wNy0uMTUxLjExOC0uMzI2LjIxNWwtLjgzMi40NjJtLTUuMjUtNC4zNzUgMS4zMTIuNzNtMCAwIDEuMzEzLS43M20tMS4zMTMuNzN2MS40NThNMi4yNSA0LjA4NGwxLjMxMy43MjltNy44NzQgMCAxLjMxMy0uNzNNNy41IDExLjM3NnYxLjQ1OSIgc3Ryb2tlPSIjQTVBM0E5IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+",G=n(89545),H=n(24969),se=n(86548),w=n(48689),te=n(70125),he=n(22850),ne=n(42075),b=n(86250),K=n(15867),_=n(96074),o=n(75081),u=n(4393),a=n(7134),d=n(85418),h=n(66309),y=n(93967),S=n.n(y),Y=n(15009),M=n.n(Y),j=n(97857),l=n.n(j),ae=n(19632),x=n.n(ae),$=n(99289),Ce=n.n($),ce=n(5574),me=n.n(ce),Be=Object.defineProperty,ke=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Ne=(T,t,s)=>t in T?Be(T,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):T[t]=s,ye=(T,t)=>{for(var s in t||(t={}))Fe.call(t,s)&&Ne(T,s,t[s]);if(ke)for(var s of ke(t))ze.call(t,s)&&Ne(T,s,t[s]);return T};const Ke=T=>c.createElement("svg",ye({width:52,height:52,fill:"none",xmlns:"http://www.w3.org/2000/svg"},T),c.createElement("g",{filter:"url(#chat-configuration-atom_svg__a)"},c.createElement("path",{d:"M2.5 11A9.5 9.5 0 0 1 12 1.5h28a9.5 9.5 0 0 1 9.5 9.5v28a9.5 9.5 0 0 1-9.5 9.5H12A9.5 9.5 0 0 1 2.5 39V11Z",stroke:"#EAECF0",shapeRendering:"crispEdges"}),c.createElement("path",{d:"M26 25h.01m3.525 3.535c-4.686 4.686-10.068 6.903-12.02 4.95-1.953-1.953.263-7.335 4.949-12.02 4.686-4.687 10.068-6.903 12.02-4.95 1.953 1.952-.263 7.334-4.949 12.02Zm0-7.071c4.686 4.686 6.902 10.068 4.95 12.02-1.953 1.953-7.335-.263-12.021-4.949-4.686-4.686-6.902-10.068-4.95-12.02 1.953-1.953 7.335.263 12.021 4.949ZM26.5 25a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",stroke:"#344054",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),c.createElement("defs",null,c.createElement("filter",{id:"chat-configuration-atom_svg__a",x:0,y:0,width:52,height:52,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},c.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),c.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feOffset",{dy:1}),c.createElement("feGaussianBlur",{stdDeviation:1}),c.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),c.createElement("feColorMatrix",{values:"0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.05 0"}),c.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_550_8026"}),c.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_550_8026",result:"shape"}))));var Qe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsdGVyPSJ1cmwoI2EpIj48cGF0aCBkPSJNMi41IDExQTkuNSA5LjUgMCAwIDEgMTIgMS41aDI4YTkuNSA5LjUgMCAwIDEgOS41IDkuNXYyOGE5LjUgOS41IDAgMCAxLTkuNSA5LjVIMTJBOS41IDkuNSAwIDAgMSAyLjUgMzlWMTFaIiBzdHJva2U9IiNFQUVDRjAiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwYXRoIGQ9Ik0yNiAyNWguMDFtMy41MjUgMy41MzVjLTQuNjg2IDQuNjg2LTEwLjA2OCA2LjkwMy0xMi4wMiA0Ljk1LTEuOTUzLTEuOTUzLjI2My03LjMzNSA0Ljk0OS0xMi4wMiA0LjY4Ni00LjY4NyAxMC4wNjgtNi45MDMgMTIuMDItNC45NSAxLjk1MyAxLjk1Mi0uMjYzIDcuMzM0LTQuOTQ5IDEyLjAyWm0wLTcuMDcxYzQuNjg2IDQuNjg2IDYuOTAyIDEwLjA2OCA0Ljk1IDEyLjAyLTEuOTUzIDEuOTUzLTcuMzM1LS4yNjMtMTIuMDIxLTQuOTQ5LTQuNjg2LTQuNjg2LTYuOTAyLTEwLjA2OC00Ljk1LTEyLjAyIDEuOTUzLTEuOTUzIDcuMzM1LjI2MyAxMi4wMjEgNC45NDlaTTI2LjUgMjVhLjUuNSAwIDEgMS0xIDAgLjUuNSAwIDAgMSAxIDBaIiBzdHJva2U9IiMzNDQwNTQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9nPjxkZWZzPjxmaWx0ZXIgaWQ9ImEiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSI1MiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPjxmZU9mZnNldCBkeT0iMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiLz48ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz48ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC4wNjI3NDUxIDAgMCAwIDAgMC4wOTQxMTc2IDAgMCAwIDAgMC4xNTY4NjMgMCAwIDAgMC4wNSAwIi8+PGZlQmxlbmQgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzU1MF84MDI2Ii8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzU1MF84MDI2IiByZXN1bHQ9InNoYXBlIi8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPg==",Le=n(96330),P=n(99859),Te=n(85576),Ve=n(92783),cn=n(68929),_e=n.n(cn),rn=n(57557),Pn=n.n(rn),sn=n(90104),mn=n(35293),_n=n(82182),Ge=n(79531),Sn=n(31365),qe=n(20652),Ue=n(72269),De=n(2039),ve={chatConfigurationDescription:"chatConfigurationDescription___Marto",variableContainer:"variableContainer___Y8OCn",variableAlign:"variableAlign___V0wtR",variableLabel:"variableLabel___lux8o",variableIcon:"variableIcon___aAfD2",variableTable:"variableTable___q3ddB",editableRow:"editableRow____LyFZ",segmentedHidden:"segmentedHidden___jWNN7",sliderInputNumber:"sliderInputNumber___cS3d6",variableSlider:"variableSlider___l0sWn"},e=n(86074),Ln=function(t){var s=t.show,D=(0,_n.VJ)(!0),m=D.list,Z=m.map(function(L){return{label:L.name,value:L.id}}),E=(0,De.qM)("chat"),i=E.t,F=function(O){return Array.isArray(O)?O:O==null?void 0:O.fileList},Q=(0,e.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[(0,e.jsx)(H.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:i("upload",{keyPrefix:"common"})})]});return(0,e.jsxs)("section",{className:S()(p()({},ve.segmentedHidden,!s)),children:[(0,e.jsx)(P.Z.Item,{name:"name",label:i("assistantName"),rules:[{required:!0,message:i("assistantNameMessage")}],children:(0,e.jsx)(Ge.Z,{placeholder:i("namePlaceholder")})}),(0,e.jsx)(P.Z.Item,{name:"icon",label:i("assistantAvatar"),valuePropName:"fileList",getValueFromEvent:F,children:(0,e.jsx)(Sn.Z,{listType:"picture-card",maxCount:1,showUploadList:{showPreviewIcon:!1,showRemoveIcon:!1},children:s?Q:null})}),(0,e.jsx)(P.Z.Item,{name:"language",label:i("language"),initialValue:"English",tooltip:"coming soon",style:{display:"none"},children:(0,e.jsx)(qe.Z,{options:[{value:"Chinese",label:i("chinese",{keyPrefix:"common"})},{value:"English",label:i("english",{keyPrefix:"common"})}]})}),(0,e.jsx)(P.Z.Item,{name:["prompt_config","empty_response"],label:i("emptyResponse"),tooltip:i("emptyResponseTip"),children:(0,e.jsx)(Ge.Z,{placeholder:""})}),(0,e.jsx)(P.Z.Item,{name:["prompt_config","prologue"],label:i("setAnOpener"),tooltip:i("setAnOpenerTip"),initialValue:i("setAnOpenerInitial"),children:(0,e.jsx)(Ge.Z.TextArea,{autoSize:{minRows:5}})}),(0,e.jsx)(P.Z.Item,{label:i("quote"),valuePropName:"checked",name:["prompt_config","quote"],tooltip:i("quoteTip"),initialValue:!0,children:(0,e.jsx)(Ue.Z,{})}),(0,e.jsx)(P.Z.Item,{label:i("knowledgeBases"),name:"kb_ids",tooltip:i("knowledgeBasesTip"),rules:[{required:!0,message:i("knowledgeBasesMessage"),type:"array"}],children:(0,e.jsx)(qe.Z,{mode:"multiple",options:Z,placeholder:i("knowledgeBasesMessage")})})]})},Tn=Ln,vn=n(11754),on=n(79495),On=function(t){var s,D=(0,on.fS)(!1),m=(0,on.Zl)();return(0,c.useEffect)(function(){t&&D()},[t,D]),(s=m==null?void 0:m.llm_id)!==null&&s!==void 0?s:""},An=function(t){var s=(0,vn.at)();(0,c.useEffect)(function(){t&&s()},[s,t])},He=n(71338),Je=n(48928),wn=function(t){var s=t.show,D=t.form,m=t.initialLlmSetting,Z=t.visible,E=(0,De.qM)("chat"),i=E.t,F=Object.values(Le.oQ).map(function(O){return{label:i(_e()(O)),value:O}}),Q=(0,vn.hl)(),L=function(N){var k=Le.S8[N];D.setFieldsValue({llm_setting:k})};return(0,c.useEffect)(function(){if(Z){var O=Object.keys(sn.vv).reduce(function(N,k){return N[k]=m===void 0?!0:!!m[sn.vv[k]],N},{});D.setFieldsValue(O)}},[D,m,Z]),(0,e.jsxs)("section",{className:S()(p()({},ve.segmentedHidden,!s)),children:[(0,e.jsx)(P.Z.Item,{label:i("model"),name:"llm_id",tooltip:i("modelTip"),rules:[{required:!0,message:i("modelMessage")}],children:(0,e.jsx)(qe.Z,{options:Q[Le.Vr.Chat],showSearch:!0})}),(0,e.jsx)(_.Z,{}),(0,e.jsx)(P.Z.Item,{label:i("freedom"),name:"parameters",tooltip:i("freedomTip"),initialValue:Le.oQ.Precise,children:(0,e.jsx)(qe.Z,{options:F,onChange:L})}),(0,e.jsx)(P.Z.Item,{label:i("temperature"),tooltip:i("temperatureTip"),children:(0,e.jsxs)(b.Z,{gap:20,align:"center",children:[(0,e.jsx)(P.Z.Item,{name:"temperatureEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Ue.Z,{size:"small"})}),(0,e.jsx)(P.Z.Item,{noStyle:!0,dependencies:["temperatureEnabled"],children:function(N){var k=N.getFieldValue,R=!k("temperatureEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b.Z,{flex:1,children:(0,e.jsx)(P.Z.Item,{name:["llm_setting","temperature"],noStyle:!0,children:(0,e.jsx)(He.Z,{className:ve.variableSlider,max:1,step:.01,disabled:R})})}),(0,e.jsx)(P.Z.Item,{name:["llm_setting","temperature"],noStyle:!0,children:(0,e.jsx)(Je.Z,{className:ve.sliderInputNumber,max:1,min:0,step:.01,disabled:R})})]})}})]})}),(0,e.jsx)(P.Z.Item,{label:i("topP"),tooltip:i("topPTip"),children:(0,e.jsxs)(b.Z,{gap:20,align:"center",children:[(0,e.jsx)(P.Z.Item,{name:"topPEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Ue.Z,{size:"small"})}),(0,e.jsx)(P.Z.Item,{noStyle:!0,dependencies:["topPEnabled"],children:function(N){var k=N.getFieldValue,R=!k("topPEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b.Z,{flex:1,children:(0,e.jsx)(P.Z.Item,{name:["llm_setting","top_p"],noStyle:!0,children:(0,e.jsx)(He.Z,{className:ve.variableSlider,max:1,step:.01,disabled:R})})}),(0,e.jsx)(P.Z.Item,{name:["llm_setting","top_p"],noStyle:!0,children:(0,e.jsx)(Je.Z,{className:ve.sliderInputNumber,max:1,min:0,step:.01,disabled:R})})]})}})]})}),(0,e.jsx)(P.Z.Item,{label:i("presencePenalty"),tooltip:i("presencePenaltyTip"),children:(0,e.jsxs)(b.Z,{gap:20,align:"center",children:[(0,e.jsx)(P.Z.Item,{name:"presencePenaltyEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Ue.Z,{size:"small"})}),(0,e.jsx)(P.Z.Item,{noStyle:!0,dependencies:["presencePenaltyEnabled"],children:function(N){var k=N.getFieldValue,R=!k("presencePenaltyEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b.Z,{flex:1,children:(0,e.jsx)(P.Z.Item,{name:["llm_setting","presence_penalty"],noStyle:!0,children:(0,e.jsx)(He.Z,{className:ve.variableSlider,max:1,step:.01,disabled:R})})}),(0,e.jsx)(P.Z.Item,{name:["llm_setting","presence_penalty"],noStyle:!0,children:(0,e.jsx)(Je.Z,{className:ve.sliderInputNumber,max:1,min:0,step:.01,disabled:R})})]})}})]})}),(0,e.jsx)(P.Z.Item,{label:i("frequencyPenalty"),tooltip:i("frequencyPenaltyTip"),children:(0,e.jsxs)(b.Z,{gap:20,align:"center",children:[(0,e.jsx)(P.Z.Item,{name:"frequencyPenaltyEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Ue.Z,{size:"small"})}),(0,e.jsx)(P.Z.Item,{noStyle:!0,dependencies:["frequencyPenaltyEnabled"],children:function(N){var k=N.getFieldValue,R=!k("frequencyPenaltyEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b.Z,{flex:1,children:(0,e.jsx)(P.Z.Item,{name:["llm_setting","frequency_penalty"],noStyle:!0,children:(0,e.jsx)(He.Z,{className:ve.variableSlider,max:1,step:.01,disabled:R})})}),(0,e.jsx)(P.Z.Item,{name:["llm_setting","frequency_penalty"],noStyle:!0,children:(0,e.jsx)(Je.Z,{className:ve.sliderInputNumber,max:1,min:0,step:.01,disabled:R})})]})}})]})}),(0,e.jsx)(P.Z.Item,{label:i("maxTokens"),tooltip:i("maxTokensTip"),children:(0,e.jsxs)(b.Z,{gap:20,align:"center",children:[(0,e.jsx)(P.Z.Item,{name:"maxTokensEnabled",valuePropName:"checked",noStyle:!0,children:(0,e.jsx)(Ue.Z,{size:"small"})}),(0,e.jsx)(P.Z.Item,{noStyle:!0,dependencies:["maxTokensEnabled"],children:function(N){var k=N.getFieldValue,R=!k("maxTokensEnabled");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b.Z,{flex:1,children:(0,e.jsx)(P.Z.Item,{name:["llm_setting","max_tokens"],noStyle:!0,children:(0,e.jsx)(He.Z,{className:ve.variableSlider,max:2048,disabled:R})})}),(0,e.jsx)(P.Z.Item,{name:["llm_setting","max_tokens"],noStyle:!0,children:(0,e.jsx)(Je.Z,{disabled:R,className:ve.sliderInputNumber,max:2048,min:0})})]})}})]})})]})},Zn=wn,kn=n(32739),Nn=n(25035),hn=n(71230),en=n(15746),fn=n(83062),gn=n(62337),Un=n(57632),Rn=n(13769),ln=n.n(Rn),Wn=["index"],Bn=["title","editable","children","dataIndex","record","handleSave"],pn=c.createContext(null),Fn=function(t){var s=t.index,D=ln()(t,Wn),m=P.Z.useForm(),Z=me()(m,1),E=Z[0];return(0,e.jsx)(P.Z,{form:E,component:!1,children:(0,e.jsx)(pn.Provider,{value:E,children:(0,e.jsx)("tr",l()({},D))})})},zn=function(t){var s=t.title,D=t.editable,m=t.children,Z=t.dataIndex,E=t.record,i=t.handleSave,F=ln()(t,Bn),Q=(0,c.useState)(!1),L=me()(Q,2),O=L[0],N=L[1],k=(0,c.useRef)(null),R=(0,c.useContext)(pn);(0,c.useEffect)(function(){O&&k.current.focus()},[O]);var ue=function(){N(!O),R.setFieldsValue(p()({},Z,E[Z]))},ee=function(){var J=Ce()(M()().mark(function X(){var z;return M()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,re.next=3,R.validateFields();case 3:z=re.sent,ue(),i(l()(l()({},E),z)),re.next=11;break;case 8:re.prev=8,re.t0=re.catch(0),console.log("Save failed:",re.t0);case 11:case"end":return re.stop()}},X,null,[[0,8]])}));return function(){return J.apply(this,arguments)}}(),W=m;return D&&(W=O?(0,e.jsx)(P.Z.Item,{style:{margin:0},name:Z,rules:[{required:!0,message:"".concat(s," is required.")}],children:(0,e.jsx)(Ge.Z,{ref:k,onPressEnter:ee,onBlur:ee})}):(0,e.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:ue,children:m})),(0,e.jsx)("td",l()(l()({},F),{},{children:W}))},Kn=n(77567),oe=n(41923),Vn=function(t,s){var D=t.show,m=(0,c.useState)([]),Z=me()(m,2),E=Z[0],i=Z[1],F=(0,oe.GI)(),Q=(0,De.qM)("chat"),L=Q.t,O={body:{row:Fn,cell:zn}},N=function(J){return function(){var X=E.filter(function(z){return z.key!==J});i(X)}},k=function(J){var X=x()(E),z=X.findIndex(function(re){return J.key===re.key}),fe=X[z];X.splice(z,1,l()(l()({},fe),J)),i(X)},R=function(){i(function(J){return[].concat(x()(J),[{key:(0,Un.Z)(),variable:"",optional:!0}])})},ue=function(J){return function(X){var z=x()(E),fe=z.findIndex(function(Ie){return J.key===Ie.key}),re=z[fe];z.splice(fe,1,l()(l()({},re),{},{optional:X})),i(z)}};(0,c.useImperativeHandle)(s,function(){return E.filter(function(W){return W.variable.trim()!==""}).map(function(W){return{key:W.variable,optional:W.optional}})},[E]);var ee=[{title:L("key"),dataIndex:"variable",key:"variable",onCell:function(J){return{record:J,editable:!0,dataIndex:"variable",title:"key",handleSave:k}}},{title:L("optional"),dataIndex:"optional",key:"optional",width:40,align:"center",render:function(J,X){return(0,e.jsx)(Ue.Z,{size:"small",checked:J,onChange:ue(X)})}},{title:L("operation"),dataIndex:"operation",width:30,key:"operation",align:"center",render:function(J,X){return(0,e.jsx)(w.Z,{onClick:N(X.key)})}}];return(0,c.useEffect)(function(){i(F)},[F]),(0,e.jsxs)("section",{className:S()(p()({},ve.segmentedHidden,!D)),children:[(0,e.jsx)(P.Z.Item,{label:L("system"),rules:[{required:!0,message:L("systemMessage")}],tooltip:L("systemTip"),name:["prompt_config","system"],initialValue:L("systemInitialValue"),children:(0,e.jsx)(Ge.Z.TextArea,{autoSize:{maxRows:8,minRows:5}})}),(0,e.jsx)(_.Z,{}),(0,e.jsx)(kn.Z,{isTooltipShown:!0}),(0,e.jsx)(P.Z.Item,{label:L("topN"),name:"top_n",initialValue:8,tooltip:L("topNTip"),children:(0,e.jsx)(He.Z,{max:30})}),(0,e.jsx)(Kn.Z,{}),(0,e.jsxs)("section",{className:S()(ve.variableContainer),children:[(0,e.jsxs)(hn.Z,{align:"middle",justify:"end",children:[(0,e.jsx)(en.Z,{span:9,className:ve.variableAlign,children:(0,e.jsxs)("label",{className:ve.variableLabel,children:[L("variable"),(0,e.jsx)(fn.Z,{title:L("variableTip"),children:(0,e.jsx)(Nn.Z,{className:ve.variableIcon})})]})}),(0,e.jsx)(en.Z,{span:15,className:ve.variableAlign,children:(0,e.jsx)(K.ZP,{size:"small",onClick:R,children:L("add")})})]}),E.length>0&&(0,e.jsxs)(hn.Z,{children:[(0,e.jsx)(en.Z,{span:7,children:" "}),(0,e.jsx)(en.Z,{span:17,children:(0,e.jsx)(gn.Z,{dataSource:E,columns:ee,rowKey:"key",className:ve.variableTable,components:O,rowClassName:function(){return ve.editableRow}})})]})]})]})},Gn=(0,c.forwardRef)(Vn),Hn={labelCol:{span:9},wrapperCol:{span:15}},$n={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},Ae=function(T){return T.AssistantSetting="Assistant Setting",T.PromptEngine="Prompt Engine",T.ModelSetting="Model Setting",T}(Ae||{}),Yn=p()(p()(p()({},Ae.AssistantSetting,Tn),Ae.ModelSetting,Zn),Ae.PromptEngine,Gn),Qn=function(t){var s=t.visible,D=t.hideModal,m=t.initialDialog,Z=t.loading,E=t.onOk,i=t.clearDialog,F=P.Z.useForm(),Q=me()(F,1),L=Q[0],O=(0,c.useState)(Ae.AssistantSetting),N=me()(O,2),k=N[0],R=N[1],ue=(0,c.useRef)([]),ee=On(s),W=(0,De.qM)("chat"),J=W.t,X=function(){var ie=Ce()(M()().mark(function je(){var Me,xe,Se,Oe,Ye,Pe,tn,an;return M()().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,L.validateFields();case 2:Se=Re.sent,Oe=Pn()(Se,[].concat(x()(Object.keys(sn.vv)),["parameters"],x()((0,mn.kP)(Se)))),Ye=(Me=(xe=Oe.prompt_config)===null||xe===void 0?void 0:xe.empty_response)!==null&&Me!==void 0?Me:"",Pe=Se.icon,Array.isArray(Pe)&&Pe.length>0&&(tn=Pe[0].thumbUrl),an=l()(l()({dialog_id:m.id},Oe),{},{vector_similarity_weight:1-Oe.vector_similarity_weight,prompt_config:l()(l()({},Oe.prompt_config),{},{parameters:ue.current,empty_response:Ye}),icon:tn}),E(an);case 9:case"end":return Re.stop()}},je)}));return function(){return ie.apply(this,arguments)}}(),z=function(){D()},fe=function(je){R(je)},re=function(){i(),L.resetFields()};An(s);var Ie=(0,e.jsxs)(b.Z,{gap:16,children:[(0,e.jsx)(Ke,{}),(0,e.jsxs)("div",{children:[(0,e.jsx)("b",{children:J("chatConfiguration")}),(0,e.jsx)("div",{className:ve.chatConfigurationDescription,children:J("chatConfigurationDescription")})]})]});return(0,c.useEffect)(function(){if(s){var ie,je,Me,xe=m.icon,Se=[];xe&&(Se=[{uid:"1",name:"file",thumbUrl:xe,status:"done"}]),L.setFieldsValue(l()(l()({},m),{},{llm_setting:(ie=m.llm_setting)!==null&&ie!==void 0?ie:Le.S8[Le.oQ.Precise],icon:Se,llm_id:(je=m.llm_id)!==null&&je!==void 0?je:ee,vector_similarity_weight:1-((Me=m.vector_similarity_weight)!==null&&Me!==void 0?Me:.3)}))}},[m,L,s,ee]),(0,e.jsxs)(Te.Z,{title:Ie,width:688,open:s,onOk:X,onCancel:z,confirmLoading:Z,destroyOnClose:!0,afterClose:re,children:[(0,e.jsx)(Ve.Z,{size:"large",value:k,onChange:fe,options:Object.values(Ae).map(function(ie){return{label:J(_e()(ie)),value:ie}}),block:!0}),(0,e.jsx)(_.Z,{}),(0,e.jsx)(P.Z,l()(l()({},Hn),{},{name:"nest-messages",form:L,style:{maxWidth:600},validateMessages:$n,colon:!1,children:Object.entries(Yn).map(function(ie){var je=me()(ie,2),Me=je[0],xe=je[1];return(0,e.jsx)(xe,l()(l()({show:Me===k,form:L},Me===Ae.ModelSetting?{initialLlmSetting:m.llm_setting,visible:s}:{}),Me===Ae.PromptEngine?{ref:ue}:{}),Me)})}))]})},Jn=Qn,Xn=n(88964),qn=n(18334),un=n(49468),et=n(21687),Xe=n(49723),nt=n(4772),tt=n(96449),at={documentContainer:"documentContainer___kWzt7"},rt=function(t){var s=t.comment;return s.text?(0,e.jsxs)("div",{className:"Highlight__popup",children:[s.emoji," ",s.text]}):null},st=function(t){var s=t.chunk,D=t.documentId,m=t.visible,Z=(0,un.pC)(D),E=(0,un.tl)(s),i=E.highlights,F=E.setWidthAndHeight,Q=(0,c.useRef)(function(){}),L=(0,c.useState)(!1),O=me()(L,2),N=O[0],k=O[1],R=Z(),ue=(0,tt.s)(R),ee=function(){};return(0,c.useEffect)(function(){k(m)},[m]),(0,c.useEffect)(function(){i.length>0&&N&&(k(!1),Q.current(i[0]))},[i,N]),(0,e.jsx)("div",{className:at.documentContainer,children:(0,e.jsx)(Xe.Hz,{url:R,beforeLoad:(0,e.jsx)(et.Z,{active:!0}),workerSrc:"/pdfjs-dist/pdf.worker.min.js",errorMessage:(0,e.jsx)(nt.Z,{children:ue}),children:function(J){return J.getPage(1).then(function(X){var z=X.getViewport({scale:1}),fe=z.width,re=z.height;F(fe,re)}),(0,e.jsx)(Xe.Nb,{pdfDocument:J,enableAreaSelection:function(z){return z.altKey},onScrollChange:ee,scrollRef:function(z){Q.current=z,k(!0)},onSelectionFinished:function(){return null},highlightTransform:function(z,fe,re,Ie,ie,je,Me){var xe=!(z.content&&z.content.image),Se=xe?(0,e.jsx)(Xe.y$,{isScrolledTo:Me,position:z.position,comment:z.comment}):(0,e.jsx)(Xe.PD,{isScrolledTo:Me,highlight:z,onChange:function(){}});return(0,e.jsx)(Xe.GI,{popupContent:(0,e.jsx)(rt,l()({},z)),onMouseOver:function(Ye){return re(z,function(){return Ye})},onMouseOut:Ie,children:Se},fe)},highlights:i})}})})},ot=st,we=n(1079),jn=n(2487),it=n(85265),lt=n(46008),ut=n(46693),Mn=n(65400),be={chatContainer:"chatContainer___KnZy3",messageContainer:"messageContainer___HpbDk",messageItem:"messageItem___Ygyfi",messageItemSection:"messageItemSection___iLh5D",messageItemSectionLeft:"messageItemSectionLeft___kvNNH",messageItemSectionRight:"messageItemSectionRight___VZFy0",messageItemContent:"messageItemContent___xlt0U",messageItemContentReverse:"messageItemContentReverse___aD08i",messageText:"messageText___JiiCK",messageEmpty:"messageEmpty___uvA1b",thumbnailImg:"thumbnailImg___q5qBr",messageItemLeft:"messageItemLeft___o3kLO",messageItemRight:"messageItemRight___pLPv7"},dt=function(t){var s,D=t.item,m=t.reference,Z=t.loading,E=Z===void 0?!1:Z,i=t.clickDocumentButton,F=(0,on.ml)(),Q=(0,_n.l5)(),L=(0,un.pC)(),O=(0,De.qM)("chat"),N=O.t,k=D.role===we.C.Assistant,R=(0,c.useMemo)(function(){var ee;return(ee=m==null?void 0:m.doc_aggs)!==null&&ee!==void 0?ee:[]},[m==null?void 0:m.doc_aggs]),ue=(0,c.useMemo)(function(){var ee,W=D.content;return W===""&&(W=N("searching")),E?(ee=W)===null||ee===void 0?void 0:ee.concat("~~2$$"):W},[D.content,E,N]);return(0,e.jsx)("div",{className:S()(be.messageItem,p()(p()({},be.messageItemLeft,D.role===we.C.Assistant),be.messageItemRight,D.role===we.C.User)),children:(0,e.jsx)("section",{className:S()(be.messageItemSection,p()(p()({},be.messageItemSectionLeft,D.role===we.C.Assistant),be.messageItemSectionRight,D.role===we.C.User)),children:(0,e.jsxs)("div",{className:S()(be.messageItemContent,p()({},be.messageItemContentReverse,D.role===we.C.User)),children:[D.role===we.C.User?(0,e.jsx)(a.C,{size:40,src:(s=F.avatar)!==null&&s!==void 0?s:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}):(0,e.jsx)(Xn.r,{}),(0,e.jsxs)(b.Z,{vertical:!0,gap:8,flex:1,children:[(0,e.jsx)("b",{children:k?"":F.nickname}),(0,e.jsx)("div",{className:be.messageText,children:(0,e.jsx)(lt.Z,{content:ue,reference:m,clickDocumentButton:i})}),k&&R.length>0&&(0,e.jsx)(jn.Z,{bordered:!0,dataSource:R,renderItem:function(W){var J=Q[W.doc_id],X=(0,Mn.RT)(W.doc_name);return(0,e.jsx)(jn.Z.Item,{children:(0,e.jsxs)(b.Z,{gap:"small",align:"center",children:[J?(0,e.jsx)("img",{src:J,className:be.thumbnailImg}):(0,e.jsx)(ut.Z,{name:"file-icon/".concat(X),width:24}),(0,e.jsx)(qn.Z,{link:L(W.doc_id),preventDefault:!(0,Mn.Ze)(W.doc_name),children:W.doc_name})]})})}})]})]})})})},ct=function(){var t,s=(0,oe.Q5)(),D=s.ref,m=s.currentConversation,Z=s.addNewestConversation,E=s.removeLatestMessage,i=s.addNewestAnswer,F=(0,oe.$3)(m,Z,E,i),Q=F.handleInputChange,L=F.handlePressEnter,O=F.value,N=F.loading,k=(0,oe.Bh)(),R=k.visible,ue=k.hideModal,ee=k.documentId,W=k.selectedChunk,J=k.clickDocumentButton,X=(0,oe.lT)();(0,oe.G8)();var z=(0,oe.k9)(),fe=(0,De.qM)("chat"),re=fe.t;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(b.Z,{flex:1,className:be.chatContainer,vertical:!0,children:[(0,e.jsxs)(b.Z,{flex:1,vertical:!0,className:be.messageContainer,children:[(0,e.jsx)("div",{children:(0,e.jsx)(o.Z,{spinning:z,children:m==null||(t=m.message)===null||t===void 0?void 0:t.map(function(Ie,ie){return(0,e.jsx)(dt,{loading:Ie.role===we.C.Assistant&&N&&(m==null?void 0:m.message.length)-1===ie,item:Ie,reference:(0,mn.oI)(m,Ie),clickDocumentButton:J},Ie.id)})})}),(0,e.jsx)("div",{ref:D})]}),(0,e.jsx)(Ge.Z,{size:"large",placeholder:re("sendPlaceholder"),value:O,disabled:X,suffix:(0,e.jsx)(K.ZP,{type:"primary",onClick:L,loading:N,disabled:X,children:re("send")}),onPressEnter:L,onChange:Q})]}),(0,e.jsx)(it.Z,{title:"Document Previewer",onClose:ue,open:R,width:"50vw",children:(0,e.jsx)(ot,{documentId:ee,chunk:W,visible:R})})]})},mt=ct,_t=n(38725),vt=n(29009),ht=n(77180),ft=n(14195),gt=n(3023),pt=n(75358),jt=n(26050),Mt=n(33558),Et=n(56880),ga=[{name:"Page A",uv:4e3,pv:2400},{name:"Page B",uv:3e3,pv:1398},{name:"Page C",uv:2e3,pv:9800},{name:"Page D",uv:2780,pv:3908},{name:"Page E",uv:1890,pv:4800},{name:"Page F",uv:2390,pv:3800},{name:"Page G",uv:3490,pv:4300}],Ct=function(t){var s=t.data,D=t.showLegend,m=D===void 0?!1:D;return(0,e.jsx)(vt.h,{width:"100%",height:"100%",children:(0,e.jsxs)(ht.w,{data:s,margin:{},children:[(0,e.jsx)(ft.q,{strokeDasharray:"3 3"}),(0,e.jsx)(gt.K,{dataKey:"xAxis"}),(0,e.jsx)(pt.B,{}),(0,e.jsx)(jt.u,{}),m&&(0,e.jsx)(Mt.D,{}),(0,e.jsx)(Et.x,{type:"monotone",dataKey:"yAxis",stroke:"#8884d8",activeDot:{r:8}})]})})},Dt=Ct,En=n(28382),It=n(68259),yt=n(27484),bt=n.n(yt),xt=n(63606),Pt=n(57132),St=n(74855),Lt=function(t){var s=t.text,D=(0,c.useState)(!1),m=me()(D,2),Z=m[0],E=m[1],i=(0,De.qM)("common"),F=i.t,Q=function(){E(!0),setTimeout(function(){E(!1)},2e3)};return(0,e.jsx)(fn.Z,{title:F(Z?"copied":"copy"),children:(0,e.jsx)(St.CopyToClipboard,{text:s,onCopy:Q,children:Z?(0,e.jsx)(xt.Z,{}):(0,e.jsx)(Pt.Z,{})})})},Cn=Lt,Tt=function(t){var s=t.visible,D=t.dialogId,m=t.hideModal,Z=(0,oe.r6)(s,D),E=Z.createToken,i=Z.removeToken,F=Z.tokenList,Q=Z.listLoading,L=Z.creatingLoading,O=(0,De.qM)("chat"),N=O.t,k=[{title:"Token",dataIndex:"token",key:"token",render:function(ue){return(0,e.jsx)("a",{children:ue})}},{title:N("created"),dataIndex:"create_date",key:"create_date",render:function(ue){return(0,En.p6)(ue)}},{title:N("action"),key:"action",render:function(ue,ee){return(0,e.jsxs)(ne.Z,{size:"middle",children:[(0,e.jsx)(Cn,{text:ee.token}),(0,e.jsx)(w.Z,{onClick:function(){return i(ee.token,ee.tenant_id)}})]})}}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Te.Z,{title:N("apiKey"),open:s,onCancel:m,cancelButtonProps:{style:{display:"none"}},style:{top:300},onOk:m,width:"50vw",children:[(0,e.jsx)(gn.Z,{columns:k,dataSource:F,rowKey:"token",loading:Q}),(0,e.jsx)(K.ZP,{onClick:E,loading:L,children:N("createNewKey")})]})})},Ot=Tt,At=n(21636),wt=n(42481),Zt=n(55186),kt=["children","className","node"],Nt=function(t){var s=t.children;return(0,e.jsx)(At.U,{remarkPlugins:[Zt.Z],components:{code:function(m){var Z=m.children,E=m.className,i=m.node,F=ln()(m,kt),Q=/language-(\w+)/.exec(E||"");return Q?(0,e.jsx)(wt.Z,l()(l()({},F),{},{PreTag:"div",language:Q[1],children:String(Z).replace(/\n$/,"")})):(0,e.jsx)("code",l()(l()({},F),{},{className:E,children:Z}))}},children:s})},Ut=Nt,Rt=n(92398),Wt={codeCard:"codeCard___lyM60",codeText:"codeText___yCTO5"},Bt=function(t){var s=t.visible,D=t.hideModal,m=t.token,Z=m===void 0?"":m,E=(0,De.qM)("chat"),i=E.t,F=`
  ~~~ html
  <iframe
  src="`.concat(location.origin,"/chat/share?shared_id=").concat(Z,`"
  style="width: 100%; height: 100%; min-height: 600px"
  frameborder="0"
>
</iframe>
~~~
  `),Q=[{key:"1",label:i("fullScreenTitle"),children:(0,e.jsx)(u.Z,{title:i("fullScreenDescription"),extra:(0,e.jsx)(Cn,{text:F}),className:Wt.codeCard,children:(0,e.jsx)(Ut,{children:F})})},{key:"2",label:i("partialTitle"),children:i("comingSoon")},{key:"3",label:i("extensionTitle"),children:i("comingSoon")}],L=function(N){console.log(N)};return(0,e.jsx)(Te.Z,{title:i("embedModalTitle"),open:s,style:{top:300},width:"50vw",onOk:D,onCancel:D,children:(0,e.jsx)(Rt.Z,{defaultActiveKey:"1",items:Q,onChange:L})})},Ft=Bt,nn={chartWrapper:"chartWrapper___p8Zu6",chartItem:"chartItem___wdoO0",chartLabel:"chartLabel___gooI4",linkText:"linkText___wp54V"},zt=he.Z.Paragraph,Kt=It.Z.RangePicker,$e=function(t){var s,D,m=t.statsType,Z=(0,De.qM)("chat"),E=Z.t,i=(0,oe.g$)(),F=(s=(D=i[m])===null||D===void 0?void 0:D.map(function(Q){return l()(l()({},Q),{},{xAxis:(0,En.p6)(Q.xAxis)})}))!==null&&s!==void 0?s:[];return(0,e.jsxs)("div",{className:nn.chartItem,children:[(0,e.jsx)("b",{className:nn.chartLabel,children:E(_e()(m))}),(0,e.jsx)(Dt,{data:F})]})},Vt=function(t){var s=t.visible,D=t.hideModal,m=t.dialog,Z=(0,De.qM)("chat"),E=Z.t,i=(0,De.pG)(),F=i.visible,Q=i.hideModal,L=i.showModal,O=(0,oe.iV)(m.id),N=O.embedVisible,k=O.hideEmbedModal,R=O.showEmbedModal,ue=O.embedToken,ee=O.errorContextHolder,W=(0,oe.Qe)(s),J=W.pickerValue,X=W.setPickerValue,z=function(je){return je&&je>bt()().endOf("day")},fe=(0,oe.Xm)(m.id),re=fe.handlePreview,Ie=fe.contextHolder;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Te.Z,{title:E("overview"),open:s,onCancel:D,cancelButtonProps:{style:{display:"none"}},onOk:D,width:"100vw",okText:E("close",{keyPrefix:"common"}),children:[(0,e.jsxs)(b.Z,{vertical:!0,gap:"middle",children:[(0,e.jsxs)(u.Z,{title:E("backendServiceApi"),children:[(0,e.jsxs)(b.Z,{gap:8,vertical:!0,children:[E("serviceApiEndpoint"),(0,e.jsxs)(zt,{copyable:!0,className:nn.linkText,children:[location.origin,"/v1/api/"]})]}),(0,e.jsxs)(ne.Z,{size:"middle",children:[(0,e.jsx)(K.ZP,{onClick:L,children:E("apiKey")}),(0,e.jsx)("a",{href:"https://github.com/infiniflow/ragflow/blob/main/docs/references/api.md",target:"_blank",rel:"noreferrer",children:(0,e.jsx)(K.ZP,{children:E("apiReference")})})]})]}),(0,e.jsx)(u.Z,{title:"".concat(m.name," Web App"),children:(0,e.jsx)(b.Z,{gap:8,vertical:!0,children:(0,e.jsxs)(ne.Z,{size:"middle",children:[(0,e.jsx)(K.ZP,{onClick:re,children:E("preview")}),(0,e.jsx)(K.ZP,{onClick:R,children:E("embedded")})]})})}),(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)("b",{children:E("dateRange")}),(0,e.jsx)(Kt,{disabledDate:z,value:J,onChange:X,allowClear:!1})]}),(0,e.jsxs)("div",{className:nn.chartWrapper,children:[(0,e.jsx)($e,{statsType:"pv"}),(0,e.jsx)($e,{statsType:"round"}),(0,e.jsx)($e,{statsType:"speed"}),(0,e.jsx)($e,{statsType:"thumb_up"}),(0,e.jsx)($e,{statsType:"tokens"}),(0,e.jsx)($e,{statsType:"uv"})]})]}),(0,e.jsx)(Ot,{visible:F,hideModal:Q,dialogId:m.id}),(0,e.jsx)(Ft,{token:ue,visible:N,hideModal:k}),Ie,ee]})})},Gt=Vt,Ee={chatWrapper:"chatWrapper___LQ6YY",chatAppWrapper:"chatAppWrapper___hrF6r",chatAppContent:"chatAppContent___Ri0fp",chatAppCard:"chatAppCard___kPbxc",cubeIcon:"cubeIcon___zAmbo",chatAppCardSelected:"chatAppCardSelected___h9j2W",chatTitleWrapper:"chatTitleWrapper___MXbZF",chatTitle:"chatTitle___cyXkX",chatTitleContent:"chatTitleContent___XsLt3",chatSpin:"chatSpin___J9mE8",chatTitleCard:"chatTitleCard___Pnbv0",chatTitleCardSelected:"chatTitleCardSelected___A8BIt",divider:"divider___d5TdM"},Dn=he.Z.Text,Ht=function(){var t=(0,oe.iH)(),s=(0,oe.dd)(),D=s.onRemoveDialog,m=(0,oe.E$)(),Z=m.onRemoveConversation,E=(0,oe.$D)(),i=E.handleClickDialog,F=(0,oe.vV)(),Q=F.handleClickConversation,L=(0,oe.g6)(),O=L.dialogId,N=L.conversationId,k=(0,oe.ch)(),R=k.list,ue=k.addTemporaryConversation,ee=(0,oe.XU)(),W=ee.activated,J=ee.handleItemEnter,X=ee.handleItemLeave,z=(0,oe.XU)(),fe=z.activated,re=z.handleItemEnter,Ie=z.handleItemLeave,ie=(0,oe.hF)(),je=ie.conversationRenameLoading,Me=ie.initialConversationName,xe=ie.onConversationRenameOk,Se=ie.conversationRenameVisible,Oe=ie.hideConversationRenameModal,Ye=ie.showConversationRenameModal,Pe=(0,oe.HN)(),tn=Pe.dialogSettingLoading,an=Pe.initialDialog,In=Pe.onDialogEditOk,Re=Pe.dialogEditVisible,Yt=Pe.clearDialog,Qt=Pe.hideDialogEditModal,yn=Pe.showDialogEditModal,Jt=(0,oe.Gi)(),Xt=(0,oe.bR)(),qt=(0,De.qM)("chat"),Ze=qt.t,dn=(0,De.pG)(),ea=dn.visible,na=dn.hideModal,ta=dn.showModal,bn=(0,_t.cE)(),aa=bn.currentRecord,ra=bn.setRecord;(0,oe.NG)(O,!0);var sa=function(de){return function(){J(de)}},oa=function(de){return function(){re(de)}},xn=function(de){return function(le){var ge,We;le==null||(ge=le.domEvent)===null||ge===void 0||ge.preventDefault(),le==null||(We=le.domEvent)===null||We===void 0||We.stopPropagation(),yn(de)}},ia=function(de){return function(le){var ge=le.domEvent;ge.preventDefault(),ge.stopPropagation(),D([de])}},la=function(de){return function(le){var ge,We;le==null||(ge=le.domEvent)===null||ge===void 0||ge.preventDefault(),le==null||(We=le.domEvent)===null||We===void 0||We.stopPropagation(),ra(de),ta()}},ua=function(de){return function(le){var ge=le.domEvent;ge.preventDefault(),ge.stopPropagation(),Z([de])}},da=function(de){return function(le){var ge=le.domEvent;ge.preventDefault(),ge.stopPropagation(),Ye(de)}},ca=function(de){return function(){i(de)}},ma=function(de){return function(){Q(de)}},_a=(0,c.useCallback)(function(){ue()},[ue]),va=[{key:"1",onClick:_a,label:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(H.Z,{}),Ze("newChat")]})}],ha=function(de){var le=de.id,ge=[{key:"1",onClick:xn(le),label:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(se.Z,{}),Ze("edit",{keyPrefix:"common"})]})},{type:"divider"},{key:"2",onClick:ia(le),label:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(w.Z,{}),Ze("delete",{keyPrefix:"common"})]})},{type:"divider"},{key:"3",onClick:la(de),label:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(te.Z,{}),Ze("overview")]})}];return ge},fa=function(de){var le=[{key:"1",onClick:da(de),label:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(se.Z,{}),Ze("rename",{keyPrefix:"common"})]})},{type:"divider"},{key:"2",onClick:ua(de),label:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(w.Z,{}),Ze("delete",{keyPrefix:"common"})]})}];return le};return(0,oe.os)(),(0,e.jsxs)(b.Z,{className:Ee.chatWrapper,children:[(0,e.jsx)(b.Z,{className:Ee.chatAppWrapper,children:(0,e.jsxs)(b.Z,{flex:1,vertical:!0,children:[(0,e.jsx)(K.ZP,{type:"primary",onClick:xn(),children:Ze("createAssistant")}),(0,e.jsx)(_.Z,{}),(0,e.jsx)(b.Z,{className:Ee.chatAppContent,vertical:!0,gap:10,children:(0,e.jsx)(o.Z,{spinning:Jt,wrapperClassName:Ee.chatSpin,children:t.map(function(q){return(0,e.jsx)(u.Z,{hoverable:!0,className:S()(Ee.chatAppCard,p()({},Ee.chatAppCardSelected,O===q.id)),onMouseEnter:sa(q.id),onMouseLeave:X,onClick:ca(q.id),children:(0,e.jsxs)(b.Z,{justify:"space-between",align:"center",children:[(0,e.jsxs)(ne.Z,{size:15,children:[(0,e.jsx)(a.C,{src:q.icon,shape:"square"}),(0,e.jsxs)("section",{children:[(0,e.jsx)("b",{children:(0,e.jsx)(Dn,{ellipsis:{tooltip:q.name},style:{width:130},children:q.name})}),(0,e.jsx)("div",{children:q.description})]})]}),W===q.id&&(0,e.jsx)("section",{children:(0,e.jsx)(d.Z,{menu:{items:ha(q)},children:(0,e.jsx)(A,{className:Ee.cubeIcon})})})]})},q.id)})})})]})}),(0,e.jsx)(_.Z,{type:"vertical",className:Ee.divider}),(0,e.jsx)(b.Z,{className:Ee.chatTitleWrapper,children:(0,e.jsxs)(b.Z,{flex:1,vertical:!0,children:[(0,e.jsxs)(b.Z,{justify:"space-between",align:"center",className:Ee.chatTitle,children:[(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)("b",{children:Ze("chat")}),(0,e.jsx)(h.Z,{children:R.length})]}),(0,e.jsx)(d.Z,{menu:{items:va},children:(0,e.jsx)(H.Z,{})})]}),(0,e.jsx)(_.Z,{}),(0,e.jsx)(b.Z,{vertical:!0,gap:10,className:Ee.chatTitleContent,children:(0,e.jsx)(o.Z,{spinning:Xt,wrapperClassName:Ee.chatSpin,children:R.map(function(q){return(0,e.jsx)(u.Z,{hoverable:!0,onClick:ma(q.id),onMouseEnter:oa(q.id),onMouseLeave:Ie,className:S()(Ee.chatTitleCard,p()({},Ee.chatTitleCardSelected,q.id===N)),children:(0,e.jsxs)(b.Z,{justify:"space-between",align:"center",children:[(0,e.jsx)("div",{children:(0,e.jsx)(Dn,{ellipsis:{tooltip:q.name},style:{width:150},children:q.name})}),fe===q.id&&q.id!==""&&(0,e.jsx)("section",{children:(0,e.jsx)(d.Z,{menu:{items:fa(q.id)},children:(0,e.jsx)(A,{className:Ee.cubeIcon})})})]})},q.id)})})})]})}),(0,e.jsx)(_.Z,{type:"vertical",className:Ee.divider}),(0,e.jsx)(mt,{}),(0,e.jsx)(Jn,{visible:Re,initialDialog:an,showModal:yn,hideModal:Qt,loading:tn,onOk:In,clearDialog:Yt}),(0,e.jsx)(G.Z,{visible:Se,hideModal:Oe,onOk:xe,initialName:Me,loading:je}),(0,e.jsx)(Gt,{visible:ea,hideModal:na,dialog:aa})]})},$t=Ht},4772:function(pe,U,n){"use strict";n.d(U,{Z:function(){return g}});var V=n(86250),p=n(38925),c=n(2039),C=n(62435),I={errorWrapper:"errorWrapper___QfVXQ"},f=n(86074),v=function(A){var B=A.children,G=(0,c.qM)("fileManager"),H=G.t;return(0,f.jsx)(V.Z,{align:"center",justify:"center",className:I.errorWrapper,children:(0,f.jsx)(p.Z,{type:"error",message:(0,f.jsx)("h2",{children:B||H("fileError")})})})},g=v},28382:function(pe,U,n){"use strict";n.d(U,{p6:function(){return f}});var V=n(27484),p=n.n(V);function c(){return f(dayjs())}function C(){return f(dayjs().subtract(1,"days"))}function I(){return f(dayjs().subtract(1,"weeks"))}function f(v){return v?p()(v).format("DD/MM/YYYY HH:mm:ss"):""}},65400:function(pe,U,n){"use strict";n.d(U,{RT:function(){return C},Re:function(){return c},YC:function(){return f},Ze:function(){return I},q1:function(){return p}});var V=n(57632),p=function(g,r){var A;return Array.isArray(g==null?void 0:g.positions)&&g.positions.every(function(B){return Array.isArray(B)})?g==null||(A=g.positions)===null||A===void 0?void 0:A.map(function(B){var G={width:r.width,height:r.height,x1:B[1],x2:B[2],y1:B[3],y2:B[4]};return{id:(0,V.Z)(),comment:{text:"",emoji:""},content:{text:g.content_with_weight},position:{boundingRect:G,rects:[G],pageNumber:B[0]}}}):[]},c=function(g){return g.status==="done"},C=function(g){var r;return(r=g==null?void 0:g.slice(g.lastIndexOf(".")+1).toLowerCase())!==null&&r!==void 0?r:""},I=function(g){return C(g)==="pdf"},f=function(g){return g.split(`
`).length}},86635:function(pe){function U(n){return Promise.resolve().then(function(){var V=new Error("Cannot find module '"+n+"'");throw V.code="MODULE_NOT_FOUND",V})}U.keys=function(){return[]},U.resolve=U,U.id=86635,pe.exports=U},64838:function(){},27922:function(){},15212:function(){},85777:function(){},76929:function(){},45036:function(){}}]);

//# sourceMappingURL=p__chat__index.72aa528b.async.js.map