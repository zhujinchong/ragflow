(self.webpackChunk=self.webpackChunk||[]).push([[2897],{82897:function(I,f,e){"use strict";e.d(f,{Z:function(){return Ie}});var g=e(13769),h=e.n(g),a=e(15009),x=e.n(a),E=e(97857),i=e.n(E),d=e(99289),r=e.n(d),s=e(5574),l=e.n(s),A=e(77680),L=e(25035),n=e(87462),P=e(62435),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},_=$,q=e(84089),S=function(u,C){return P.createElement(q.Z,(0,n.Z)({},u,{ref:C,icon:_}))},w=P.forwardRef(S),o=e(24969),M=e(99859),b=e(85576),T=e(42075),U=e(20652),ee=e(96074),fe=e(83062),ne=e(48928),ge=e(15867),xe=e(57557),Me=e.n(xe),je=e(19632),Pe=e.n(je),ie=e(79495),le=new Map([[["pdf"],["naive","resume","manual","paper","book","laws","presentation","one"]],[["doc","docx"],["naive","resume","book","laws","one"]],[["xlsx","xls"],["naive","qa","table","one"]],[["ppt","pptx"],["presentation"]],[["jpg","jpeg","png","gif","bmp","tif","tiff","webp","svg","ico"],["picture"]],[["txt"],["naive","resume","book","laws","one","qa","table"]],[["csv"],["naive","resume","book","laws","one","qa","table"]]]),de=function(u,C){return C.filter(function(F){return u==null?void 0:u.some(function(W){return W===F.value})})},pe=function(u,C,F){var W=(0,P.useState)(""),X=l()(W,2),k=X[0],B=X[1],y=(0,ie.XH)(),ae=(0,P.useMemo)(function(){var V=Pe()(le.keys()).find(function(p){return p.some(function(re){return re===F})});if(V){var D=le.get(V);return de(D!=null?D:[],y)}return de(["naive","resume","book","laws","one","qa","table"],y)},[y,F]);(0,ie.fS)(),(0,P.useEffect)(function(){B(C)},[C,u]);var K=function(D){B(D)};return{parserList:ae,handleChange:K,selectedTag:k}},Ze=e(2039),Ee=e(78656),ue=e(85885),J={pageInputNumber:"pageInputNumber___qm78X",questionIcon:"questionIcon___d34w8",chunkMethod:"chunkMethod___tcugG"},t=e(86074),Ce=["key","name"],me=["qa","table","picture","resume","one"],Oe=function(u){var C=u.documentId,F=u.parserId,W=u.onOk,X=u.hideModal,k=u.visible,B=u.documentExtension,y=u.parserConfig,ae=u.loading,K=pe(C,F,B),V=K.parserList,D=K.handleChange,p=K.selectedTag,re=M.Z.useForm(),Te=l()(re,1),N=Te[0],ye=(0,Ze.qM)("knowledgeDetails"),v=ye.t,De=function(){var m=r()(x()().mark(function Z(){var j,O,z,R;return x()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,N.validateFields();case 2:z=c.sent,R=i()(i()({},z.parser_config),{},{pages:(j=(O=z.pages)===null||O===void 0?void 0:O.map(function(H){return[H.from,H.to]}))!==null&&j!==void 0?j:[]}),W(p,R);case 5:case"end":return c.stop()}},Z)}));return function(){return m.apply(this,arguments)}}(),Q=B==="pdf",se=(0,P.useMemo)(function(){return Q&&me.every(function(m){return m!==p})},[p,Q]),ce=(0,P.useMemo)(function(){return Q&&me.filter(function(m){return m!=="one"}).every(function(m){return m!==p})},[p,Q]),he=p==="naive",Re=[se,ce,he].every(function(m){return m===!1}),Le=function(){N.resetFields()};return(0,P.useEffect)(function(){if(k){var m,Z,j=(m=(Z=y.pages)===null||Z===void 0?void 0:Z.map(function(O){return{from:O[0],to:O[1]}}))!==null&&m!==void 0?m:[];N.setFieldsValue({pages:j.length>0?j:[{from:1,to:1024}],parser_config:Me()(y,"pages")})}},[N,y,k]),(0,t.jsxs)(b.Z,{title:v("chunkMethod"),open:k,onOk:De,onCancel:X,afterClose:Le,confirmLoading:ae,width:700,children:[(0,t.jsx)(T.Z,{size:[0,8],wrap:!0,children:(0,t.jsx)(M.Z.Item,{label:v("chunkMethod"),className:J.chunkMethod,children:(0,t.jsx)(U.Z,{style:{width:120},onChange:D,value:p,options:V})})}),Re||(0,t.jsx)(ee.Z,{}),(0,t.jsxs)(M.Z,{name:"dynamic_form_nest_item",autoComplete:"off",form:N,children:[se&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(T.Z,{children:[(0,t.jsxs)("p",{children:[v("pageRanges"),":"]}),(0,t.jsx)(fe.Z,{title:v("pageRangesTip"),children:(0,t.jsx)(L.Z,{className:J.questionIcon})})]}),(0,t.jsx)(M.Z.List,{name:"pages",children:function(Z,j){var O=j.add,z=j.remove;return(0,t.jsxs)(t.Fragment,{children:[Z.map(function(R){var ve=R.key,c=R.name,H=h()(R,Ce);return(0,t.jsxs)(T.Z,{style:{display:"flex"},align:"baseline",children:[(0,t.jsx)(M.Z.Item,i()(i()({},H),{},{name:[c,"from"],dependencies:c>0?[c-1,"to"]:[],rules:[{required:!0,message:v("fromMessage")},function(Y){var oe=Y.getFieldValue;return{validator:function(Ae,G){return c===0||!G||oe(["pages",c-1,"to"])<G?Promise.resolve():Promise.reject(new Error(v("greaterThanPrevious")))}}}],children:(0,t.jsx)(ne.Z,{placeholder:v("fromPlaceholder"),min:0,precision:0,className:J.pageInputNumber})})),(0,t.jsx)(M.Z.Item,i()(i()({},H),{},{name:[c,"to"],dependencies:[c,"from"],rules:[{required:!0,message:v("toMessage")},function(Y){var oe=Y.getFieldValue;return{validator:function(Ae,G){return!G||oe(["pages",c,"from"])<G?Promise.resolve():Promise.reject(new Error(v("greaterThan")))}}}],children:(0,t.jsx)(ne.Z,{placeholder:v("toPlaceholder"),min:0,precision:0,className:J.pageInputNumber})})),c>0&&(0,t.jsx)(w,{onClick:function(){return z(c)}})]},ve)}),(0,t.jsx)(M.Z.Item,{children:(0,t.jsx)(ge.ZP,{type:"dashed",onClick:function(){return O()},block:!0,icon:(0,t.jsx)(o.Z,{}),children:v("addPage")})})]})}})]}),ce&&(0,t.jsx)(Ee.Z,{}),se&&(0,t.jsx)(M.Z.Item,{noStyle:!0,dependencies:[["parser_config","layout_recognize"]],children:function(Z){var j=Z.getFieldValue;return j(["parser_config","layout_recognize"])&&(0,t.jsx)(M.Z.Item,{name:["parser_config","task_page_size"],label:v("taskPageSize"),tooltip:v("taskPageSizeTip"),initialValue:12,rules:[{required:!0,message:v("taskPageSizeMessage")}],children:(0,t.jsx)(ne.Z,{min:1,max:128})})}}),he&&(0,t.jsx)(A.Z,{}),(0,ue.J3)(p)&&(0,t.jsx)(ue.ZP,{})]})]})},Ie=Oe},78656:function(I,f,e){"use strict";var g=e(2039),h=e(99859),a=e(72269),x=e(86074),E=function(){var d=(0,g.qM)("knowledgeDetails"),r=d.t;return(0,x.jsx)(h.Z.Item,{name:["parser_config","layout_recognize"],label:r("layoutRecognize"),initialValue:!0,valuePropName:"checked",tooltip:r("layoutRecognizeTip"),children:(0,x.jsx)(a.Z,{})})};f.Z=E},77680:function(I,f,e){"use strict";var g=e(2039),h=e(99859),a=e(86250),x=e(71338),E=e(48928),i=e(86074),d=function(){var s=(0,g.qM)("knowledgeConfiguration"),l=s.t;return(0,i.jsx)(h.Z.Item,{label:l("chunkTokenNumber"),tooltip:l("chunkTokenNumberTip"),children:(0,i.jsxs)(a.Z,{gap:20,align:"center",children:[(0,i.jsx)(a.Z,{flex:1,children:(0,i.jsx)(h.Z.Item,{name:["parser_config","chunk_token_num"],noStyle:!0,initialValue:128,rules:[{required:!0,message:l("chunkTokenNumberMessage")}],children:(0,i.jsx)(x.Z,{max:2048,style:{width:"100%"}})})}),(0,i.jsx)(h.Z.Item,{name:["parser_config","chunk_token_num"],noStyle:!0,rules:[{required:!0,message:l("chunkTokenNumberMessage")}],children:(0,i.jsx)(E.Z,{max:2048,min:0})})]})})};f.Z=d},85885:function(I,f,e){"use strict";e.d(f,{J3:function(){return $}});var g=e(2039),h=e(24969),a=e(99859),x=e(96074),E=e(72269),i=e(79531),d=e(86250),r=e(71338),s=e(48928),l=e(15867),A=e(83608),L=e.n(A),n=e(86074),P=["table","resume","one","picture"],$=function(S){return!P.includes(S)},_=function(){var S=a.Z.useFormInstance(),w=(0,g.qM)("knowledgeConfiguration"),o=w.t,M=function(){S.setFieldValue(["parser_config","raptor","random_seed"],L()(1e4))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{}),(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","use_raptor"],label:o("useRaptor"),initialValue:!1,valuePropName:"checked",tooltip:o("useRaptorTip"),children:(0,n.jsx)(E.Z,{})}),(0,n.jsx)(a.Z.Item,{shouldUpdate:function(T,U){return T.parser_config.raptor.use_raptor!==U.parser_config.raptor.use_raptor},children:function(T){var U=T.getFieldValue,ee=U(["parser_config","raptor","use_raptor"]);return ee&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","prompt"],label:o("prompt"),initialValue:o("promptText"),tooltip:o("promptTip"),rules:[{required:!0,message:o("promptMessage")}],children:(0,n.jsx)(i.Z.TextArea,{rows:8})}),(0,n.jsx)(a.Z.Item,{label:o("maxToken"),tooltip:o("maxTokenTip"),children:(0,n.jsxs)(d.Z,{gap:20,align:"center",children:[(0,n.jsx)(d.Z,{flex:1,children:(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","max_token"],noStyle:!0,initialValue:256,rules:[{required:!0,message:o("maxTokenMessage")}],children:(0,n.jsx)(r.Z,{max:2048,style:{width:"100%"}})})}),(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","max_token"],noStyle:!0,rules:[{required:!0,message:o("maxTokenMessage")}],children:(0,n.jsx)(s.Z,{max:2048,min:0})})]})}),(0,n.jsx)(a.Z.Item,{label:o("threshold"),tooltip:o("thresholdTip"),children:(0,n.jsxs)(d.Z,{gap:20,align:"center",children:[(0,n.jsx)(d.Z,{flex:1,children:(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","threshold"],noStyle:!0,initialValue:.1,rules:[{required:!0,message:o("thresholdMessage")}],children:(0,n.jsx)(r.Z,{min:0,max:1,style:{width:"100%"},step:.01})})}),(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","threshold"],noStyle:!0,rules:[{required:!0,message:o("thresholdMessage")}],children:(0,n.jsx)(s.Z,{max:1,min:0,step:.01})})]})}),(0,n.jsx)(a.Z.Item,{label:o("maxCluster"),tooltip:o("maxClusterTip"),children:(0,n.jsxs)(d.Z,{gap:20,align:"center",children:[(0,n.jsx)(d.Z,{flex:1,children:(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","max_cluster"],noStyle:!0,initialValue:64,rules:[{required:!0,message:o("maxClusterMessage")}],children:(0,n.jsx)(r.Z,{min:1,max:1024,style:{width:"100%"}})})}),(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","max_cluster"],noStyle:!0,rules:[{required:!0,message:o("maxClusterMessage")}],children:(0,n.jsx)(s.Z,{max:1024,min:1})})]})}),(0,n.jsx)(a.Z.Item,{label:o("randomSeed"),children:(0,n.jsxs)(d.Z,{gap:20,align:"center",children:[(0,n.jsx)(d.Z,{flex:1,children:(0,n.jsx)(a.Z.Item,{name:["parser_config","raptor","random_seed"],noStyle:!0,initialValue:0,rules:[{required:!0,message:o("randomSeedMessage")}],children:(0,n.jsx)(s.Z,{style:{width:"100%"}})})}),(0,n.jsx)(a.Z.Item,{noStyle:!0,children:(0,n.jsx)(l.ZP,{type:"primary",onClick:M,children:(0,n.jsx)(h.Z,{})})})]})})]})}})]})};f.ZP=_},69877:function(I){var f=Math.floor,e=Math.random;function g(h,a){return h+f(e()*(a-h+1))}I.exports=g},83608:function(I,f,e){var g=e(69877),h=e(16612),a=e(18601),x=parseFloat,E=Math.min,i=Math.random;function d(r,s,l){if(l&&typeof l!="boolean"&&h(r,s,l)&&(s=l=void 0),l===void 0&&(typeof s=="boolean"?(l=s,s=void 0):typeof r=="boolean"&&(l=r,r=void 0)),r===void 0&&s===void 0?(r=0,s=1):(r=a(r),s===void 0?(s=r,r=0):s=a(s)),r>s){var A=r;r=s,s=A}if(l||r%1||s%1){var L=i();return E(r+L*(s-r+x("1e-"+((L+"").length-1))),s)}return g(r,s)}I.exports=d}}]);

//# sourceMappingURL=2897.b5438268.async.js.map